<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta 
    name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta 
    http-equiv="X-UA-Compatible" 
    content="ie=edge">
  <meta 
    name="theme-color" 
    content="#fff" 
    id="theme-color">
  <meta 
    name="description" 
    content="æ‡’æ‡’æ‡’èœ—ç‰›ğŸŒ">
  <link 
    rel="icon" 
    href="/img/little-prince.png">
  <title>Map</title>
  
    
      <meta 
        property="og:title" 
        content="Map">
    
    
      <meta 
        property="og:url" 
        content="https://lazy-snail.github.io/2018/06/03/java/Map/index.html">
    
    
      <meta 
        property="og:img" 
        content="/img/little-prince.png">
    
    
    
      <meta 
        property="og:type" 
        content="article">
      <meta 
        property="og:article:published_time" 
        content="2018-06-03">
      <meta 
        property="og:article:modified_time" 
        content="2022-06-28">
      <meta 
        property="og:article:author" 
        content="Neil">
      
        
          <meta 
            property="og:article:tag" 
            content="java">
        
          <meta 
            property="og:article:tag" 
            content="å®¹å™¨">
        
      
    
  
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
    function loadCSS(href, data, attr) {
      var sheet = document.createElement('link');
      sheet.ref = 'stylesheet';
      sheet.href = href;
      sheet.dataset[data] = attr;
      document.head.appendChild(sheet);
    }
    function changeCSS(cssFile, data, attr) {
      var oldlink = document.querySelector(data);
      var newlink = document.createElement("link");
      newlink.setAttribute("rel", "stylesheet");
      newlink.setAttribute("href", cssFile);
      newlink.dataset.prism = attr;
      document.head.replaceChild(newlink, oldlink);
    }
  </script>
  
    
      
      
      
      
        
        
        
        <script>
          function prismThemeChange() {
            if(document.getElementById('theme-color').dataset.mode === 'dark') {
              if(document.querySelector('[data-prism]')) {
                changeCSS('/js/lib/prism/prism-tomorrow.min.css', '[data-prism]', 'prism-tomorrow');
              } else {
                loadCSS('/js/lib/prism/prism-tomorrow.min.css', 'prism', 'prism-tomorrow');
              }
            } else {
              if(document.querySelector('[data-prism]')) {
                changeCSS('/js/lib/prism/prism.min.css', '[data-prism]', 'prism');
              } else {
                loadCSS('/js/lib/prism/prism.min.css', 'prism', 'prism');
              }
            }
          }
          prismThemeChange()
        </script>
      
      
        
        <link rel="stylesheet" href="/js/lib/prism/prism-line-numbers.min.css">
      
    
  
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
  </script>
  
    <script>
      var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
        prismThemeChange();
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
        prismThemeChange();
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
        document.getElementById('theme-color').dataset.mode = getCssMediaQuery();
        prismThemeChange();
      }
    };
    setDarkmode();
    </script>
  
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  
    <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.js" as="script">
    <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.css" as="style" >
  
  
    <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
    
    <link rel="prefetch" href="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js" as="script">
  
  
  
  
  <link rel="stylesheet" href="/css/main.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">
  
    <link rel="stylesheet" href="/js/lib/lightbox/baguetteBox.min.css">
  
<meta name="generator" content="Hexo 6.1.0"></head>

  <body>
    <div class="wrapper">
       
      <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
        <img 
          class="navbar-logo-img"
          width="32"
          height="32"
          src="/img/little-prince.png" 
          alt="blog logo">
      
      <span class="navbar-logo-dsc">æ‡’èœ—ç‰›</span>
    </span>
  </div>
  <div class="navbar-menu">
    
      <a 
        href="/" 
        class="navbar-menu-item">
        
          Home
        
      </a>
    
      <a 
        href="/archives" 
        class="navbar-menu-item">
        
          Archive
        
      </a>
    
      <a 
        href="/tags" 
        class="navbar-menu-item">
        
          Tags
        
      </a>
    
      <a 
        href="/categories" 
        class="navbar-menu-item">
        
          Categories
        
      </a>
    
      <a 
        href="/about" 
        class="navbar-menu-item">
        
          About
        
      </a>
    
    <a 
      class="navbar-menu-item darknavbar" 
      id="dark">
      <i class="iconfont icon-weather"></i>
    </a>
    <a 
      class="navbar-menu-item searchnavbar" 
      id="search">
      <i 
        class="iconfont icon-search" 
        style="font-size: 1.2rem; font-weight: 400;">
      </i>
    </a>
  </div>
</nav> 
      
      <div 
        id="local-search" 
        style="display: none">
        <input
          class="navbar-menu-item"
          id="search-input"
          placeholder="è¯·è¾“å…¥æœç´¢å†…å®¹..." />
        <div id="search-content"></div>
      </div>
      
      <div class="section-wrap">
        <div class="container">
          <div class="columns">
            <main class="main-column">
<article class="card card-content">
  <header>
    <h1 class="post-title">
      Map
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2018-06-03T11:27:12.000Z">
      <i 
        class="iconfont icon-calendar" 
        style="margin-right: 2px;">
      </i>
      <span>2018-06-03</span>
    </time>
    
      <span class="dot"></span>
      
        <a 
          href="/categories/java/" 
          class="post-meta-link">
          java
        </a>
      
    
    
      <span class="dot"></span>
      <span>2.9k words</span>
    
  </div>
  
    <div 
      class="post-meta post-show-meta" 
      style="margin-top: -10px;">
      <div style="display: flex; align-items: center;">
        <i 
          class="iconfont icon-biaoqian" 
          style="margin-right: 2px; font-size: 1.15rem;">
        </i>
        
          
          <a 
            href="/tags/java/" 
            class="post-meta-link">
            java
          </a>
        
          
            <span class="dot"></span>
          
          <a 
            href="/tags/%E5%AE%B9%E5%99%A8/" 
            class="post-meta-link">
            å®¹å™¨
          </a>
        
      </div>
    </div>
  
  </header>
  <div 
    id="section" 
    class="post-content">
    <p>[toc]</p>
<h1 id="Map-æ¥å£"><a href="#Map-æ¥å£" class="headerlink" title="Map æ¥å£"></a>Map æ¥å£</h1><p>Map å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§ç¬¦å·è¡¨ï¼Œä½¿ç”¨é”®å€¼å¯¹çš„æ•°æ®ç»“æ„å­˜å‚¨æ•°æ®ã€‚<br>å®ç°äº† Map æ¥å£çš„å¸¸ç”¨å®¹å™¨ç±»ï¼šåŒ…æ‹¬éçº¿ç¨‹å®‰å…¨çš„ HashMapã€LinkedHashMapã€TreeMapï¼Œçº¿ç¨‹å®‰å…¨çš„ ConcurrentHashMapã€ConcurrentSkipListMapï¼Œçº¿ç¨‹å®‰å…¨ä½†ç›®å‰å·²ä¸æ¨èä½¿ç”¨çš„ HashTableã€‚</p>
<h1 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h1><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span>
    <span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>å…¶å†…éƒ¨çš„ Node ç»“æ„ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> hash<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span>
        <span class="token class-name">V</span> value<span class="token punctuation">;</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> next<span class="token punctuation">;</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>åˆå§‹å¤§å° DEFAULT_INITIAL_CAPACITY &#x3D; 1 &lt;&lt; 4; &#x2F;&#x2F; aka 16ã€‚å³åˆå§‹å¤§å°ä¸º 16ã€‚</p>
<h2 id="æ ‘åŒ–-x2F-é€€åŒ–"><a href="#æ ‘åŒ–-x2F-é€€åŒ–" class="headerlink" title="æ ‘åŒ–&#x2F;é€€åŒ–"></a>æ ‘åŒ–&#x2F;é€€åŒ–</h2><p>ä¸ºäº†æé«˜å“ˆå¸Œç¢°æ’ä¸‹çš„å¯»å€æ€§èƒ½ï¼Œåœ¨é“¾è¡¨é•¿åº¦è¶…è¿‡æ ‘åŒ–é˜ˆå€¼æ—¶å°†é“¾è¡¨è½¬æ¢ä¸ºä¸€æ£µçº¢é»‘æ ‘ï¼Œå³å°†å¯»å€æ—¶é—´å¤æ‚åº¦ä» O(n) é™ä½åˆ° O(logn)ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> TREEIFY_THRESHOLD <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> UNTREEIFY_THRESHOLD <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">>=</span> TREEIFY_THRESHOLD<span class="token punctuation">)</span>
    <span class="token comment">// Conversion from/to TreeBins</span>
    <span class="token function">treeifyBin</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>åŒæ ·åœ°ï¼Œå½“é“¾è¡¨é•¿åº¦å‡å°åˆ°é€€åŒ–é˜ˆå€¼ï¼ŒåŸæœ¬çº¢é»‘æ ‘åŒ–çš„é“¾è¡¨ä¼šé‡æ–°ç»„ç»‡æˆä¸€ä¸ªé“¾è¡¨ï¼Œæ­¤æ—¶å°½ç®¡æ˜¯ O(n) çš„æŸ¥è¯¢æ—¶é—´ï¼Œä½†ç”±äºé“¾è¡¨è¾ƒçŸ­ï¼Œæ€§èƒ½ä¾ç„¶å¾ˆå¥½ã€‚<br>åŸºäº HashMap å®ç°çš„å…¶ä»–ç‰ˆæœ¬ä¹Ÿæœ‰æ­¤æ¼”è¿›ï¼ˆè¯¦è§JDK1.7- åˆ° JDK1.8+ æºç å˜åŒ–ï¼‰ã€‚</p>
<h2 id="å¯»å€æ–¹å¼-x2F-hash-å€¼è®¡ç®—"><a href="#å¯»å€æ–¹å¼-x2F-hash-å€¼è®¡ç®—" class="headerlink" title="å¯»å€æ–¹å¼&#x2F;hash å€¼è®¡ç®—"></a>å¯»å€æ–¹å¼&#x2F;hash å€¼è®¡ç®—</h2><p>é€šè¿‡ Key çš„å“ˆå¸Œå€¼ä¸æ•°ç»„é•¿åº¦å–æ¨¡ç¡®å®šè¯¥ Key åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ã€‚<br>JDK1.8+ HashMap ä½œè€…è®¤ä¸ºå¼•å…¥çº¢é»‘æ ‘è½¬åŒ–ç­–ç•¥åï¼Œå³ä½¿å“ˆå¸Œå†²çªæ¯”è¾ƒä¸¥é‡ï¼Œå¯»å€æ•ˆç‡ä¹Ÿè¶³å¤Ÿé«˜ï¼Œæ‰€ä»¥å¹¶æœªåœ¨å“ˆå¸Œå€¼è®¡ç®—ä¸Šåšè¿‡å¤šè®¾è®¡ã€‚å…·ä½“åšæ³•åªå°† Key çš„ hashCode é«˜ 16 ä½ä¿æŒä¸å˜ï¼Œä½ 16 ä½ä¸é«˜ 16 ä½è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œå¾—åˆ°çš„å€¼ä½œä¸ºä½ 16 ä½çš„å€¼ï¼Œå³å¾—åˆ° hash å€¼ï¼ˆå³ hash()ï¼‰ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hash</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> h<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token punctuation">(</span>h <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token punctuation">(</span>h <span class="token operator">>>></span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>å…³äºè¯¥æ‰°åŠ¨å‡½æ•°çš„åˆ†æå¯ä»¥çœ‹è¿™é‡Œï¼š<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/20733617/answer/111577937">Java 8 HashMap ä¸­ hash() æ–¹æ³•åˆ†æ</a></p>
<h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><ul>
<li>éçº¿ç¨‹å®‰å…¨çš„ï¼›</li>
<li>æ ¹æ®é”®çš„ hashCode å€¼å­˜å‚¨æ•°æ®ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹å¯ä»¥ç›´æ¥å®šä½é”®å€¼å¯¹ï¼Œå› è€Œå…·æœ‰å¾ˆå¿«çš„è®¿é—®é€Ÿåº¦ï¼Œç†è®ºä¸Šæ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼›</li>
<li>éå†é¡ºåºæ˜¯ä¸ç¡®å®šçš„ï¼Œä¹Ÿæ— æ³•æ”¯æŒéšæœºè®¿é—®ï¼›</li>
<li>ä¸å…è®¸é‡å¤é”®ï¼Œæœ€å¤šåªå…è®¸ä¸€æ¡è®°å½•çš„é”®ä¸º nullï¼Œå…è®¸å¤šæ¡è®°å½•çš„å€¼ä¸º nullã€‚</li>
</ul>
<h2 id="hashCode-æ–¹æ³•å’ŒåŠ è½½å› å­"><a href="#hashCode-æ–¹æ³•å’ŒåŠ è½½å› å­" class="headerlink" title="hashCode æ–¹æ³•å’ŒåŠ è½½å› å­"></a>hashCode æ–¹æ³•å’ŒåŠ è½½å› å­</h2><p>HashMap åŸºäºå“ˆå¸Œå‡½æ•°æ¥å­˜å‚¨é”®å€¼å¯¹ï¼Œå³ï¼Œç”±ä¸€ä¸ªå“ˆå¸Œå‡½æ•°å†³å®šæ¯ä¸ªé”®å€¼å¯¹çš„å­˜æ”¾ä½ç½®ï¼Œå­˜æ”¾ä½ç½®æ‰€ä½¿ç”¨çš„æ•°æ®ç»“æ„ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå…¶åˆå§‹å®¹é‡ä¸º 16ï¼Œå¹¶ä¸”è¦æ±‚è¯¥å€¼å¿…é¡»ä¸º 2 çš„å¹‚ï¼Œè¿™ä¸å…¶åº•å±‚æ•°æ®ç»“æ„æœ‰å…³ã€‚åœ¨ä¸å‡ºç°å“ˆå¸Œç¢°æ’ï¼ˆä¸¤ä¸ªé”®å€¼å¯¹çš„å“ˆå¸Œç»“æœç›¸åŒï¼‰çš„æƒ…å†µä¸‹ï¼Œå³å®Œç¾å“ˆå¸Œæ—¶ï¼Œè®¿é—®æ—¶é—´å¤æ‚åº¦å³ä¸º O(1)ã€‚HashMap ä½¿ç”¨ <strong>å¼€æ•£åˆ—</strong> æ–¹æ³•æ¥è§£å†³å“ˆå¸Œå†²çªï¼Œå³ï¼Œ<strong>å¯¹åº”ä¸€ä¸ªç‰¹å®š hash å€¼çš„ä½ç½®å­˜å‚¨çš„æ˜¯ä¸€ä¸ªé“¾è¡¨å¤´ï¼ŒæŒ‡å‘ hash åˆ°åŒä¸€ä¸ªä½ç½®çš„å¤šä¸ªé”®å€¼å¯¹ç»„æˆçš„é“¾è¡¨</strong>ã€‚è¿™ç§å®ç°çš„è®¿é—®æ—¶é—´å¤æ‚åº¦æ˜¾ç„¶ä¸æ˜¯å¸¸æ•°çº§ï¼Œä¸”éšç€é”®å€¼å¯¹çš„å¢å¤šï¼Œå‘ç”Ÿç¢°æ’çš„æƒ…å†µä¼šåŠ å‰§ã€‚æ‰€ä»¥ HashMap æœ‰ä¸€ä¸ªåŠ è½½å› å­ï¼ˆDEFAULT_LOAD_FACTOR &#x3D; 0.75fï¼‰ï¼Œ<strong>ç”¨æ¥æ§åˆ¶å½“ HashMap åˆ°è¾¾ä¸€å®šâ€œè£…è½½ç¨‹åº¦â€æ—¶æ‰§è¡Œ rehashï¼ˆé‡å“ˆå¸Œï¼‰æ“ä½œï¼Œä½¿å¾—å®¹é‡å˜ä¸ºåŸæ¥çš„çº¦ 2 å€</strong>ã€‚æ³¨æ„ï¼Œé‡å“ˆå¸Œæ˜¯ä¸ªéå¸¸è€—æ—¶çš„æ“ä½œï¼Œæ‰€ä»¥æœ‰å¿…è¦é‡‡å–ä¸€äº›æªæ–½ï¼ˆæ¯”å¦‚é¢„ä¼°å¹¶åœ¨åˆå§‹åŒ–æ—¶è°ƒç”¨æŒ‡å®šåˆå§‹æ•°ç»„å®¹é‡çš„æ„é€ æ–¹æ³•ï¼‰æ¥é¿å…&#x2F;å‡å°‘ã€‚</p>
<h2 id="é‡å†™-hashCode-å’Œ-equal"><a href="#é‡å†™-hashCode-å’Œ-equal" class="headerlink" title="é‡å†™ hashCode() å’Œ equal()"></a>é‡å†™ hashCode() å’Œ equal()</h2><p>HashMap çš„å¾ˆå¤šæ–¹æ³•éƒ½æ˜¯åŸºäº hashCode() å’Œ equal() çš„ï¼Œå‰è€…ç”¨æ¥å®šä½ï¼Œåè€…ç”¨æ¥åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ã€‚å¾ˆå¤šæƒ…å†µä¸‹ï¼Œequal æ–¹æ³•å¯èƒ½å¹¶ä¸ç¬¦åˆæˆ‘ä»¬ç¨‹åºçš„é€»è¾‘â€”â€”Object çš„ equel æ–¹æ³•åªæ˜¯ç®€å•åœ°åˆ¤æ–­æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Œå› æ­¤å½“æˆ‘ä»¬è®¤ä¸ºåˆ¤å®š equals åº”è¯¥æ˜¯é€»è¾‘ä¸Šçš„ç›¸ç­‰è€Œä¸æ˜¯ä»…ä»…åˆ¤æ–­æ˜¯ä¸æ˜¯å†…å­˜ä¸­ä¸­åŒä¸€ä¸ªä¸œè¥¿çš„æ—¶å€™ï¼Œå°±éœ€è¦é‡å†™ equal()ï¼Œæ­¤æ—¶ï¼Œå°±å¿…é¡»é‡å†™ hashCode()ã€‚<br>é‡å†™ equal() è¦ä½¿å¾—å…¶ä¾ç„¶æ»¡è¶³ï¼š</p>
<ul>
<li>è‡ªåæ€§</li>
<li>å¯¹ç§°æ€§</li>
<li>ä¼ é€’æ€§</li>
<li>ä¸€è‡´æ€§</li>
</ul>
<h2 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h2><p>put()ã€get()ï¼šæ ¹æ®æ•°æ®ç»“æ„ç‰¹ç‚¹å¯çŸ¥ï¼Œå…ˆåˆ©ç”¨ hashCode å®šä½åˆ°å…·ä½“çš„é“¾è¡¨ï¼Œå†åœ¨é“¾è¡¨ä¸­éå†æ˜¯å¦å·²å­˜åœ¨ï¼Œç„¶åæ“ä½œã€‚</p>
<h2 id="resize-æ­»å¾ªç¯"><a href="#resize-æ­»å¾ªç¯" class="headerlink" title="resize æ­»å¾ªç¯"></a>resize æ­»å¾ªç¯</h2><p>å½“ HashMap çš„ size è¶…è¿‡ Capacity * loadFactor æ—¶ï¼Œå³éœ€è¦é‡å“ˆå¸Œæ‰©å®¹æ—¶ï¼Œå°†åŸæ¥çš„æ•°æ®é‡æ–°è®¡ç®—å“ˆå¸Œå€¼å¹¶æ’å…¥åˆ°æ–°çš„æ•°ç»„ä¸­çš„è¿‡ç¨‹ï¼Œæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œåœ¨å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œè¯¥æ“ä½œçš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å‡ºç°æ­»å¾ªç¯ï¼Œå³åœ¨é‡æ–°é“¾æ¥æ—¶å‡ºç°ç¯ï¼Œå¯¼è‡´å¤±è´¥ã€‚</p>
<h2 id="fast-fail"><a href="#fast-fail" class="headerlink" title="fast-fail"></a>fast-fail</h2><p>åœ¨ä½¿ç”¨è¿­ä»£å™¨çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœ HashMap è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆå°†æŠ›å‡º ConcurrentModificationExceptionï¼Œå³ Fast-fail ç­–ç•¥ï¼šåœ¨å¹¶å‘é›†åˆè¿›è¡Œè¿­ä»£æ“ä½œæ—¶ï¼Œè‹¥æœ‰å…¶ä»–çº¿ç¨‹å¯¹å…¶è¿›è¡Œç»“æ„æ€§çš„ä¿®æ”¹ï¼Œè¿™æ—¶è¿­ä»£å™¨ä¼šç«‹é©¬æ„ŸçŸ¥åˆ°ï¼Œå¹¶ç«‹å³æŠ›å‡º ConcurrentModificationException å¼‚å¸¸ï¼Œè€Œä¸æ˜¯ç­‰åˆ°è¿­ä»£å®Œæˆä¹‹åæ‰å‘Šè¯‰ä½ ï¼ˆæ­¤æ—¶æ—©å·²ç»å‡ºé”™äº†ï¼‰ã€‚</p>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><h3 id="å®¹é‡ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯-2-çš„å¹‚ï¼Ÿ"><a href="#å®¹é‡ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯-2-çš„å¹‚ï¼Ÿ" class="headerlink" title="å®¹é‡ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ 2 çš„å¹‚ï¼Ÿ"></a>å®¹é‡ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ 2 çš„å¹‚ï¼Ÿ</h3><p>HashMap ä¸­çš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„ + å•é“¾è¡¨çš„ç»„åˆã€‚æˆ‘ä»¬å¸Œæœ›å…ƒç´ å­˜æ”¾çš„æ›´å‡åŒ€ï¼Œç†æƒ³æƒ…å†µæ˜¯ï¼ŒEntry æ•°ç»„ä¸­æ¯ä¸ªä½ç½®éƒ½åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œè¿™æ ·ï¼ŒæŸ¥è¯¢çš„æ—¶å€™æ•ˆç‡æœ€é«˜ï¼Œä¸éœ€è¦éå†å•é“¾è¡¨ï¼Œä¹Ÿä¸éœ€è¦é€šè¿‡ equals() å»æ¯”è¾ƒ Kï¼Œè€Œä¸”ç©ºé—´åˆ©ç”¨ç‡æœ€å¤§ï¼Œæ—¶é—´å¤æ‚åº¦æœ€ä¼˜ã€‚<br>è€Œä½¿å¾—è®¡ç®—åˆ†å¸ƒå¾—æ›´å‡åŒ€ï¼Œå°±æ˜¯ä½¿ç”¨ % è¿ç®—ï¼Œå³å–æ¨¡ï¼š<br>å“ˆå¸Œå€¼ % å®¹é‡ &#x3D; bucketIndex<br>å½“å®¹é‡ä¸º 2 çš„å¹‚æ—¶ï¼Œå¯ä»¥ï¼ˆä¹Ÿæ˜¯æºç æ–¹æ³•ï¼‰å†™æˆï¼š<br>h &amp; (length - 1) ï¼Œ<br>è¿™ä¸å‰å¼ç­‰ä»·ä½†ä¸ç­‰æ•ˆï¼šåè€…ä½è¿ç®—çš„æ•ˆç‡æ›´é«˜ï¼ˆCPU æ•ˆç‡æœ€æ…¢çš„ä¹Ÿå°±æ˜¯é™¤æ³•å’Œå–ä½™äº†ï¼‰ï¼</p>
<h3 id="åŠ è½½å› å­æ€ä¹ˆé€‰æ‹©ï¼Œä¸ºä»€ä¹ˆé»˜è®¤-0-75ï¼Ÿ"><a href="#åŠ è½½å› å­æ€ä¹ˆé€‰æ‹©ï¼Œä¸ºä»€ä¹ˆé»˜è®¤-0-75ï¼Ÿ" class="headerlink" title="åŠ è½½å› å­æ€ä¹ˆé€‰æ‹©ï¼Œä¸ºä»€ä¹ˆé»˜è®¤ 0.75ï¼Ÿ"></a>åŠ è½½å› å­æ€ä¹ˆé€‰æ‹©ï¼Œä¸ºä»€ä¹ˆé»˜è®¤ 0.75ï¼Ÿ</h3><p>è¿™æ˜¯ä¸€ç§æ—¶é—´å’Œç©ºé—´çš„æŠ˜ä¸­é€‰æ‹©ï¼šåŠ è½½å› å­è¿‡é«˜è™½ç„¶å‡å°‘äº†ç©ºé—´å¼€é”€ï¼Œä½†åŒæ—¶ä¹Ÿå¢åŠ äº†æŸ¥è¯¢æˆæœ¬ï¼›åä¹‹äº¦ç„¶ã€‚</p>
<h3 id="å¯ä»¥å­˜å‚¨-null-å—ï¼Ÿ"><a href="#å¯ä»¥å­˜å‚¨-null-å—ï¼Ÿ" class="headerlink" title="å¯ä»¥å­˜å‚¨ null å—ï¼Ÿ"></a>å¯ä»¥å­˜å‚¨ null å—ï¼Ÿ</h3><p>å¯ä»¥ã€‚<br>jdk1.8 å¯¹ key&#x3D;null çš„å¤„ç†æ˜¯ï¼šé¦–å…ˆè¯¥ key çš„ hash() è¿”å›å€¼ä¸º 0ï¼Œæ­¤æ—¶ put() æ–¹æ³•æŒ‰ç…§ï¼ˆhash() &amp; (length-1)ï¼‰ç¡®å®šè¯¥å…ƒç´ æ‰€åœ¨çš„æ¡¶ä½ç½®ï¼Œå¯è§ä¸º 0ã€‚å³ï¼Œkey&#x3D;null æ—¶ï¼Œå…ƒç´ å­˜æ”¾åœ¨æ•°ç»„çš„èµ·å§‹ä½ç½®ï¼ˆå³ç¬¬ä¸€ä¸ªæ¡¶ä¸­ï¼‰ã€‚</p>
<p><a target="_blank" rel="noopener" href="http://capps.cn/EbQRVj" title="ç†è§£ HashMap">å‚è€ƒåšå®¢</a></p>
<h1 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h1><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span>
    <span class="token keyword">extends</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span>
    <span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>å…¶å†…éƒ¨çš„ Entry æ‰©å±•äº† HashMap çš„ Node å¹¶æ·»åŠ äº†ä¸¤ä¸ªæŒ‡é’ˆï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">HashMap<span class="token punctuation">.</span>Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> before<span class="token punctuation">,</span> after<span class="token punctuation">;</span>
    <span class="token class-name">Entry</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<img src="/2018/06/03/java/Map/06/03/java/Map/LinkedHashMap%E7%A4%BA%E6%84%8F%E5%9B%BE.png" class title="LinkedHashMapç¤ºæ„å›¾" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2018/06/03/java/Map/06/03/java/Map/LinkedHashMap%E7%A4%BA%E6%84%8F%E5%9B%BE.png" class="lozad post-image">
<p>å°†æ‰€æœ‰èŠ‚ç‚¹é“¾å…¥ä¸€ä¸ªåŒå‘é“¾è¡¨çš„ HashMapã€‚ç»§æ‰¿è‡ª HashMapï¼Œæ‰€ä»¥æ‹¥æœ‰ HashMap çš„æ‰€æœ‰ç‰¹æ€§ã€‚æ¯”å¦‚ï¼ŒLinkedHashMap çš„å…ƒç´ å­˜å–è¿‡ç¨‹åŸºæœ¬ä¸ HashMap åŸºæœ¬ç±»ä¼¼ï¼Œåªæ˜¯åœ¨ç»†èŠ‚å®ç°ä¸Šç¨æœ‰ä¸åŒã€‚è¿™æ˜¯ç”± LinkedHashMap æœ¬èº«çš„ç‰¹æ€§æ‰€å†³å®šçš„ï¼Œå› ä¸ºå®ƒé¢å¤–ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ç”¨äº <strong>ä¿æŒè¿­ä»£é¡ºåº</strong>ï¼Œå¹¶é‡å†™äº†HashMap çš„è¿­ä»£å™¨ï¼Œä½¿ç”¨å…¶ç»´æŠ¤çš„åŒå‘é“¾è¡¨è¿›è¡Œè¿­ä»£è¾“å‡ºï¼Œå¯ä»¥ä»¥æ’å…¥é¡ºåºéå†å…ƒç´ â€”â€”è¿™æ˜¯å’Œæ— åºçš„ HashMap æœ€å¤§çš„åŒºåˆ«ã€‚</p>
<h3 id="å­˜å–"><a href="#å­˜å–" class="headerlink" title="å­˜å–"></a>å­˜å–</h3><p>LinkedHashMap çš„å­˜å–è¿‡ç¨‹ä¸ HashMap åŸºæœ¬ç±»ä¼¼ï¼Œåªæ˜¯åœ¨ç»†èŠ‚å®ç°ä¸Šç¨æœ‰ä¸åŒï¼Œè¿™æ˜¯ç”± LinkedHashMap æœ¬èº«çš„ç‰¹æ€§æ‰€å†³å®šçš„ï¼Œå› ä¸ºå®ƒè¦é¢å¤–ç»´æŠ¤ä¸€ä¸ªåŒå‘é“¾è¡¨ç”¨äºä¿æŒè¿­ä»£é¡ºåºã€‚put æ“ä½œä¸Šï¼Œè™½ç„¶ LinkedHashMap å®Œå…¨ç»§æ‰¿äº† HashMap çš„ put æ“ä½œï¼Œä½†æ˜¯åœ¨ç»†èŠ‚ä¸Šè¿˜æ˜¯åšäº†ä¸€å®šçš„è°ƒæ•´ï¼Œæ¯”å¦‚ï¼Œåœ¨ LinkedHashMap ä¸­å‘å“ˆå¸Œè¡¨ä¸­æ’å…¥æ–° Entry çš„åŒæ—¶ï¼Œè¿˜ä¼šé€šè¿‡ Entry çš„ addBefore æ–¹æ³•å°†å…¶é“¾å…¥åˆ°åŒå‘é“¾è¡¨ä¸­ã€‚åœ¨æ‰©å®¹æ“ä½œä¸Šï¼Œè™½ç„¶ LinkedHashMap å®Œå…¨ç»§æ‰¿äº† HashMapçš„resize æ“ä½œï¼Œä½†æ˜¯é‰´äºæ€§èƒ½å’Œ LinkedHashMap è‡ªèº«ç‰¹ç‚¹çš„è€ƒé‡ï¼ŒLinkedHashMap å¯¹å…¶ä¸­çš„é‡å“ˆå¸Œè¿‡ç¨‹(transferæ–¹æ³•)è¿›è¡Œäº†é‡å†™ã€‚get æ“ä½œä¸Šï¼ŒLinkedHashMap é‡å†™äº† HashMap çš„ get æ–¹æ³•ï¼Œé€šè¿‡ HashMap çš„ getEntry æ–¹æ³•è·å– Entry å¯¹è±¡ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥è·å–æŒ‡å®šé”®å¯¹åº”çš„å€¼ã€‚</p>
<h3 id="LinkedHashMap-ä¸-LRU"><a href="#LinkedHashMap-ä¸-LRU" class="headerlink" title="LinkedHashMap ä¸ LRU"></a>LinkedHashMap ä¸ LRU</h3><p>å½“ä½¿ç”¨ LinkedHashMap å®ç° LRU ç®—æ³•æ—¶ï¼Œéœ€è¦è°ƒç”¨å…¶ç¬¬ 5 ä¸ªæ„é€ æ–¹æ³•ï¼Œå°† accessOrder ç½®ä¸º trueï¼Œå³ï¼Œå…ƒç´ æŒ‰è®¿é—®é¡ºåºæ’åºï¼ˆé»˜è®¤ false æŒ‰æ’å…¥é¡ºåºæ’åºï¼‰ã€‚LinkedHashMap é‡å†™äº† HashMap çš„ recordAccess æ–¹æ³•ï¼ˆHashMapä¸­è¯¥æ–¹æ³•ä¸ºç©ºï¼‰ï¼Œå½“è°ƒç”¨çˆ¶ç±»çš„put æ–¹æ³•æ—¶ï¼Œåœ¨å‘ç° key å·²ç»å­˜åœ¨æ—¶ï¼Œä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼›å½“è°ƒç”¨è‡ªå·±çš„ get æ–¹æ³•æ—¶ï¼Œä¹Ÿä¼šè°ƒç”¨åˆ°è¯¥æ–¹æ³•ã€‚è¯¥æ–¹æ³•æä¾›äº† LRU ç®—æ³•çš„å®ç°ï¼Œå®ƒå°†æœ€è¿‘ä½¿ç”¨çš„ Entry æ”¾åˆ°åŒå‘å¾ªç¯é“¾è¡¨çš„å°¾éƒ¨ã€‚å³å½“ accessOrder ä¸º true æ—¶ï¼Œget æ–¹æ³•å’Œ put æ–¹æ³•éƒ½ä¼šè°ƒç”¨ recordAccess æ–¹æ³•ä½¿å¾—æœ€è¿‘ä½¿ç”¨çš„ Entry ç§»åˆ°åŒå‘é“¾è¡¨çš„æœ«å°¾ï¼›å½“ accessOrder ä¸ºé»˜è®¤å€¼ false æ—¶ï¼Œä»æºç ä¸­å¯ä»¥çœ‹å‡º recordAccess æ–¹æ³•ä»€ä¹ˆä¹Ÿä¸ä¼šåšã€‚<br>å¯ä»¥ç”¨ä»¥ä¸Šæ–¹æ³•å¿«é€Ÿæ„å»º LRU ç®—æ³•å®ç°ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/justloveyou_/article/details/71713781" title="ç†è§£ LinkedHashMap">å‚è€ƒåšå®¢</a></p>
<h2 id="TreeMap-çº¢é»‘æ ‘ç»“æ„çš„-Map"><a href="#TreeMap-çº¢é»‘æ ‘ç»“æ„çš„-Map" class="headerlink" title="TreeMap çº¢é»‘æ ‘ç»“æ„çš„ Map"></a>TreeMap çº¢é»‘æ ‘ç»“æ„çš„ Map</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span>
    <span class="token keyword">extends</span> <span class="token class-name">AbstractMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span>
    <span class="token keyword">implements</span> <span class="token class-name">NavigableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>ç»§æ‰¿äº† AbstractMapï¼Œè€Œ AbstractMap å®ç°äº† Map æ¥å£ï¼Œå¹¶å®ç°äº† Map æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œå‡å°‘äº†å…¶å­ç±»ç»§æ‰¿çš„å¤æ‚åº¦ï¼›</li>
<li>å®ç°äº† Map æ¥å£ï¼Œæˆä¸º Map æ¡†æ¶ä¸­çš„ä¸€å‘˜ï¼Œå¯ä»¥åŒ…å« key-value å½¢å¼çš„å…ƒç´ ï¼›</li>
<li>å®ç°äº† NavigableMap æ¥å£ï¼Œæ‹¥æœ‰äº†æ›´å¼ºçš„å…ƒç´ æœç´¢èƒ½åŠ›ï¼›</li>
<li>å®ç°äº† Cloneable æ¥å£ï¼Œå®ç°äº† clone() æ–¹æ³•ï¼Œå¯ä»¥è¢«å…‹éš†ï¼›</li>
<li>å®ç°äº† Serializable æ¥å£ï¼Œæ”¯æŒåºåˆ—åŒ–æ“ä½œï¼Œå¯é€šè¿‡ Hessian åè®®è¿›è¡Œä¼ è¾“ï¼›</li>
</ul>
<h3 id="NavigableMap-amp-SortedMap-æ¥å£"><a href="#NavigableMap-amp-SortedMap-æ¥å£" class="headerlink" title="NavigableMap &amp; SortedMap æ¥å£"></a>NavigableMap &amp; SortedMap æ¥å£</h3><img src="/2018/06/03/java/Map/06/03/java/Map/NavigableMap%E6%8E%A5%E5%8F%A3.png" class title="NavigableMapæ¥å£" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2018/06/03/java/Map/06/03/java/Map/NavigableMap%E6%8E%A5%E5%8F%A3.png" class="lozad post-image">
<p>å…¶ä¸­ï¼ŒSortedMap æ¥å£å®šä¹‰äº† Comparator&lt;? super K&gt;ï¼Œå³æ¯”è¾ƒå™¨ï¼Œè¿™å†³å®šäº† TreeMap ä½“ç³»çš„èµ°å‘ï¼Œä¹Ÿæ˜¯å…¶æœ‰åˆ«äº HashMap ä½“ç³»æœ€å…³é”®çš„ä¸€ä¸ªæ¥å£å®ç°ï¼šç”¨æ¯”è¾ƒå™¨å¯¹æ’å…¥å…ƒç´ è¿›è¡Œæ’åºï¼Œä»è€Œå†³å®šå…¶æ’å…¥ä½ç½®ã€‚<br>NavigableMap æ¥å£è¿›ä¸€æ­¥æ‰©å±•äº† SortedMap æ¥å£ï¼šä¸»è¦ç”¨äº <strong>å¢å¼ºå¯¹å…ƒç´ çš„æœç´¢è·å–æ“ä½œï¼Œå¦‚è¿”å›é›†åˆä¸­æŸä¸€åŒºé—´çš„å…ƒç´ ã€è¿”å›å°äº&#x2F;å¤§äºæŸä¸€å€¼çš„å…ƒç´ ç­‰</strong>ã€‚</p>
<h4 id="æ’åºæ–¹å¼"><a href="#æ’åºæ–¹å¼" class="headerlink" title="æ’åºæ–¹å¼"></a>æ’åºæ–¹å¼</h4><ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨å…ƒç´ è‡ªç„¶æ’åºï¼Œéœ€è¦å…ƒç´ å®ç° Comparable æ¥å£ï¼›</li>
<li>ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå™¨æ’åºï¼Œéœ€è¦åœ¨åˆ›å»º TreeMap å¯¹è±¡æ—¶ï¼Œå°†è‡ªå®šä¹‰æ¯”è¾ƒå™¨å¯¹è±¡ä¼ å…¥åˆ°å…¶æ„é€ æ–¹æ³•ä¸­ã€‚æ­¤æ—¶æ— éœ€å†å®ç° Comparable æ¥å£ã€‚</li>
</ul>
<h3 id="RB-tree"><a href="#RB-tree" class="headerlink" title="RB-tree"></a>RB-tree</h3><p>TreeMap åº•å±‚ä½¿ç”¨çº¢é»‘æ ‘å®ç°ï¼Œå…·æœ‰ç†è®º O(logn) çš„æ“ä½œæ—¶é—´å¤æ‚åº¦ï¼Œå¢åˆ æ“ä½œé€šè¿‡æ—‹è½¬æ“ä½œä¿æŒæ ‘çš„å¹³è¡¡æ€§ã€‚<br><a target="_blank" rel="noopener" href="https://algs4.cs.princeton.edu/33balanced/" title="Algs4 ä¸­å…³äºçº¢é»‘æ ‘çš„éƒ¨åˆ†">Algs4 ä¸­å…³äºçº¢é»‘æ ‘çš„éƒ¨åˆ†</a><br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/2dcff3634326" title="å‚è€ƒåšå®¢">å‚è€ƒåšå®¢</a></p>
<h3 id="ç‰¹ç‚¹-1"><a href="#ç‰¹ç‚¹-1" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ul>
<li>éçº¿ç¨‹å®‰å…¨</li>
<li>ä¸å…è®¸å‡ºç°é‡å¤é”®ï¼›å¯ä»¥æ’å…¥ null é”®ï¼ˆæœ€å¤šä¸€ä¸ªï¼‰ï¼Œnull å€¼ï¼ˆä¸é™åˆ¶ï¼‰ï¼›</li>
<li>å¯ä»¥å¯¹å…ƒç´ è¿›è¡Œæ’åºï¼›</li>
<li>æ— åºé›†åˆï¼šæ’å…¥å’Œéå†é¡ºåºä¸ä¸€è‡´ã€‚</li>
</ul>
<h3 id="ä¸»è¦æ–¹æ³•"><a href="#ä¸»è¦æ–¹æ³•" class="headerlink" title="ä¸»è¦æ–¹æ³•"></a>ä¸»è¦æ–¹æ³•</h3><ul>
<li>gutï¼šåˆ©ç”¨å¹³è¡¡æ ‘çš„å¿«é€ŸæŸ¥æ‰¾ï¼Œå¯ä»¥åœ¨ O(logn) æ—¶é—´å†…å®šä½è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼›</li>
<li>putï¼šå¦‚æœå­˜åœ¨ï¼Œold value è¢«æ›¿æ¢ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ–°å¢èŠ‚ç‚¹ï¼Œç„¶åå¯¹çº¢é»‘æ ‘é€šè¿‡æ—‹è½¬ä½œå¹³è¡¡æ“ä½œï¼›</li>
<li>éå†ï¼šç±»ä¼¼äºä¸­åºéå†çš„æ–¹å¼è¿­ä»£è¾“å‡ºæ‰€æœ‰å…ƒç´ ï¼›</li>
</ul>
<h3 id><a href="#" class="headerlink" title="###"></a>###</h3><p>ä»¥ä¸Š 3 ä¸ªæ˜¯ Map çš„åŸºç¡€å®ç°ï¼Œå°¤å…¶æ˜¯ HashMapï¼Œæ˜¯ java ä¸­æœ€ä¸ºå¸¸ç”¨çš„æ•°æ®ç»“æ„ã€‚å®ƒä»¬éƒ½æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œä½†å¯ä»¥é€šè¿‡ Collections ç±»çš„ synchronized ç›¸å…³æ–¹æ³•å°†å®ƒä»¬è½¬æ¢ä¸ºåŒæ­¥ç±»ã€‚æ­¤å¤–ï¼Œjava å®ç°äº†ä¸ä¹‹å¯¹åº”çš„çº¿ç¨‹å®‰å…¨çš„å®¹å™¨ç±»ã€‚</p>
<h3 id="-1"><a href="#-1" class="headerlink" title="###"></a>###</h3>
  </div>
  <div>
    
      <div 
        class="post-note note-warning copyright" 
        style="margin-top: 42px">
        <p>
          <span style="font-weight: bold;">ä½œè€…ï¼š</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="/about">
            Neil
          </a>
        </p>
        <p>
          <span style="font-weight: bold;">æ–‡ç« é“¾æ¥ï¼š</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="https://lazy-snail.github.io/2018/06/03/java/Map/">
            https://lazy-snail.github.io/2018/06/03/java/Map/
          </a>
        </p>
        <p><span style="font-weight: bold;">ç‰ˆæƒå£°æ˜ï¼š</span>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„</p>
      </div>
    
  </div>
</article>
<div class="nav">
  
    <div class="nav-item-prev">
      <a 
        href="/2018/06/03/java/Map-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/" 
        class="nav-link">
        <i class="iconfont icon-left nav-prev-icon"></i>
        <div>
          <div class="nav-label">Prev</div>
          
            <div class="nav-title">Map-çº¿ç¨‹å®‰å…¨ </div>
          
        </div>
      </a>
    </div>
  
  
    <div class="nav-item-next">
      <a 
        href="/2018/06/03/java/Exception/" 
        class="nav-link">
        <div>
          <div class="nav-label">Next</div>
          
            <div class="nav-title">Exception </div>
          
        </div>
        <i class="iconfont icon-right nav-next-icon"></i>
      </a>
    </div>
  
</div>

<div 
  class="card card-content toc-card" 
  id="mobiletoc">
  <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Map-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.</span> <span class="toc-text">Map æ¥å£</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HashMap"><span class="toc-number">2.</span> <span class="toc-text">HashMap</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%91%E5%8C%96-x2F-%E9%80%80%E5%8C%96"><span class="toc-number">2.1.</span> <span class="toc-text">æ ‘åŒ–&#x2F;é€€åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F-x2F-hash-%E5%80%BC%E8%AE%A1%E7%AE%97"><span class="toc-number">2.2.</span> <span class="toc-text">å¯»å€æ–¹å¼&#x2F;hash å€¼è®¡ç®—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">2.3.</span> <span class="toc-text">ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hashCode-%E6%96%B9%E6%B3%95%E5%92%8C%E5%8A%A0%E8%BD%BD%E5%9B%A0%E5%AD%90"><span class="toc-number">2.4.</span> <span class="toc-text">hashCode æ–¹æ³•å’ŒåŠ è½½å› å­</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%86%99-hashCode-%E5%92%8C-equal"><span class="toc-number">2.5.</span> <span class="toc-text">é‡å†™ hashCode() å’Œ equal()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">2.6.</span> <span class="toc-text">å¸¸ç”¨æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#resize-%E6%AD%BB%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.7.</span> <span class="toc-text">resize æ­»å¾ªç¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fast-fail"><span class="toc-number">2.8.</span> <span class="toc-text">fast-fail</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">2.9.</span> <span class="toc-text">é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E9%87%8F%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%85%E9%A1%BB%E6%98%AF-2-%E7%9A%84%E5%B9%82%EF%BC%9F"><span class="toc-number">2.9.1.</span> <span class="toc-text">å®¹é‡ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ 2 çš„å¹‚ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E5%9B%A0%E5%AD%90%E6%80%8E%E4%B9%88%E9%80%89%E6%8B%A9%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E9%BB%98%E8%AE%A4-0-75%EF%BC%9F"><span class="toc-number">2.9.2.</span> <span class="toc-text">åŠ è½½å› å­æ€ä¹ˆé€‰æ‹©ï¼Œä¸ºä»€ä¹ˆé»˜è®¤ 0.75ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E5%AD%98%E5%82%A8-null-%E5%90%97%EF%BC%9F"><span class="toc-number">2.9.3.</span> <span class="toc-text">å¯ä»¥å­˜å‚¨ null å—ï¼Ÿ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#LinkedHashMap"><span class="toc-number">3.</span> <span class="toc-text">LinkedHashMap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.0.1.</span> <span class="toc-text">å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%8F%96"><span class="toc-number">3.0.2.</span> <span class="toc-text">å­˜å–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LinkedHashMap-%E4%B8%8E-LRU"><span class="toc-number">3.0.3.</span> <span class="toc-text">LinkedHashMap ä¸ LRU</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TreeMap-%E7%BA%A2%E9%BB%91%E6%A0%91%E7%BB%93%E6%9E%84%E7%9A%84-Map"><span class="toc-number">3.1.</span> <span class="toc-text">TreeMap çº¢é»‘æ ‘ç»“æ„çš„ Map</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NavigableMap-amp-SortedMap-%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.1.1.</span> <span class="toc-text">NavigableMap &amp; SortedMap æ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">æ’åºæ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RB-tree"><span class="toc-number">3.1.2.</span> <span class="toc-text">RB-tree</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9-1"><span class="toc-number">3.1.3.</span> <span class="toc-text">ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E6%96%B9%E6%B3%95"><span class="toc-number">3.1.4.</span> <span class="toc-text">ä¸»è¦æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.5.</span> <span class="toc-text">###</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-1"><span class="toc-number">3.1.6.</span> <span class="toc-text">###</span></a></li></ol></li></ol></li></ol>
</div></main>
            <aside class="left-column">
              
              <div class="card card-author">
                
  <img 
    src="/img/little-prince.png" 
    class="author-img"
    width="88"
    height="88"
    alt="author avatar">

<p class="author-name">Neil</p>
<p class="author-description">there's a will there's a way</p>
<div class="author-message">
  <a 
    class="author-posts-count" 
    href="/archives">
    <span>171</span>
    <span>Posts</span>
  </a>
  <a 
    class="author-categories-count" 
    href="/categories">
    <span>13</span>
    <span>Categories</span>
  </a>
  <a 
    class="author-tags-count" 
    href="/tags">
    <span>31</span>
    <span>Tags</span>
  </a>
</div>

              </div>
               <div class="sticky-tablet">
  
  
    <article class="display-when-two-columns spacer">
      <div class="card card-content toc-card">
        <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Map-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.</span> <span class="toc-text">Map æ¥å£</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HashMap"><span class="toc-number">2.</span> <span class="toc-text">HashMap</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%91%E5%8C%96-x2F-%E9%80%80%E5%8C%96"><span class="toc-number">2.1.</span> <span class="toc-text">æ ‘åŒ–&#x2F;é€€åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F-x2F-hash-%E5%80%BC%E8%AE%A1%E7%AE%97"><span class="toc-number">2.2.</span> <span class="toc-text">å¯»å€æ–¹å¼&#x2F;hash å€¼è®¡ç®—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">2.3.</span> <span class="toc-text">ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hashCode-%E6%96%B9%E6%B3%95%E5%92%8C%E5%8A%A0%E8%BD%BD%E5%9B%A0%E5%AD%90"><span class="toc-number">2.4.</span> <span class="toc-text">hashCode æ–¹æ³•å’ŒåŠ è½½å› å­</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%86%99-hashCode-%E5%92%8C-equal"><span class="toc-number">2.5.</span> <span class="toc-text">é‡å†™ hashCode() å’Œ equal()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">2.6.</span> <span class="toc-text">å¸¸ç”¨æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#resize-%E6%AD%BB%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.7.</span> <span class="toc-text">resize æ­»å¾ªç¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fast-fail"><span class="toc-number">2.8.</span> <span class="toc-text">fast-fail</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">2.9.</span> <span class="toc-text">é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E9%87%8F%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%85%E9%A1%BB%E6%98%AF-2-%E7%9A%84%E5%B9%82%EF%BC%9F"><span class="toc-number">2.9.1.</span> <span class="toc-text">å®¹é‡ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ 2 çš„å¹‚ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E5%9B%A0%E5%AD%90%E6%80%8E%E4%B9%88%E9%80%89%E6%8B%A9%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E9%BB%98%E8%AE%A4-0-75%EF%BC%9F"><span class="toc-number">2.9.2.</span> <span class="toc-text">åŠ è½½å› å­æ€ä¹ˆé€‰æ‹©ï¼Œä¸ºä»€ä¹ˆé»˜è®¤ 0.75ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E5%AD%98%E5%82%A8-null-%E5%90%97%EF%BC%9F"><span class="toc-number">2.9.3.</span> <span class="toc-text">å¯ä»¥å­˜å‚¨ null å—ï¼Ÿ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#LinkedHashMap"><span class="toc-number">3.</span> <span class="toc-text">LinkedHashMap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.0.1.</span> <span class="toc-text">å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%8F%96"><span class="toc-number">3.0.2.</span> <span class="toc-text">å­˜å–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LinkedHashMap-%E4%B8%8E-LRU"><span class="toc-number">3.0.3.</span> <span class="toc-text">LinkedHashMap ä¸ LRU</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TreeMap-%E7%BA%A2%E9%BB%91%E6%A0%91%E7%BB%93%E6%9E%84%E7%9A%84-Map"><span class="toc-number">3.1.</span> <span class="toc-text">TreeMap çº¢é»‘æ ‘ç»“æ„çš„ Map</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NavigableMap-amp-SortedMap-%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.1.1.</span> <span class="toc-text">NavigableMap &amp; SortedMap æ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">æ’åºæ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RB-tree"><span class="toc-number">3.1.2.</span> <span class="toc-text">RB-tree</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9-1"><span class="toc-number">3.1.3.</span> <span class="toc-text">ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E6%96%B9%E6%B3%95"><span class="toc-number">3.1.4.</span> <span class="toc-text">ä¸»è¦æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.5.</span> <span class="toc-text">###</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-1"><span class="toc-number">3.1.6.</span> <span class="toc-text">###</span></a></li></ol></li></ol></li></ol>
      </div>
    </article>
  
  
  <article class="card card-content categories-widget">
    <div class="categories-card">
  <div class="categories-header">
    <i 
      class="iconfont icon-fenlei" 
      style="padding-right: 2px;">
    </i>Categories
  </div>
  <div class="categories-list">
    
      <a href="/categories/Algs/">
        <div class="categories-list-item">
          Algs
          <span class="categories-list-item-badge">10</span>
        </div>
      </a>
    
      <a href="/categories/algs/">
        <div class="categories-list-item">
          algs
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/CS/">
        <div class="categories-list-item">
          CS
          <span class="categories-list-item-badge">9</span>
        </div>
      </a>
    
      <a href="/categories/CN/">
        <div class="categories-list-item">
          CN
          <span class="categories-list-item-badge">10</span>
        </div>
      </a>
    
      <a href="/categories/java/">
        <div class="categories-list-item">
          java
          <span class="categories-list-item-badge">62</span>
        </div>
      </a>
    
      <a href="/categories/backend/">
        <div class="categories-list-item">
          backend
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/middleware/">
        <div class="categories-list-item">
          middleware
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/tools/">
        <div class="categories-list-item">
          tools
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/DB/">
        <div class="categories-list-item">
          DB
          <span class="categories-list-item-badge">14</span>
        </div>
      </a>
    
      <a href="/categories/OS/">
        <div class="categories-list-item">
          OS
          <span class="categories-list-item-badge">14</span>
        </div>
      </a>
    
      <a href="/categories/cpp/">
        <div class="categories-list-item">
          cpp
          <span class="categories-list-item-badge">20</span>
        </div>
      </a>
    
      <a href="/categories/Daily/">
        <div class="categories-list-item">
          Daily
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/py/">
        <div class="categories-list-item">
          py
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
  </div>
</div>
  </article>
  
  <article class="card card-content tags-widget">
    <div class="tags-card">
  <div class="tags-header">
    <i 
      class="iconfont icon-biaoqian" 
      style="padding-right: 2px;">
    </i>hot tags
  </div>
  <div class="tags-list">
    
      <a 
        href="/tags/java/" 
        title="java">
        <div class="tags-list-item">java</div>
      </a>
    
      <a 
        href="/tags/cpp/" 
        title="cpp">
        <div class="tags-list-item">cpp</div>
      </a>
    
      <a 
        href="/tags/OS/" 
        title="OS">
        <div class="tags-list-item">OS</div>
      </a>
    
      <a 
        href="/tags/DB/" 
        title="DB">
        <div class="tags-list-item">DB</div>
      </a>
    
      <a 
        href="/tags/%E5%AE%B9%E5%99%A8/" 
        title="å®¹å™¨">
        <div class="tags-list-item">å®¹å™¨</div>
      </a>
    
      <a 
        href="/tags/MySQL/" 
        title="MySQL">
        <div class="tags-list-item">MySQL</div>
      </a>
    
      <a 
        href="/tags/%E5%B9%B6%E5%8F%91/" 
        title="å¹¶å‘">
        <div class="tags-list-item">å¹¶å‘</div>
      </a>
    
      <a 
        href="/tags/JVM/" 
        title="JVM">
        <div class="tags-list-item">JVM</div>
      </a>
    
      <a 
        href="/tags/CN/" 
        title="CN">
        <div class="tags-list-item">CN</div>
      </a>
    
      <a 
        href="/tags/Algs/" 
        title="Algs">
        <div class="tags-list-item">Algs</div>
      </a>
    
      <a 
        href="/tags/CS/" 
        title="CS">
        <div class="tags-list-item">CS</div>
      </a>
    
      <a 
        href="/tags/Q-A/" 
        title="Q&A">
        <div class="tags-list-item">Q&amp;A</div>
      </a>
    
      <a 
        href="/tags/%E6%96%B0%E7%89%B9%E6%80%A7/" 
        title="æ–°ç‰¹æ€§">
        <div class="tags-list-item">æ–°ç‰¹æ€§</div>
      </a>
    
      <a 
        href="/tags/%E7%BA%BF%E7%A8%8B/" 
        title="çº¿ç¨‹">
        <div class="tags-list-item">çº¿ç¨‹</div>
      </a>
    
      <a 
        href="/tags/Sort/" 
        title="Sort">
        <div class="tags-list-item">Sort</div>
      </a>
    
      <a 
        href="/tags/Linux/" 
        title="Linux">
        <div class="tags-list-item">Linux</div>
      </a>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
            <aside class="right-column">
              <div class="sticky-widescreen">
  
  
    <article class="card card-content toc-card">
      <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Map-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.</span> <span class="toc-text">Map æ¥å£</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HashMap"><span class="toc-number">2.</span> <span class="toc-text">HashMap</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%91%E5%8C%96-x2F-%E9%80%80%E5%8C%96"><span class="toc-number">2.1.</span> <span class="toc-text">æ ‘åŒ–&#x2F;é€€åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F-x2F-hash-%E5%80%BC%E8%AE%A1%E7%AE%97"><span class="toc-number">2.2.</span> <span class="toc-text">å¯»å€æ–¹å¼&#x2F;hash å€¼è®¡ç®—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">2.3.</span> <span class="toc-text">ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hashCode-%E6%96%B9%E6%B3%95%E5%92%8C%E5%8A%A0%E8%BD%BD%E5%9B%A0%E5%AD%90"><span class="toc-number">2.4.</span> <span class="toc-text">hashCode æ–¹æ³•å’ŒåŠ è½½å› å­</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%86%99-hashCode-%E5%92%8C-equal"><span class="toc-number">2.5.</span> <span class="toc-text">é‡å†™ hashCode() å’Œ equal()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">2.6.</span> <span class="toc-text">å¸¸ç”¨æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#resize-%E6%AD%BB%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.7.</span> <span class="toc-text">resize æ­»å¾ªç¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fast-fail"><span class="toc-number">2.8.</span> <span class="toc-text">fast-fail</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">2.9.</span> <span class="toc-text">é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E9%87%8F%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%85%E9%A1%BB%E6%98%AF-2-%E7%9A%84%E5%B9%82%EF%BC%9F"><span class="toc-number">2.9.1.</span> <span class="toc-text">å®¹é‡ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ 2 çš„å¹‚ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E5%9B%A0%E5%AD%90%E6%80%8E%E4%B9%88%E9%80%89%E6%8B%A9%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E9%BB%98%E8%AE%A4-0-75%EF%BC%9F"><span class="toc-number">2.9.2.</span> <span class="toc-text">åŠ è½½å› å­æ€ä¹ˆé€‰æ‹©ï¼Œä¸ºä»€ä¹ˆé»˜è®¤ 0.75ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E5%AD%98%E5%82%A8-null-%E5%90%97%EF%BC%9F"><span class="toc-number">2.9.3.</span> <span class="toc-text">å¯ä»¥å­˜å‚¨ null å—ï¼Ÿ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#LinkedHashMap"><span class="toc-number">3.</span> <span class="toc-text">LinkedHashMap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.0.1.</span> <span class="toc-text">å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%8F%96"><span class="toc-number">3.0.2.</span> <span class="toc-text">å­˜å–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LinkedHashMap-%E4%B8%8E-LRU"><span class="toc-number">3.0.3.</span> <span class="toc-text">LinkedHashMap ä¸ LRU</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TreeMap-%E7%BA%A2%E9%BB%91%E6%A0%91%E7%BB%93%E6%9E%84%E7%9A%84-Map"><span class="toc-number">3.1.</span> <span class="toc-text">TreeMap çº¢é»‘æ ‘ç»“æ„çš„ Map</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NavigableMap-amp-SortedMap-%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.1.1.</span> <span class="toc-text">NavigableMap &amp; SortedMap æ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">æ’åºæ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RB-tree"><span class="toc-number">3.1.2.</span> <span class="toc-text">RB-tree</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9-1"><span class="toc-number">3.1.3.</span> <span class="toc-text">ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E6%96%B9%E6%B3%95"><span class="toc-number">3.1.4.</span> <span class="toc-text">ä¸»è¦æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.5.</span> <span class="toc-text">###</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-1"><span class="toc-number">3.1.6.</span> <span class="toc-text">###</span></a></li></ol></li></ol></li></ol>
    </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header">
    <i 
      class="iconfont icon-wenzhang_huaban" 
      style="padding-right: 2px;">
    </i>Recent Posts
  </div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-28</div>
        <a href="/2022/06/28/java/AOP/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-28</div>
        <a href="/2022/06/28/java/SpringBoot%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-28</div>
        <a href="/2022/06/28/java/%E6%B3%A8%E8%A7%A3-Transactional/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-28</div>
        <a href="/2022/06/28/java/SpringMVC%20%E6%8B%A6%E6%88%AA%E5%99%A8/"><div class="recent-posts-item-content"></div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
          </div>
        </div>
      </div>
    </div>
     
    <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>
          Copyright Â©
          
            2017 -
          
          2022
        </span>
        &nbsp;
        <a 
          href="/" 
          class="footer-link">
          æ‡’èœ—ç‰›
        </a>
      </div>
    </div>

    
      <div class="footer-dsc">
        
          Powered by
          <a 
            href="https://hexo.io/" 
            class="footer-link" 
            target="_blank" 
            rel="nofollow noopener noreferrer">
            &nbsp;Hexo
          </a>
        
        
          <span>&nbsp;|&nbsp;</span>
        
        
          Theme -
          <a 
            href="https://github.com/theme-kaze" 
            class="footer-link" 
            target="_blank"
            rel="nofollow noopener noreferrer">
            &nbsp;Kaze
          </a>
        
      </div>
    
    
    
    
      <div class="footer-dsc">
        
        
        
      </div>
      
    
</footer> 
    
  <a 
    role="button" 
    id="scrollbutton" 
    class="basebutton" 
    aria-label="å›åˆ°é¡¶éƒ¨">
    <i class="iconfont icon-arrowleft button-icon"></i>
  </a>

<a 
  role="button" 
  id="menubutton"
  aria-label="menu button"
  class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a 
  role="button" 
  id="popbutton" 
  class="basebutton" 
  aria-label="æ§åˆ¶ä¸­å¿ƒ">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a 
  role="button" 
  id="darkbutton" 
  class="basebutton darkwidget" 
  aria-label="å¤œè‰²æ¨¡å¼">
  <i class="iconfont icon-weather button-icon"></i>
</a>
<a 
  role="button" 
  id="searchbutton" 
  class="basebutton searchwidget" 
  aria-label="æœç´¢">
  <i class="iconfont icon-search button-icon"></i>
</a> 
     
     
      

  
  
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
      };
    </script>
    
<script src="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js"></script>

  
 
     
     
      <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img')
    var i
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a')
      wrapper.setAttribute('href', img[i].getAttribute('data-src'))
      wrapper.setAttribute('aria-label', 'illustration')
      wrapper.style.cssText =
        'width: 100%; display: flex; justify-content: center;'
      if (img[i].alt) wrapper.dataset.caption = img[i].alt
      wrapper.dataset.nolink = true
      img[i].before(wrapper)
      wrapper.append(img[i])
      var divWrap = document.createElement('div')
      divWrap.classList.add('gallery')
      wrapper.before(divWrap)
      divWrap.append(wrapper)
    }
    baguetteBox.run('.gallery')
  }
</script>
<script>
  loadScript(
    "/js/lib/lightbox/baguetteBox.min.js",
    addImgLayout
  )
</script>
 
     
     
    <script src="/js/main.js"></script> 
    
      <script> 
        loadScript('/js/lib/busuanzi.min.js') 
      </script>
     
    
      <script>
        var addLazyload = function () {
          var observer = lozad('.lozad', {
            load: function (el) {
              el.srcset = el.getAttribute('data-src')
            },
            loaded: function (el) {
              el.classList.add('loaded')
            },
          })
          observer.observe()
        }
      </script>
      <script>
        loadScript('/js/lib/lozad.min.js', addLazyload)
      </script>
     
    
    
      <script>
        setTimeout(() => {localSearch("search.json")}, 0)
      </script>
    
  </body>
</html>
