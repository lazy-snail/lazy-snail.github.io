<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta 
    name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta 
    http-equiv="X-UA-Compatible" 
    content="ie=edge">
  <meta 
    name="theme-color" 
    content="#fff" 
    id="theme-color">
  <meta 
    name="description" 
    content="æ‡’æ‡’æ‡’èœ—ç‰›ğŸŒ">
  <link 
    rel="icon" 
    href="/img/little-prince.png">
  <title>è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</title>
  
    
      <meta 
        property="og:title" 
        content="è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ">
    
    
      <meta 
        property="og:url" 
        content="https://lazy-snail.github.io/2018/04/16/java/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/index.html">
    
    
      <meta 
        property="og:img" 
        content="/img/little-prince.png">
    
    
    
      <meta 
        property="og:type" 
        content="article">
      <meta 
        property="og:article:published_time" 
        content="2018-04-16">
      <meta 
        property="og:article:modified_time" 
        content="2022-06-28">
      <meta 
        property="og:article:author" 
        content="Neil">
      
        
          <meta 
            property="og:article:tag" 
            content="java">
        
          <meta 
            property="og:article:tag" 
            content="JVM">
        
      
    
  
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
    function loadCSS(href, data, attr) {
      var sheet = document.createElement('link');
      sheet.ref = 'stylesheet';
      sheet.href = href;
      sheet.dataset[data] = attr;
      document.head.appendChild(sheet);
    }
    function changeCSS(cssFile, data, attr) {
      var oldlink = document.querySelector(data);
      var newlink = document.createElement("link");
      newlink.setAttribute("rel", "stylesheet");
      newlink.setAttribute("href", cssFile);
      newlink.dataset.prism = attr;
      document.head.replaceChild(newlink, oldlink);
    }
  </script>
  
    
      
      
      
      
        
        
        
        <script>
          function prismThemeChange() {
            if(document.getElementById('theme-color').dataset.mode === 'dark') {
              if(document.querySelector('[data-prism]')) {
                changeCSS('/js/lib/prism/prism-tomorrow.min.css', '[data-prism]', 'prism-tomorrow');
              } else {
                loadCSS('/js/lib/prism/prism-tomorrow.min.css', 'prism', 'prism-tomorrow');
              }
            } else {
              if(document.querySelector('[data-prism]')) {
                changeCSS('/js/lib/prism/prism.min.css', '[data-prism]', 'prism');
              } else {
                loadCSS('/js/lib/prism/prism.min.css', 'prism', 'prism');
              }
            }
          }
          prismThemeChange()
        </script>
      
      
        
        <link rel="stylesheet" href="/js/lib/prism/prism-line-numbers.min.css">
      
    
  
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
  </script>
  
    <script>
      var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
        prismThemeChange();
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
        prismThemeChange();
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
        document.getElementById('theme-color').dataset.mode = getCssMediaQuery();
        prismThemeChange();
      }
    };
    setDarkmode();
    </script>
  
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  
    <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.js" as="script">
    <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.css" as="style" >
  
  
    <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
    
    <link rel="prefetch" href="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js" as="script">
  
  
  
  
  <link rel="stylesheet" href="/css/main.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">
  
    <link rel="stylesheet" href="/js/lib/lightbox/baguetteBox.min.css">
  
<meta name="generator" content="Hexo 6.1.0"></head>

  <body>
    <div class="wrapper">
       
      <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
        <img 
          class="navbar-logo-img"
          width="32"
          height="32"
          src="/img/little-prince.png" 
          alt="blog logo">
      
      <span class="navbar-logo-dsc">æ‡’èœ—ç‰›</span>
    </span>
  </div>
  <div class="navbar-menu">
    
      <a 
        href="/" 
        class="navbar-menu-item">
        
          Home
        
      </a>
    
      <a 
        href="/archives" 
        class="navbar-menu-item">
        
          Archive
        
      </a>
    
      <a 
        href="/tags" 
        class="navbar-menu-item">
        
          Tags
        
      </a>
    
      <a 
        href="/categories" 
        class="navbar-menu-item">
        
          Categories
        
      </a>
    
      <a 
        href="/about" 
        class="navbar-menu-item">
        
          About
        
      </a>
    
    <a 
      class="navbar-menu-item darknavbar" 
      id="dark">
      <i class="iconfont icon-weather"></i>
    </a>
    <a 
      class="navbar-menu-item searchnavbar" 
      id="search">
      <i 
        class="iconfont icon-search" 
        style="font-size: 1.2rem; font-weight: 400;">
      </i>
    </a>
  </div>
</nav> 
      
      <div 
        id="local-search" 
        style="display: none">
        <input
          class="navbar-menu-item"
          id="search-input"
          placeholder="è¯·è¾“å…¥æœç´¢å†…å®¹..." />
        <div id="search-content"></div>
      </div>
      
      <div class="section-wrap">
        <div class="container">
          <div class="columns">
            <main class="main-column">
<article class="card card-content">
  <header>
    <h1 class="post-title">
      è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2018-04-16T15:46:53.000Z">
      <i 
        class="iconfont icon-calendar" 
        style="margin-right: 2px;">
      </i>
      <span>2018-04-16</span>
    </time>
    
      <span class="dot"></span>
      
        <a 
          href="/categories/java/" 
          class="post-meta-link">
          java
        </a>
      
    
    
      <span class="dot"></span>
      <span>2.9k words</span>
    
  </div>
  
    <div 
      class="post-meta post-show-meta" 
      style="margin-top: -10px;">
      <div style="display: flex; align-items: center;">
        <i 
          class="iconfont icon-biaoqian" 
          style="margin-right: 2px; font-size: 1.15rem;">
        </i>
        
          
          <a 
            href="/tags/java/" 
            class="post-meta-link">
            java
          </a>
        
          
            <span class="dot"></span>
          
          <a 
            href="/tags/JVM/" 
            class="post-meta-link">
            JVM
          </a>
        
      </div>
    </div>
  
  </header>
  <div 
    id="section" 
    class="post-content">
    <p>JVM æ˜¯åŸºäºæ ˆçš„ã€‚<br>JVM è¿è¡Œ java ç¨‹åºè¿‡ç¨‹ä¸­ä¼šæŠŠå…¶ç®¡ç†çš„å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸åŒç”¨é€”çš„æ•°æ®åŒºåŸŸï¼šå®ƒä»¬çš„åˆ›å»º&#x2F;é”€æ¯æ—¶é—´ä¸å°½ç›¸åŒï¼Œæœ‰çš„åŒºåŸŸéš JVM çš„å¯åŠ¨è€Œå­˜åœ¨ï¼Œæœ‰çš„åˆ™ä¾èµ–äºç”¨æˆ·çº¿ç¨‹çš„å¯åŠ¨&#x2F;ç»“æŸè€Œå»ºç«‹&#x2F;é”€æ¯ã€‚jvms è§„å®šäº†ä»¥ä¸‹è¿è¡Œæ—¶æ•°æ®åŒºåŸŸï¼š</p>
<img src="/2018/04/16/java/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/04/16/java/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/JVM%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA.png" class title="JVMè¿è¡Œæ—¶æ•°æ®åŒº" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2018/04/16/java/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/04/16/java/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/JVM%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA.png" class="lozad post-image">

<h1 id="PCï¼ˆProgram-Counter-Registerï¼‰"><a href="#PCï¼ˆProgram-Counter-Registerï¼‰" class="headerlink" title="PCï¼ˆProgram Counter Registerï¼‰"></a>PCï¼ˆProgram Counter Registerï¼‰</h1><p>ç¨‹åºè®¡æ•°å™¨ã€‚è¾ƒå°çš„ä¸€å—å†…å­˜ç©ºé—´ï¼Œå¯ä»¥çœ‹ä½œå½“å‰çº¿ç¨‹é”æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚JVM æ¦‚å¿µæ¨¡å‹é‡Œï¼Œå­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜ PC å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚<br>æ¯ä¸ªçº¿ç¨‹éƒ½éœ€è¦ç‹¬ç«‹çš„ PCï¼Œå³è¿™ç±»å†…å­˜åŒºåŸŸä¸ºâ€œçº¿ç¨‹ç§æœ‰â€çš„ã€‚<br>PC æ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ jvms ä¸­æ²¡æœ‰è§„å®šä»»ä½• OutOfMemoryError æƒ…å†µçš„åŒºåŸŸã€‚</p>
<h1 id="Java-è™šæ‹Ÿæœºæ ˆï¼ˆJava-VM-Stacksï¼‰"><a href="#Java-è™šæ‹Ÿæœºæ ˆï¼ˆJava-VM-Stacksï¼‰" class="headerlink" title="Java è™šæ‹Ÿæœºæ ˆï¼ˆJava VM Stacksï¼‰"></a>Java è™šæ‹Ÿæœºæ ˆï¼ˆJava VM Stacksï¼‰</h1><p>ä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸå’Œçº¿ç¨‹ç›¸åŒã€‚è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯ java æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ª <strong>æ ˆå¸§ï¼ˆStack Frameï¼‰</strong>ï¼Œç”¨äºå­˜å‚¨ <strong>å±€éƒ¨å˜é‡è¡¨</strong>ã€<strong>æ“ä½œæ•°æ ˆ</strong>ã€<strong>åŠ¨æ€é“¾æ¥</strong>ã€<strong>æ–¹æ³•å‡ºå£</strong> ç­‰ä¿¡æ¯ã€‚<strong>æ¯ä¸ªæ–¹æ³•ä»è°ƒç”¨ç›´åˆ°æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</strong><br><strong>æ ˆå¸§</strong><br>æ–¹æ³•è¿è¡Œæ—¶çš„åŸºç¡€æ•°æ®ç»“æ„ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ–¹æ³•çš„è¿è¡Œç©ºé—´ã€‚ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li><strong>å±€éƒ¨å˜é‡è¡¨</strong> å­˜æ”¾äº†ç¼–è¯‘å™¨å¯çŸ¥çš„å„ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆbooleanã€byteã€charã€shortã€intã€floatã€longã€doubleï¼‰ã€æ–¹æ³•å‚æ•°ã€å¯¹è±¡å¼•ç”¨ï¼ˆreference ç±»å‹ï¼Œå®ƒä¸ç­‰åŒäºå¯¹è±¡æœ¬èº«ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„å¼•ç”¨æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–å…¶ä»–äºæ­¤å¯¹è±¡ç›¸å…³çš„ä½ç½®ï¼‰å’Œ returnAddress ç±»å‹ï¼ˆæŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼‰ã€‚å…¶ä¸­ï¼Œ64 bit é•¿åº¦çš„ long å’Œ double ä¼šå ç”¨ 2 ä¸ªå±€éƒ¨å˜é‡ç©ºé—´ï¼ˆSlotï¼‰ï¼Œå…¶ä½™ç±»å‹å ç”¨ 1 ä¸ªã€‚æ‰€ä»¥ï¼Œå±€éƒ¨å˜é‡è¡¨æ‰€éœ€å†…å­˜ç©ºé—´åœ¨ç¼–è¯‘æœŸé—´å°±èƒ½å®Œæˆåˆ†é…ã€‚å½“è¿›å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦åœ¨å¸§ä¸­åˆ†é…å¤šå¤§çš„å±€éƒ¨å˜é‡ç©ºé—´æ˜¯å®Œå…¨ç¡®å®šçš„ï¼Œæ–¹æ³•è¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡è¡¨çš„å¤§å°ã€‚</li>
<li><strong>æ“ä½œæ•°æ ˆ</strong> å­˜æ”¾æ“ä½œæ•°ã€‚java ç¨‹åºç¼–è¯‘åçš„å­—èŠ‚ç æŒ‡ä»¤çš„æ“ä½œæ•°éƒ½å­˜æ”¾åœ¨è¿™é‡Œã€‚å½“æ‰§è¡ŒæŸæ¡å¸¦ n ä¸ªæ“ä½œæ•°çš„æŒ‡ä»¤æ—¶ï¼Œå°±ä»æ ˆé¡¶å–å‡º n ä¸ªæ“ä½œæ•°ï¼ŒæŠŠæŒ‡ä»¤è®¡ç®—ç»“æœï¼ˆå¦‚æœæœ‰ï¼‰å†å…¥æ ˆã€‚<em>ä¸€èˆ¬æ‰€è°“çš„â€œJVM æ‰§è¡Œå¼•æ“æ˜¯åŸºäºæ ˆâ€çš„æ—¶å€™ï¼ŒæŒ‡çš„å°±æ˜¯æ“ä½œæ•°æ ˆã€‚</em></li>
</ul>
<p>jvms è§„å®šäº†è¯¥åŒºåŸŸçš„ä¸¤ç§å¼‚å¸¸ï¼š</p>
<ul>
<li>å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äº VM æ‰€å…è®¸çš„æ·±åº¦ï¼Œå°†æŠ›å‡º StackOverflowError å¼‚å¸¸ï¼›</li>
<li>å¦‚æœè™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼ˆå½“å‰å¤§éƒ¨åˆ† jvm éƒ½æ”¯æŒï¼Œä½† jvms ä¹Ÿå…è®¸å›ºå®šé•¿åº¦ï¼‰ï¼Œè€Œåœ¨æ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ï¼Œå°†æŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</li>
</ul>
<h1 id="æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative-Method-Stacksï¼‰"><a href="#æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative-Method-Stacksï¼‰" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰"></a>æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰</h1><p>ä¸è™šæ‹Ÿæœºæ ˆä½œç”¨ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºè™šæ‹Ÿæœºæ ˆä¸º VM æ‰§è¡Œ java æ–¹æ³•ï¼ˆå³å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆä¸º VM ä½¿ç”¨åˆ°çš„ Native æ–¹æ³•æœåŠ¡ã€‚jvms æ²¡æœ‰å¯¹æœ¬åœ°æ–¹æ³•æ ˆä¸­æ–¹æ³•ä½¿ç”¨çš„è¯­è¨€ã€ä½¿ç”¨æ–¹å¼ã€æ•°æ®ç»“æ„ä½œä»»ä½•å¼ºåˆ¶è§„å®šï¼Œæ‰€ä»¥å…·ä½“çš„ VM å¯ä»¥è‡ªç”±å®ç°å®ƒï¼ˆå¦‚ï¼ŒSun HotSpot å°±ç›´æ¥æŠŠæœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆåˆäºŒä¸ºä¸€ï¼‰ã€‚<br>å¼‚å¸¸æƒ…å†µä¹ŸåŒè™šæ‹Ÿæœºæ ˆã€‚</p>
<p><strong>ä»¥ä¸Š 3 ä¸ªæ•°æ®åŒºåŸŸéšçº¿ç¨‹åˆ›å»ºè€Œåˆ›å»ºï¼Œéšçº¿ç¨‹ç»ˆç»“è€Œç»ˆç»“ã€‚</strong></p>
<h1 id="Java-å †ï¼ˆJava-Heapï¼‰"><a href="#Java-å †ï¼ˆJava-Heapï¼‰" class="headerlink" title="Java å †ï¼ˆJava Heapï¼‰"></a>Java å †ï¼ˆJava Heapï¼‰</h1><p>JVM æ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ã€‚è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«ï¼Œåœ¨ VM å¯åŠ¨æ—¶åˆ›å»ºã€‚Java å †çš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾ <strong>å¯¹è±¡å®ä¾‹</strong>ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚jvms æè¿°æ˜¯ï¼šæ‰€æœ‰çš„å¯¹è±¡å®ä¾‹ä»¥åŠæ•°ç»„éƒ½è¦åœ¨å †ä¸Šåˆ†é…ï¼ˆThe heap is the run-time data area from which memory for all class instances &amp; arrays is allocatedï¼‰ã€‚ä½†éšç€ JIT ç¼–è¯‘å™¨çš„å‘å±•ä¸é€ƒé€¸åˆ†ææŠ€æœ¯é€æ¸æˆç†Ÿï¼Œæ ˆä¸Šåˆ†é…ã€æ ‡é‡æ›¿æ¢ä¼˜åŒ–æŠ€æœ¯å°†ä¼šå¯¼è‡´ä¸€äº›å¾®å¦™çš„å˜åŒ–ï¼Œè¿™ä¸ªè§„èŒƒä¹Ÿå°±æ˜¾å¾—æ¸æ¸ä¸é‚£ä¹ˆâ€œç»å¯¹â€äº†ã€‚<br>Java å †æ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†ï¼ˆGCï¼‰çš„ä¸»è¦åŒºåŸŸï¼Œå› æ­¤ä¹Ÿç§°ä¸º <strong>GC å †ï¼ŒGarbage Collected Heap</strong>ã€‚ä»ä¸åŒè§’åº¦å‡ºå‘ï¼Œjava å †åˆå¯ä»¥åšè¿›ä¸€æ­¥çš„ç»†åˆ†ï¼š</p>
<ul>
<li>ä»å†…å­˜åˆ†é…è§’åº¦çœ‹ï¼Œçº¿ç¨‹å…±äº«çš„ java å †ä¸­å¯èƒ½åˆ’åˆ†å‡ºå¤šä¸ª <strong>çº¿ç¨‹ç§æœ‰çš„åˆ†é…ç¼“å†²åŒºï¼ˆThread Local Allocation Bufferï¼Œ TLABï¼‰</strong>ï¼›</li>
<li>ä»å†…å­˜å›æ”¶è§’åº¦çœ‹ï¼Œç”±äºç°åœ¨çš„æ”¶é›†å™¨åŸºæœ¬éƒ½é‡‡ç”¨åˆ†ä»£æ”¶é›†ç®—æ³•ï¼Œæ‰€ä»¥ java å †è¿˜å¯ä»¥åˆ’åˆ†ä¸ºï¼šæ–°ç”Ÿä»£ã€è€å¹´ä»£ã€‚å†ç»†è‡´ä¸€ç‚¹çš„è¿˜æœ‰ï¼š Eden ç©ºé—´ã€From Survivor ç©ºé—´ã€To Survivor ç©ºé—´ç­‰ã€‚</li>
</ul>
<p><em>æ— è®ºå¦‚ä½•åˆ’åˆ†ï¼Œjava å †å­˜å‚¨çš„éƒ½ä»ç„¶æ˜¯å¯¹è±¡å®ä¾‹ã€‚</em><br>jvms è§„å®š java å †å¯ä»¥å¤„äºç‰©ç†ä¸Šä¸è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œåªè¦é€»è¾‘ä¸Šæ˜¯è¿ç»­çš„å³å¯ï¼›æ—¢å¯ä»¥æ˜¯å›ºå®šå¤§å°çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯æ‰©å±•çš„ã€‚å½“å‰ä¸»æµ VM éƒ½æ˜¯æŒ‰ç…§å¯æ‰©å±•æ¥å®ç°çš„ï¼ˆé€šè¿‡ -Xmx å’Œ -Xmsï¼‰ã€‚<br>å¦‚æœåœ¨å †ä¸­æ²¡æœ‰è¶³å¤Ÿå†…å­˜ä»¥å®Œæˆå®ä¾‹åˆ†é…ï¼Œå¹¶ä¸”å †å¤§å°ä¹Ÿæ— æ³•å†æ‰©å±•æ—¶ï¼Œå°†æŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p>
<h1 id="æ–¹æ³•åŒºï¼ˆMethod-Areaï¼‰"><a href="#æ–¹æ³•åŒºï¼ˆMethod-Areaï¼‰" class="headerlink" title="æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰"></a>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</h1><p>ä¸ java å †ä¸€æ ·ï¼Œæ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œåœ¨ VM å¯åŠ¨æ—¶åˆ›å»ºã€‚ç”¨äºå­˜å‚¨å·²è¢« VM åŠ è½½çš„ <strong>ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®</strong>ã€‚<br>è™½ç„¶ jvms å°†æ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€éƒ¨åˆ†ï¼Œä½†å…¶åˆ«åå«åš Non-Heapï¼ˆéå †ï¼‰ï¼Œä»¥ç¤ºåŒºåˆ«ï¼Œæ²¡æœ‰å¯¹å…·ä½“å®ç°ä½œçº¦æŸã€‚<br><em>JDK 1.8 ä¹‹å‰ï¼ŒHotSpot å°†æ–¹æ³•åŒºå®ç°ä¸ºæ°¸ä¹…ä»£ï¼Œ1.8 ä¹‹åå–æ¶ˆæ°¸ä¹…ä»£ï¼Œæ›¿ä»£çš„æ˜¯ Metaspaceï¼Œæ°¸ä¹…ä»£ä¸­çš„ class metadata è½¬ç§»åˆ° native memoryï¼ˆæœ¬åœ°å†…å­˜ï¼‰ä¸­ï¼Œinterned Strings å’Œ class static variables è½¬ç§»åˆ° java heap ä¸­ï¼Œæ°¸ä¹…ä»£å‚æ•°ï¼ˆPermSize MaxPermSizeï¼‰æ›¿æ¢ä¸ºå…ƒç©ºé—´å‚æ•°ï¼ˆMetaspaceSizeï¼ŒMaxMetaspaceSizeï¼‰ã€‚è€Œå…¶ä»– VM å¦‚ BEA JRockitã€IBM J9 ç­‰ï¼Œæœ¬å°±æ²¡æœ‰æ°¸ä¹…ä»£çš„æ¦‚å¿µã€‚</em><br>jvms å¯¹æ–¹æ³•åŒºçš„æè¿°æ¯”è¾ƒå®½æ¾ï¼ŒåŒæ ·ä¸éœ€è¦è¿ç»­çš„ç‰©ç†å†…å­˜ï¼Œå¯å›ºå®šå¤§å°ï¼Œä¹Ÿå¯æ‰©å±•ï¼Œè¿˜å¯ä»¥é€‰æ‹©ä¸å®ç°åƒåœ¾æ”¶é›†ï¼ˆç›¸å¯¹è€Œè¨€ï¼Œåƒåœ¾æ”¶é›†è¡Œä¸ºè¾ƒå°‘å‘ç”Ÿåœ¨æ–¹æ³•åŒºä¸­ï¼‰ã€‚<br>å½“æ–¹æ³•åŒºæ— æ³•æ»¡è¶³å†…å­˜åˆ†é…éœ€æ±‚æ—¶ï¼Œå°†æŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p>
<h1 id="è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime-Constant-Poolï¼‰"><a href="#è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime-Constant-Poolï¼‰" class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰"></a>è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰</h1><p>Class æ–‡ä»¶ä¸­é™¤äº†ç±»ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰æè¿°ä¿¡æ¯ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯æ˜¯ <strong>å¸¸é‡æ± ï¼ˆConstant Pool Tableï¼‰</strong>ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åè¿›å…¥æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­å­˜æ”¾ã€‚å…¶ä¸­ç¬¦å·å¼•ç”¨ï¼ˆSymbolic Referenceï¼‰å±äºç¼–è¯‘åŸç†æ¦‚å¿µï¼ŒåŒ…å«ä¸‰ç±»å¸¸é‡ï¼š</p>
<ul>
<li>ç±»å’Œæ¥å£çš„å…¨é™å®šåï¼ˆFull Qualified Nameï¼‰ï¼›</li>
<li>å­—æ®µçš„åç§°å’Œæè¿°ç¬¦ï¼ˆDescriptorï¼‰ï¼›</li>
<li>æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦ã€‚</li>
</ul>
<p>è¿è¡Œæ—¶å¸¸é‡æ± ç›¸å¯¹äº Class æ–‡ä»¶å¸¸é‡æ± çš„ä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯å…·å¤‡åŠ¨æ€æ€§ã€‚å³ï¼Œjava è¯­è¨€å¹¶ä¸è¦æ±‚å¸¸é‡ä¸€å®šåœ¨ç¼–è¯‘æœŸé—´æ‰èƒ½äº§ç”Ÿï¼Œè¿è¡ŒæœŸé—´ä¹Ÿå¯èƒ½å°†æ–°çš„å¸¸é‡æ”¾å…¥å…¶ä¸­ã€‚è€Œ Class æ–‡ä»¶å¯¹æ¯ä¸€éƒ¨åˆ†ï¼ˆåŒ…æ‹¬å¸¸é‡æ± ï¼‰çš„æ ¼å¼éƒ½æœ‰ä¸¥æ ¼è§„å®šï¼Œæ¯ä¸ªå­—èŠ‚ç”¨äºå­˜å‚¨å“ªç§æ•°æ®éƒ½å¿…é¡»ç¬¦åˆè§„èŒƒã€‚<br>ä½œä¸ºæ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå½“è¿è¡Œæ—¶å¸¸é‡æ± æ— æ³•å†ç”³è¯·åˆ°å†…å­˜æ—¶å°†æŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p>
<h2 id="è¿è¡Œæ—¶å¸¸é‡æ± ä½ç½®å˜åŒ–"><a href="#è¿è¡Œæ—¶å¸¸é‡æ± ä½ç½®å˜åŒ–" class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± ä½ç½®å˜åŒ–"></a>è¿è¡Œæ—¶å¸¸é‡æ± ä½ç½®å˜åŒ–</h2><p>è¿™ä¸ªé—®é¢˜ç‰µæ‰¯è¾ƒå¤šï¼Œå¦‚æœä¸æ¸…æ™°ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº›éš¾ä»¥ç†è§£çš„è¿è¡Œé”™è¯¯ï¼Œå¦‚å…¸å‹çš„ String çš„ intern()æ–¹æ³•ã€‚<br>é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œä»ä¸Šè¿°å¯çŸ¥ï¼Œæ–¹æ³•åŒºé€»è¾‘ä¸Šå±äº java å †ï¼Œåªä¸è¿‡æ¶‰åŠåˆ° GC ç­‰é—®é¢˜æ—¶ï¼Œå¯ä»¥è¿›è¡Œç»†åŒ–æ“ä½œã€‚è€Œå…·ä½“çš„è¿è¡Œæ—¶å¸¸é‡æ± ä½ç½®åˆ™è·Ÿ JDK ç‰ˆæœ¬å’Œç›¸åº”è™šæ‹Ÿæœºï¼ˆè¿™é‡ŒæŒ‡å†…ç½®çš„ HotSpotï¼‰æœ‰å…³ã€‚</p>
<ul>
<li>JDK1.6 åŠä»¥å‰ï¼šHotSpot å°† GC åˆ†ä»£æ”¶é›†æ‰©å±•åˆ°äº†æ–¹æ³•åŒºï¼Œä¸»è¦å›æ”¶ç›®æ ‡æ˜¯é’ˆå¯¹å¸¸é‡æ± å’Œå¯¹ç±»å‹çš„å¸è½½ï¼Œå¹¶ä½¿ç”¨æ°¸ä¹…ä»£ï¼ˆPermGenï¼‰æ¦‚å¿µå®ç°äº†æ–¹æ³•åŒºï¼ˆè¿™ä¹Ÿæ˜¯äººä»¬å¸¸ç§°æ–¹æ³•åŒºä¸ºæ°¸ä¹…ä»£çš„åŸå› ï¼Œä½†äºŒè€…å¹¶ä¸ç›¸åŒï¼Œè§‚å¯Ÿçš„è§’åº¦ä¹Ÿä¸åŒï¼šå‰è€…æ˜¯ jvms è§„èŒƒå†…å­˜çš„é€»è¾‘åˆ’åˆ†ï¼Œåè€…æ˜¯ jvm é’ˆå¯¹è§„èŒƒçš„å…·ä½“å®ç°ï¼‰ï¼Œæ‰€ä»¥è¿è¡Œæ—¶å¸¸é‡æ± å¤„åœ¨æ°¸ä¹…ä»£ä¸­ã€‚æ­¤æ—¶ OOM é”™è¯¯æ˜¾ç¤ºä¸º PermGen space ã€‚</li>
<li>JDK1.7ï¼šç§»åˆ°äº† java å †ä¸­ã€‚å­—ç¬¦ä¸²å¸¸é‡æ± ä¹Ÿåœ¨è¯¥ç‰ˆæœ¬ç§»åˆ° java å †ã€‚ä¹Ÿæ˜¯ä»è¿™ä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œä¹Ÿè®¸æ˜¯ Oracle ä¸ºäº†å…¼å®¹æ”¶è´­æ¥çš„ JRockitï¼ˆæ²¡æœ‰æ°¸ä¹…ä»£çš„æ¦‚å¿µï¼‰ å’ŒåŸæœ¬çš„ HotSpotï¼Œå†³å®šé€æ­¥ç§»é™¤ HotSpot ä¸­çš„æ°¸ä¹…ä»£ã€‚æ­¤æ—¶ OOM é”™è¯¯æ˜¾ç¤ºä¸º Java heap spaceã€‚__</li>
<li>JDK1.8ï¼šå½»åº•ç§»é™¤æ•´ä¸ªæ°¸ä¹…ä»£ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä¸€ä¸ªç‹¬ç«‹ç©ºé—´â€”â€”metaspaceï¼ˆå…ƒç©ºé—´ï¼‰ï¼Œå®ƒç‹¬ç«‹äº java å †ï¼Œä½¿ç”¨æœ¬åœ°å†…å­˜ï¼Œæ‰€ä»¥ä¸å†æœ‰ OOM é”™è¯¯ï¼Œç†è®ºä¸Šå¤§å°åªå—åˆ°ç‰©ç†å†…å­˜çš„é™åˆ¶ã€‚</li>
</ul>
<h2 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h2><ul>
<li><p>å¸¸é‡æ± è¡¨ï¼ˆConstant Pool Table)ï¼š<br>class æ–‡ä»¶ä¸­å­˜å‚¨æ‰€æœ‰å¸¸é‡ï¼ˆåŒ…æ‹¬å­—ç¬¦ä¸²ï¼‰çš„è¡¨ï¼Œè¿™æ˜¯ class æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå…¶å®å°±æ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†å­—èŠ‚ç æŒ‡ä»¤ï¼Œè·Ÿâ€œpoolâ€ã€è¿è¡Œæ—¶æ¦‚å¿µä¸ç›¸å…³ï¼›</p>
</li>
<li><p>è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰ï¼š<br>è¿è¡Œæ—¶çš„å†…å®¹ã€‚å¤§éƒ¨åˆ†å†…å®¹æ˜¯éšç€ JVM çš„è¿è¡Œï¼Œä»å¸¸é‡æ± è½¬åŒ–è€Œæ¥ï¼Œæ¯ä¸ª class å¯¹åº”ä¸€ä¸ªè¿è¡Œæ—¶å¸¸é‡æ± ï¼›</p>
</li>
<li><p>å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString Poolï¼‰ï¼š<br>ä¸è¿è¡Œæ—¶å¸¸é‡æ± ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± æ˜¯ JVM å®ä¾‹å…¨å±€å…±äº«çš„ï¼Œå³ï¼Œå…¨å±€åªæœ‰ä¸€ä¸ªã€‚jvms è§„å®šè¿›å…¥è¿™é‡Œçš„ String å®ä¾‹å«åšâ€œè¢«é©»ç•™çš„ interned stringâ€ï¼ŒHotSpot ä½¿ç”¨å“ˆå¸Œè¡¨ String Table æ¥å¼•ç”¨å †ä¸­çš„å­—ç¬¦ä¸²å®ä¾‹ï¼Œè¢«å¼•ç”¨å°±æ˜¯è¢«é©»ç•™ã€‚</p>
</li>
<li><p>Metaspaceï¼ˆå…ƒç©ºé—´ï¼‰ï¼š<br>JDK8 HotSpot ä½¿ç”¨æœ¬åœ°å†…å­˜æ¥å­˜å‚¨ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œè¿™å—å†…å­˜å°±æ˜¯å…ƒç©ºé—´ã€‚æœ¬è´¨ä¸Šï¼Œè¿˜æ˜¯å¯¹åº”äº jvms é‡Œçš„æ–¹æ³•åŒºï¼Œåªä¸è¿‡å®ç°ä¸Šä¸å†ä½¿ç”¨ java å †çš„ä¸€éƒ¨åˆ†ï¼ˆä¹‹å‰ç‰ˆæœ¬çš„æ–¹æ³•åŒºå®ç°ï¼Œä¹Ÿå°±æ˜¯æ°¸ä¹…ä»£ï¼Œé€»è¾‘ä¸Šå±äº java å †çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨æœ¬åœ°å†…å­˜ï¼Œè¿™æ„å‘³ç€ä¸å†å‡ºç° OOM é”™è¯¯ã€‚</p>
</li>
</ul>
<h1 id="ç›´æ¥å†…å­˜ï¼ˆDirect-Memoryï¼‰"><a href="#ç›´æ¥å†…å­˜ï¼ˆDirect-Memoryï¼‰" class="headerlink" title="ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰"></a>ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰</h1><p>å¹¶é VM è¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ jvms ä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸã€‚<br>JDK 1.4 æ–°åŠ å…¥äº† NIOï¼ˆNew Input&#x2F;Outputï¼‰ç±»ï¼Œå¼•å…¥äº†ä¸€ç§åŸºäºé€šé“ï¼ˆChannelï¼‰ä¸ç¼“å†²åŒºï¼ˆBufferï¼‰çš„ I&#x2F;O æ–¹å¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ Native å‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨ java å †ä¸­çš„ DirectByteBuffer å¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œè¿›è¡Œæ“ä½œã€‚è¿™æ ·èƒ½åœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œå› ä¸º <strong>é¿å…åœ¨ java å † å’Œ Native å †ä¸­æ¥å›å¤åˆ¶æ•°æ®</strong>ã€‚<br>æœ¬æœºç›´æ¥å†…å­˜çš„åˆ†é…ä¸å— java å †å¤§å°çš„é™åˆ¶ï¼Œåªè·Ÿæœ¬æœºç‰©ç†å†…å­˜ç­‰æœ‰å…³ã€‚ä½†å¦‚æœé…ç½®ä¸å½“ï¼Œä¹Ÿä¼šé€ æˆåŠ¨æ€æ‰©å±•æ—¶ç‰©ç†å†…å­˜å·²è€—å°½è€ŒæŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p>
<h2 id="ç®¡ç†"><a href="#ç®¡ç†" class="headerlink" title="ç®¡ç†"></a>ç®¡ç†</h2><p>å¯è§ï¼Œç›´æ¥å†…å­˜çš„ç®¡ç†å·¥ä½œå¹¶ä¸å®Œå…¨ä¾èµ–äº JVMã€‚ç›´æ¥å†…å­˜åŒºåŸŸå¯ä»¥è¿›è¡Œè‡ªåŠ¨å†…å­˜ç®¡ç†(GC)ï¼Œä½†æœºåˆ¶å¹¶ä¸å®Œå–„ã€‚</p>
<h1 id="JDK-1-8-ä¸­-HotSpot-å†…å­˜æ¨¡å‹"><a href="#JDK-1-8-ä¸­-HotSpot-å†…å­˜æ¨¡å‹" class="headerlink" title="JDK 1.8 ä¸­ HotSpot å†…å­˜æ¨¡å‹"></a>JDK 1.8 ä¸­ HotSpot å†…å­˜æ¨¡å‹</h1><img src="/2018/04/16/java/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/04/16/java/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/JDK1.8-HotSpot%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B.png" class title="JDK1.8-HotSpotå†…å­˜æ¨¡å‹" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2018/04/16/java/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/04/16/java/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/JDK1.8-HotSpot%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B.png" class="lozad post-image">

<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/xrq730/p/4827590.html">http://www.cnblogs.com/xrq730/p/4827590.html</a></p>

  </div>
  <div>
    
      <div 
        class="post-note note-warning copyright" 
        style="margin-top: 42px">
        <p>
          <span style="font-weight: bold;">ä½œè€…ï¼š</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="/about">
            Neil
          </a>
        </p>
        <p>
          <span style="font-weight: bold;">æ–‡ç« é“¾æ¥ï¼š</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="https://lazy-snail.github.io/2018/04/16/java/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/">
            https://lazy-snail.github.io/2018/04/16/java/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/
          </a>
        </p>
        <p><span style="font-weight: bold;">ç‰ˆæƒå£°æ˜ï¼š</span>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„</p>
      </div>
    
  </div>
</article>
<div class="nav">
  
    <div class="nav-item-prev">
      <a 
        href="/2018/04/17/CS/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-CN/" 
        class="nav-link">
        <i class="iconfont icon-left nav-prev-icon"></i>
        <div>
          <div class="nav-label">Prev</div>
          
            <div class="nav-title">å¸¸è§é—®é¢˜-CN </div>
          
        </div>
      </a>
    </div>
  
  
    <div class="nav-item-next">
      <a 
        href="/2018/04/15/OS/Linux-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" 
        class="nav-link">
        <div>
          <div class="nav-label">Next</div>
          
            <div class="nav-title">Linux-å¸¸ç”¨å‘½ä»¤ </div>
          
        </div>
        <i class="iconfont icon-right nav-next-icon"></i>
      </a>
    </div>
  
</div>

<div 
  class="card card-content toc-card" 
  id="mobiletoc">
  <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PC%EF%BC%88Program-Counter-Register%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">PCï¼ˆProgram Counter Registerï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88%EF%BC%88Java-VM-Stacks%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">Java è™šæ‹Ÿæœºæ ˆï¼ˆJava VM Stacksï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88%EF%BC%88Native-Method-Stacks%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-%E5%A0%86%EF%BC%88Java-Heap%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">Java å †ï¼ˆJava Heapï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%8C%BA%EF%BC%88Method-Area%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0%EF%BC%88Runtime-Constant-Pool%EF%BC%89"><span class="toc-number">6.</span> <span class="toc-text">è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%BD%8D%E7%BD%AE%E5%8F%98%E5%8C%96"><span class="toc-number">6.1.</span> <span class="toc-text">è¿è¡Œæ—¶å¸¸é‡æ± ä½ç½®å˜åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">6.2.</span> <span class="toc-text">ç›¸å…³æ¦‚å¿µ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98%EF%BC%88Direct-Memory%EF%BC%89"><span class="toc-number">7.</span> <span class="toc-text">ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%90%86"><span class="toc-number">7.1.</span> <span class="toc-text">ç®¡ç†</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK-1-8-%E4%B8%AD-HotSpot-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.</span> <span class="toc-text">JDK 1.8 ä¸­ HotSpot å†…å­˜æ¨¡å‹</span></a></li></ol>
</div></main>
            <aside class="left-column">
              
              <div class="card card-author">
                
  <img 
    src="/img/little-prince.png" 
    class="author-img"
    width="88"
    height="88"
    alt="author avatar">

<p class="author-name">Neil</p>
<p class="author-description">there's a will there's a way</p>
<div class="author-message">
  <a 
    class="author-posts-count" 
    href="/archives">
    <span>171</span>
    <span>Posts</span>
  </a>
  <a 
    class="author-categories-count" 
    href="/categories">
    <span>13</span>
    <span>Categories</span>
  </a>
  <a 
    class="author-tags-count" 
    href="/tags">
    <span>31</span>
    <span>Tags</span>
  </a>
</div>

              </div>
               <div class="sticky-tablet">
  
  
    <article class="display-when-two-columns spacer">
      <div class="card card-content toc-card">
        <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PC%EF%BC%88Program-Counter-Register%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">PCï¼ˆProgram Counter Registerï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88%EF%BC%88Java-VM-Stacks%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">Java è™šæ‹Ÿæœºæ ˆï¼ˆJava VM Stacksï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88%EF%BC%88Native-Method-Stacks%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-%E5%A0%86%EF%BC%88Java-Heap%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">Java å †ï¼ˆJava Heapï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%8C%BA%EF%BC%88Method-Area%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0%EF%BC%88Runtime-Constant-Pool%EF%BC%89"><span class="toc-number">6.</span> <span class="toc-text">è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%BD%8D%E7%BD%AE%E5%8F%98%E5%8C%96"><span class="toc-number">6.1.</span> <span class="toc-text">è¿è¡Œæ—¶å¸¸é‡æ± ä½ç½®å˜åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">6.2.</span> <span class="toc-text">ç›¸å…³æ¦‚å¿µ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98%EF%BC%88Direct-Memory%EF%BC%89"><span class="toc-number">7.</span> <span class="toc-text">ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%90%86"><span class="toc-number">7.1.</span> <span class="toc-text">ç®¡ç†</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK-1-8-%E4%B8%AD-HotSpot-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.</span> <span class="toc-text">JDK 1.8 ä¸­ HotSpot å†…å­˜æ¨¡å‹</span></a></li></ol>
      </div>
    </article>
  
  
  <article class="card card-content categories-widget">
    <div class="categories-card">
  <div class="categories-header">
    <i 
      class="iconfont icon-fenlei" 
      style="padding-right: 2px;">
    </i>Categories
  </div>
  <div class="categories-list">
    
      <a href="/categories/Algs/">
        <div class="categories-list-item">
          Algs
          <span class="categories-list-item-badge">10</span>
        </div>
      </a>
    
      <a href="/categories/algs/">
        <div class="categories-list-item">
          algs
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/CS/">
        <div class="categories-list-item">
          CS
          <span class="categories-list-item-badge">9</span>
        </div>
      </a>
    
      <a href="/categories/CN/">
        <div class="categories-list-item">
          CN
          <span class="categories-list-item-badge">10</span>
        </div>
      </a>
    
      <a href="/categories/java/">
        <div class="categories-list-item">
          java
          <span class="categories-list-item-badge">62</span>
        </div>
      </a>
    
      <a href="/categories/backend/">
        <div class="categories-list-item">
          backend
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/middleware/">
        <div class="categories-list-item">
          middleware
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/tools/">
        <div class="categories-list-item">
          tools
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/DB/">
        <div class="categories-list-item">
          DB
          <span class="categories-list-item-badge">14</span>
        </div>
      </a>
    
      <a href="/categories/OS/">
        <div class="categories-list-item">
          OS
          <span class="categories-list-item-badge">14</span>
        </div>
      </a>
    
      <a href="/categories/cpp/">
        <div class="categories-list-item">
          cpp
          <span class="categories-list-item-badge">20</span>
        </div>
      </a>
    
      <a href="/categories/Daily/">
        <div class="categories-list-item">
          Daily
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/py/">
        <div class="categories-list-item">
          py
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
  </div>
</div>
  </article>
  
  <article class="card card-content tags-widget">
    <div class="tags-card">
  <div class="tags-header">
    <i 
      class="iconfont icon-biaoqian" 
      style="padding-right: 2px;">
    </i>hot tags
  </div>
  <div class="tags-list">
    
      <a 
        href="/tags/java/" 
        title="java">
        <div class="tags-list-item">java</div>
      </a>
    
      <a 
        href="/tags/cpp/" 
        title="cpp">
        <div class="tags-list-item">cpp</div>
      </a>
    
      <a 
        href="/tags/OS/" 
        title="OS">
        <div class="tags-list-item">OS</div>
      </a>
    
      <a 
        href="/tags/DB/" 
        title="DB">
        <div class="tags-list-item">DB</div>
      </a>
    
      <a 
        href="/tags/%E5%AE%B9%E5%99%A8/" 
        title="å®¹å™¨">
        <div class="tags-list-item">å®¹å™¨</div>
      </a>
    
      <a 
        href="/tags/MySQL/" 
        title="MySQL">
        <div class="tags-list-item">MySQL</div>
      </a>
    
      <a 
        href="/tags/%E5%B9%B6%E5%8F%91/" 
        title="å¹¶å‘">
        <div class="tags-list-item">å¹¶å‘</div>
      </a>
    
      <a 
        href="/tags/JVM/" 
        title="JVM">
        <div class="tags-list-item">JVM</div>
      </a>
    
      <a 
        href="/tags/CN/" 
        title="CN">
        <div class="tags-list-item">CN</div>
      </a>
    
      <a 
        href="/tags/Algs/" 
        title="Algs">
        <div class="tags-list-item">Algs</div>
      </a>
    
      <a 
        href="/tags/CS/" 
        title="CS">
        <div class="tags-list-item">CS</div>
      </a>
    
      <a 
        href="/tags/Q-A/" 
        title="Q&A">
        <div class="tags-list-item">Q&amp;A</div>
      </a>
    
      <a 
        href="/tags/%E6%96%B0%E7%89%B9%E6%80%A7/" 
        title="æ–°ç‰¹æ€§">
        <div class="tags-list-item">æ–°ç‰¹æ€§</div>
      </a>
    
      <a 
        href="/tags/%E7%BA%BF%E7%A8%8B/" 
        title="çº¿ç¨‹">
        <div class="tags-list-item">çº¿ç¨‹</div>
      </a>
    
      <a 
        href="/tags/Sort/" 
        title="Sort">
        <div class="tags-list-item">Sort</div>
      </a>
    
      <a 
        href="/tags/Linux/" 
        title="Linux">
        <div class="tags-list-item">Linux</div>
      </a>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
            <aside class="right-column">
              <div class="sticky-widescreen">
  
  
    <article class="card card-content toc-card">
      <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PC%EF%BC%88Program-Counter-Register%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">PCï¼ˆProgram Counter Registerï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88%EF%BC%88Java-VM-Stacks%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">Java è™šæ‹Ÿæœºæ ˆï¼ˆJava VM Stacksï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88%EF%BC%88Native-Method-Stacks%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-%E5%A0%86%EF%BC%88Java-Heap%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">Java å †ï¼ˆJava Heapï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%8C%BA%EF%BC%88Method-Area%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0%EF%BC%88Runtime-Constant-Pool%EF%BC%89"><span class="toc-number">6.</span> <span class="toc-text">è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%BD%8D%E7%BD%AE%E5%8F%98%E5%8C%96"><span class="toc-number">6.1.</span> <span class="toc-text">è¿è¡Œæ—¶å¸¸é‡æ± ä½ç½®å˜åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">6.2.</span> <span class="toc-text">ç›¸å…³æ¦‚å¿µ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98%EF%BC%88Direct-Memory%EF%BC%89"><span class="toc-number">7.</span> <span class="toc-text">ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%90%86"><span class="toc-number">7.1.</span> <span class="toc-text">ç®¡ç†</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK-1-8-%E4%B8%AD-HotSpot-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.</span> <span class="toc-text">JDK 1.8 ä¸­ HotSpot å†…å­˜æ¨¡å‹</span></a></li></ol>
    </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header">
    <i 
      class="iconfont icon-wenzhang_huaban" 
      style="padding-right: 2px;">
    </i>Recent Posts
  </div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-28</div>
        <a href="/2022/06/28/java/AOP/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-28</div>
        <a href="/2022/06/28/java/SpringBoot%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-28</div>
        <a href="/2022/06/28/java/%E6%B3%A8%E8%A7%A3-Transactional/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-28</div>
        <a href="/2022/06/28/java/SpringMVC%20%E6%8B%A6%E6%88%AA%E5%99%A8/"><div class="recent-posts-item-content"></div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
          </div>
        </div>
      </div>
    </div>
     
    <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>
          Copyright Â©
          
            2017 -
          
          2022
        </span>
        &nbsp;
        <a 
          href="/" 
          class="footer-link">
          æ‡’èœ—ç‰›
        </a>
      </div>
    </div>

    
      <div class="footer-dsc">
        
          Powered by
          <a 
            href="https://hexo.io/" 
            class="footer-link" 
            target="_blank" 
            rel="nofollow noopener noreferrer">
            &nbsp;Hexo
          </a>
        
        
          <span>&nbsp;|&nbsp;</span>
        
        
          Theme -
          <a 
            href="https://github.com/theme-kaze" 
            class="footer-link" 
            target="_blank"
            rel="nofollow noopener noreferrer">
            &nbsp;Kaze
          </a>
        
      </div>
    
    
    
    
      <div class="footer-dsc">
        
        
        
      </div>
      
    
</footer> 
    
  <a 
    role="button" 
    id="scrollbutton" 
    class="basebutton" 
    aria-label="å›åˆ°é¡¶éƒ¨">
    <i class="iconfont icon-arrowleft button-icon"></i>
  </a>

<a 
  role="button" 
  id="menubutton"
  aria-label="menu button"
  class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a 
  role="button" 
  id="popbutton" 
  class="basebutton" 
  aria-label="æ§åˆ¶ä¸­å¿ƒ">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a 
  role="button" 
  id="darkbutton" 
  class="basebutton darkwidget" 
  aria-label="å¤œè‰²æ¨¡å¼">
  <i class="iconfont icon-weather button-icon"></i>
</a>
<a 
  role="button" 
  id="searchbutton" 
  class="basebutton searchwidget" 
  aria-label="æœç´¢">
  <i class="iconfont icon-search button-icon"></i>
</a> 
     
     
      

  
  
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
      };
    </script>
    
<script src="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js"></script>

  
 
     
     
      <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img')
    var i
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a')
      wrapper.setAttribute('href', img[i].getAttribute('data-src'))
      wrapper.setAttribute('aria-label', 'illustration')
      wrapper.style.cssText =
        'width: 100%; display: flex; justify-content: center;'
      if (img[i].alt) wrapper.dataset.caption = img[i].alt
      wrapper.dataset.nolink = true
      img[i].before(wrapper)
      wrapper.append(img[i])
      var divWrap = document.createElement('div')
      divWrap.classList.add('gallery')
      wrapper.before(divWrap)
      divWrap.append(wrapper)
    }
    baguetteBox.run('.gallery')
  }
</script>
<script>
  loadScript(
    "/js/lib/lightbox/baguetteBox.min.js",
    addImgLayout
  )
</script>
 
     
     
    <script src="/js/main.js"></script> 
    
      <script> 
        loadScript('/js/lib/busuanzi.min.js') 
      </script>
     
    
      <script>
        var addLazyload = function () {
          var observer = lozad('.lozad', {
            load: function (el) {
              el.srcset = el.getAttribute('data-src')
            },
            loaded: function (el) {
              el.classList.add('loaded')
            },
          })
          observer.observe()
        }
      </script>
      <script>
        loadScript('/js/lib/lozad.min.js', addLazyload)
      </script>
     
    
    
      <script>
        setTimeout(() => {localSearch("search.json")}, 0)
      </script>
    
  </body>
</html>
