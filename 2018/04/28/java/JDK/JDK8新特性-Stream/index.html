<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta 
    name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta 
    http-equiv="X-UA-Compatible" 
    content="ie=edge">
  <meta 
    name="theme-color" 
    content="#fff" 
    id="theme-color">
  <meta 
    name="description" 
    content="æ‡’æ‡’æ‡’èœ—ç‰›ğŸŒ">
  <link 
    rel="icon" 
    href="/img/little-prince.png">
  <title>Java-JDK8æ–°ç‰¹æ€§-Stream</title>
  
    
      <meta 
        property="og:title" 
        content="Java-JDK8æ–°ç‰¹æ€§-Stream">
    
    
      <meta 
        property="og:url" 
        content="https://lazy-snail.github.io/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/index.html">
    
    
      <meta 
        property="og:img" 
        content="/img/little-prince.png">
    
    
    
      <meta 
        property="og:type" 
        content="article">
      <meta 
        property="og:article:published_time" 
        content="2018-04-28">
      <meta 
        property="og:article:modified_time" 
        content="2022-06-21">
      <meta 
        property="og:article:author" 
        content="Neil">
      
        
          <meta 
            property="og:article:tag" 
            content="java">
        
          <meta 
            property="og:article:tag" 
            content="æ–°ç‰¹æ€§">
        
      
    
  
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
    function loadCSS(href, data, attr) {
      var sheet = document.createElement('link');
      sheet.ref = 'stylesheet';
      sheet.href = href;
      sheet.dataset[data] = attr;
      document.head.appendChild(sheet);
    }
    function changeCSS(cssFile, data, attr) {
      var oldlink = document.querySelector(data);
      var newlink = document.createElement("link");
      newlink.setAttribute("rel", "stylesheet");
      newlink.setAttribute("href", cssFile);
      newlink.dataset.prism = attr;
      document.head.replaceChild(newlink, oldlink);
    }
  </script>
  
    
      
      
      
      
        
        
        
        <script>
          function prismThemeChange() {
            if(document.getElementById('theme-color').dataset.mode === 'dark') {
              if(document.querySelector('[data-prism]')) {
                changeCSS('/js/lib/prism/prism-tomorrow.min.css', '[data-prism]', 'prism-tomorrow');
              } else {
                loadCSS('/js/lib/prism/prism-tomorrow.min.css', 'prism', 'prism-tomorrow');
              }
            } else {
              if(document.querySelector('[data-prism]')) {
                changeCSS('/js/lib/prism/prism.min.css', '[data-prism]', 'prism');
              } else {
                loadCSS('/js/lib/prism/prism.min.css', 'prism', 'prism');
              }
            }
          }
          prismThemeChange()
        </script>
      
      
        
        <link rel="stylesheet" href="/js/lib/prism/prism-line-numbers.min.css">
      
    
  
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
  </script>
  
    <script>
      var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
        prismThemeChange();
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
        prismThemeChange();
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
        document.getElementById('theme-color').dataset.mode = getCssMediaQuery();
        prismThemeChange();
      }
    };
    setDarkmode();
    </script>
  
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  
    <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.js" as="script">
    <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.css" as="style" >
  
  
    <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
    
    <link rel="prefetch" href="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js" as="script">
  
  
  
  
  <link rel="stylesheet" href="/css/main.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">
  
    <link rel="stylesheet" href="/js/lib/lightbox/baguetteBox.min.css">
  
<meta name="generator" content="Hexo 6.1.0"></head>

  <body>
    <div class="wrapper">
       
      <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
        <img 
          class="navbar-logo-img"
          width="32"
          height="32"
          src="/img/little-prince.png" 
          alt="blog logo">
      
      <span class="navbar-logo-dsc">æ‡’èœ—ç‰›</span>
    </span>
  </div>
  <div class="navbar-menu">
    
      <a 
        href="/" 
        class="navbar-menu-item">
        
          Home
        
      </a>
    
      <a 
        href="/archives" 
        class="navbar-menu-item">
        
          Archive
        
      </a>
    
      <a 
        href="/tags" 
        class="navbar-menu-item">
        
          Tags
        
      </a>
    
      <a 
        href="/categories" 
        class="navbar-menu-item">
        
          Categories
        
      </a>
    
      <a 
        href="/about" 
        class="navbar-menu-item">
        
          About
        
      </a>
    
    <a 
      class="navbar-menu-item darknavbar" 
      id="dark">
      <i class="iconfont icon-weather"></i>
    </a>
    <a 
      class="navbar-menu-item searchnavbar" 
      id="search">
      <i 
        class="iconfont icon-search" 
        style="font-size: 1.2rem; font-weight: 400;">
      </i>
    </a>
  </div>
</nav> 
      
      <div 
        id="local-search" 
        style="display: none">
        <input
          class="navbar-menu-item"
          id="search-input"
          placeholder="è¯·è¾“å…¥æœç´¢å†…å®¹..." />
        <div id="search-content"></div>
      </div>
      
      <div class="section-wrap">
        <div class="container">
          <div class="columns">
            <main class="main-column">
<article class="card card-content">
  <header>
    <h1 class="post-title">
      Java-JDK8æ–°ç‰¹æ€§-Stream
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2018-04-28T14:49:33.000Z">
      <i 
        class="iconfont icon-calendar" 
        style="margin-right: 2px;">
      </i>
      <span>2018-04-28</span>
    </time>
    
      <span class="dot"></span>
      
        <a 
          href="/categories/java/" 
          class="post-meta-link">
          java
        </a>
      
    
    
      <span class="dot"></span>
      <span>3.5k words</span>
    
  </div>
  
    <div 
      class="post-meta post-show-meta" 
      style="margin-top: -10px;">
      <div style="display: flex; align-items: center;">
        <i 
          class="iconfont icon-biaoqian" 
          style="margin-right: 2px; font-size: 1.15rem;">
        </i>
        
          
          <a 
            href="/tags/java/" 
            class="post-meta-link">
            java
          </a>
        
          
            <span class="dot"></span>
          
          <a 
            href="/tags/%E6%96%B0%E7%89%B9%E6%80%A7/" 
            class="post-meta-link">
            æ–°ç‰¹æ€§
          </a>
        
      </div>
    </div>
  
  </header>
  <div 
    id="section" 
    class="post-content">
    <p>[toc]</p>
<h2 id="Stream-API"><a href="#Stream-API" class="headerlink" title="Stream API"></a>Stream API</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>Stream API (java.util.stream)æŠŠçœŸæ­£çš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼å¼•å…¥åˆ° java ä¸­ã€‚è¿™é‡Œçš„ Stream å’Œ I&#x2F;O æµä¸åŒï¼Œå®ƒæ›´åƒå…·æœ‰ Iterable çš„é›†åˆï¼Œä½†è¡Œä¸ºå’Œé›†åˆç±»åˆæœ‰æ‰€ä¸åŒã€‚<br>å®˜æ–¹æè¿°ï¼šA sequence of elements supporting sequential &amp; parallel aggregate operations. å¯ä»¥ç†è§£ä¸ºï¼š</p>
<ul>
<li>Stream æ˜¯å…ƒç´ çš„é›†åˆï¼Œè¿™è®©å®ƒçœ‹èµ·æ¥ç±»ä¼¼ Iteratorï¼›</li>
<li>æ”¯æŒé¡ºåºæˆ–å¹¶è¡Œæ–¹å¼è¿›è¡Œèšåˆæ“ä½œã€‚</li>
</ul>
<p>å¯ä»¥æŠŠ Stream å½“ä½œä¸€ä¸ªé«˜çº§ç‰ˆæœ¬çš„ Iteratorï¼šå¯¹äº Iteratorï¼Œç”¨æˆ·åªèƒ½æŒ‰é¡ºåºä¸€ä¸ªä¸€ä¸ªåœ°éå†å…ƒç´ ï¼Œè¿‡ç¨‹ä¸­å¯¹å…ƒç´ æ‰§è¡ŒæŸäº›æ“ä½œï¼›è€Œå¯¹äº Streamï¼Œç”¨æˆ·åªè¦ç»™å‡ºéœ€è¦å¯¹å…ƒç´ æ‰§è¡Œçš„æ“ä½œï¼Œå¦‚â€œè¿‡æ»¤æ‰é•¿åº¦å¤§äº 10 çš„å­—ç¬¦ä¸²â€ã€â€œè·å–æ¯ä¸ªå­—ç¬¦ä¸²çš„é¦–å­—æ¯â€ç­‰ï¼Œå…·ä½“è¿™äº›æ“ä½œå¦‚ä½•åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œåˆ™æ˜¯ Stream æœ¬èº«éœ€è¦å®Œæˆçš„å·¥ä½œã€‚<br>egï¼šè·å–ä¸€ä¸ª List ä¸­å…ƒç´ ä¸ä¸º null çš„ä¸ªæ•°ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> nums <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
nums<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>num <span class="token operator">-></span> num <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>æµæä¾›äº†æµç•…çš„ APIï¼Œå¯ä»¥è¿›è¡Œæ•°æ®è½¬æ¢å’Œå¯¹ç»“æœæ‰§è¡ŒæŸäº›æ“ä½œï¼Œè¿™äº›æµæ“ä½œæ—¢å¯ä»¥æ˜¯â€œä¸­é—´çš„â€ï¼Œä¹Ÿå¯ä»¥æ˜¯â€œæœ«ç«¯çš„â€ï¼š</p>
<ul>
<li><strong>ä¸­é—´çš„ï¼š</strong><br>ä¸­é—´çš„æ“ä½œä¿æŒæµæ‰“å¼€çŠ¶æ€ï¼Œå¹¶å…è®¸åç»­çš„æ“ä½œï¼Œe.g. filter() å’Œ map() æ–¹æ³•å°±æ˜¯ä¸­é—´çš„æ“ä½œã€‚è¿™äº›æ“ä½œçš„è¿”å›æ•°æ®ç±»å‹è¿˜æ˜¯æµï¼Œè¿”å›å½“å‰çš„æµä»¥ä¾¿ä¸²è”æ›´å¤šçš„æ“ä½œã€‚ä¸­é—´æ“ä½œæ˜¯å»¶è¿Ÿï¼ˆlazyï¼‰çš„ï¼›</li>
<li><strong>æœ«ç«¯çš„ï¼š</strong><br>æœ«ç«¯çš„æ“ä½œå¿…é¡»æ˜¯å¯¹æµçš„æœ€ç»ˆæ“ä½œï¼Œå½“ä¸€ä¸ªæœ«ç«¯æ“ä½œè¢«è°ƒç”¨ï¼Œæµè¢«â€œæ¶ˆè€—â€å¹¶ä¸”ä¸å¯å†ä½¿ç”¨ã€‚egï¼šsum() æ–¹æ³•å°±æ˜¯ä¸€ä¸ªæœ«ç«¯æ“ä½œã€‚æœ«ç«¯æ“ä½œä¼šç«‹å³å¼€å§‹æµä¸­å…ƒç´ çš„å¤„ç†ã€‚</li>
</ul>
<h3 id="æµæ“ä½œç‰¹æ€§ï¼š"><a href="#æµæ“ä½œç‰¹æ€§ï¼š" class="headerlink" title="æµæ“ä½œç‰¹æ€§ï¼š"></a>æµæ“ä½œç‰¹æ€§ï¼š</h3><ul>
<li>æœ‰çŠ¶æ€çš„ï¼šæœ‰çŠ¶æ€çš„æ“ä½œç»™æµå¢åŠ äº†ä¸€äº›æ–°çš„å±æ€§ï¼Œå¦‚ï¼šå…ƒç´ çš„å”¯ä¸€æ€§&#x2F;å…ƒç´ çš„æœ€å¤§æ•°é‡&#x2F;ä¿è¯å…ƒç´ ä»¥æ’åºçš„æ–¹å¼è¢«å¤„ç†ã€‚è¿™å¯¼è‡´æ¯”æ— çŠ¶æ€çš„ä¸­é—´æ“ä½œä»£ä»·æ›´å¤§ï¼›</li>
<li>çŸ­è·¯ï¼šçŸ­è·¯æ“ä½œå…è®¸å¯¹æµçš„æ“ä½œå°½æ—©åœæ­¢ï¼Œè€Œä¸å»æ£€æŸ¥æ‰€æœ‰çš„å…ƒç´ ï¼ˆè¿™è·Ÿ &amp;&amp; æ¡ä»¶åˆ¤æ–­ç±»ä¼¼ï¼‰ã€‚è¿™æ˜¯å¯¹æ— é™æµç‰¹æ®Šè®¾è®¡çš„ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœå¯¹æµçš„æ“ä½œæ²¡æœ‰çŸ­è·¯ï¼Œé‚£ä¹ˆä»£ç å¯èƒ½æ— æ³•ç»ˆæ­¢ï¼›</li>
<li>ä¸­é—´çš„æ“ä½œï¼ˆAPI æ–¹æ³•ï¼‰ï¼›</li>
<li>æœ«ç«¯çš„æ“ä½œï¼ˆAPI æ–¹æ³•ï¼‰ã€‚</li>
</ul>
<h3 id="å¤„ç†ä¸€ä¸ªæµçš„åŸºæœ¬æ­¥éª¤ï¼š"><a href="#å¤„ç†ä¸€ä¸ªæµçš„åŸºæœ¬æ­¥éª¤ï¼š" class="headerlink" title="å¤„ç†ä¸€ä¸ªæµçš„åŸºæœ¬æ­¥éª¤ï¼š"></a>å¤„ç†ä¸€ä¸ªæµçš„åŸºæœ¬æ­¥éª¤ï¼š</h3><img src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95.png" class title="JDK1.8-Streamé€šç”¨è¯­æ³•" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95.png" class="lozad post-image">
<h4 id="1-åˆ›å»º-Stream"><a href="#1-åˆ›å»º-Stream" class="headerlink" title="1. åˆ›å»º Stream"></a>1. åˆ›å»º Stream</h4><p>å¸¸ç”¨é€”å¾„æœ‰ä¸¤ç§ï¼š</p>
<ol>
<li><p>é€šè¿‡ Stream æ¥å£çš„é™æ€å·¥å‚æ–¹æ³•ï¼š<br>ã€€ã€€ä¸‰ç§æ–¹å¼ï¼š<br>ã€€ã€€a. <strong>of() æ–¹æ³•</strong><br>ã€€ã€€ã€€ã€€æ¥å—å•ä¸€å€¼å‚æ•°ï¼š<br>ã€€ã€€ ã€€ã€€<pre class="line-numbers language-java" data-language="java"><code class="language-java">ã€€ã€€ ã€€ã€€<span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span>ï¼š<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> stringStream <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"lazysnail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><br>ã€€ã€€ ã€€ã€€æ¥å—å˜é•¿å‚æ•°ï¼š<br>ã€€ã€€ ã€€ã€€<pre class="line-numbers language-java" data-language="java"><code class="language-java">ã€€ã€€ ã€€ã€€<span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>values<span class="token punctuation">)</span>ï¼š<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> integerStream <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><br>ã€€ã€€b. <strong>generator() æ–¹æ³•</strong><br>ã€€ã€€ã€€ã€€ç”Ÿæˆä¸€ä¸ªæ— é™é•¿åº¦çš„ Streamï¼Œå…¶å…ƒç´ çš„ç”Ÿæˆæ˜¯é€šè¿‡ç»™å®šçš„ Supplierï¼ˆè¯¥æ¥å£å¯ä»¥çœ‹ä½œä¸€ä¸ªå¯¹è±¡çš„å·¥å‚ï¼Œæ¯æ¬¡è°ƒç”¨è¿”å›ä¸€ä¸ªç»™å®šç±»å‹çš„å¯¹è±¡ï¼‰ï¼š<br>ã€€ã€€ã€€ã€€<pre class="line-numbers language-java" data-language="java"><code class="language-java">ã€€ã€€ã€€ã€€<span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>  e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
ã€€ã€€ã€€ã€€<span class="token comment">// æ™®é€šè¡¨ç°å½¢å¼</span>
ã€€ã€€ã€€ã€€<span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
ã€€ã€€ã€€ã€€    <span class="token annotation punctuation">@Override</span>
ã€€ã€€ã€€ã€€    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        ã€€ã€€ã€€ã€€<span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ã€€ã€€ã€€ã€€<span class="token punctuation">&#125;</span>
ã€€ã€€ã€€ã€€<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ã€€ã€€ã€€ã€€<span class="token comment">// lambda è¡¨è¾¾å¼å½¢å¼</span>
ã€€ã€€ã€€ã€€<span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ã€€ã€€ã€€ã€€<span class="token comment">// æ–¹æ³•å¼•ç”¨è¡¨è¾¾å½¢å¼</span>
ã€€ã€€ã€€ã€€<span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token operator">::</span><span class="token function">random</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>ã€€ã€€ã€€ã€€ä»¥ä¸Šä¸‰ç§æ–¹å¼ä½œç”¨ç›¸åŒï¼Œæ‡’åŠ è½½ç”Ÿæˆæ— é™é•¿åº¦çš„æµï¼Œä¸€èˆ¬ä¼šé…åˆ limit() æ–¹æ³•è§¦å‘çŸ­è·¯ã€‚<br>ã€€ã€€c. <strong>iterate() æ–¹æ³•</strong><br>ã€€ã€€ã€€ã€€åŒæ ·ç”Ÿæˆæ— é™é•¿åº¦çš„ Streamï¼Œå’Œ generator ä¸åŒçš„æ˜¯ï¼Œå…¶å…ƒç´ çš„ç”Ÿæˆæ˜¯é‡å¤å¯¹ç»™å®šçš„ç§å­å€¼ï¼ˆseedï¼‰è°ƒç”¨æŒ‡å®šå‡½æ•°æ¥ç”Ÿæˆçš„ï¼Œå…ƒç´ å¯ä»¥è®¤ä¸ºæ˜¯ï¼šseed, f(seed), f(f(seed)), â€¦<br>ã€€ã€€ã€€ã€€<pre class="line-numbers language-java" data-language="java"><code class="language-java">ã€€ã€€ã€€ã€€<span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span><span class="token function">iterate</span><span class="token punctuation">(</span><span class="token class-name">T</span> seed<span class="token punctuation">,</span> <span class="token class-name">UnaryOperator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> f<span class="token punctuation">)</span><span class="token punctuation">;</span> e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
ã€€ã€€ã€€ã€€<span class="token comment">// å…ˆè·å–ä¸€ä¸ªæ— é™é•¿çš„æ­£æ•´æ•°é›†åˆ Streamï¼Œç„¶åæ‰“å°å‰ 10 ä¸ªï¼š</span>
ã€€ã€€ã€€ã€€<span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">iterate</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> item <span class="token operator">-></span> item <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><br>ã€€ã€€ã€€ã€€åŒæ ·éœ€è¦é…åˆ limit() æ–¹æ³•ã€‚</p>
</li>
<li><p>é€šè¿‡ Colletcion æ¥å£çš„é»˜è®¤æ–¹æ³• stream()ï¼ŒæŠŠä¸€ä¸ª Collection å¯¹è±¡è½¬æ¢æˆ Streamã€‚<br>ã€€ã€€Collection æ¥å£æœ‰ä¸ª stream æ–¹æ³•ï¼ˆSince 1.8ï¼‰ï¼Œå…¶æ‰€æœ‰å®ç°ç±»éƒ½å¯ä»¥è·å–å¯¹åº”çš„ Stream å¯¹è±¡ï¼š<br>ã€€ã€€ã€€ã€€<pre class="line-numbers language-java" data-language="java"><code class="language-java">ã€€ã€€ã€€ã€€<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> stream <span class="token operator">=</span> collection<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p>
</li>
</ol>
<h4 id="2-è½¬æ¢-Stream"><a href="#2-è½¬æ¢-Stream" class="headerlink" title="2. è½¬æ¢ Stream"></a>2. è½¬æ¢ Stream</h4><p><strong>æ‰§è¡Œä¸€ä¸ª&#x2F;å¤šä¸ªä¸­é—´æ“ä½œï¼Œæ¯æ¬¡è½¬æ¢éƒ½ä¸æ”¹å˜åŸæœ‰ Streamï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„ Stream å¯¹è±¡</strong></p>
<ul>
<li><strong>ä¸­é—´çš„æ“ä½œï¼ˆAPI æ–¹æ³•ï¼‰ï¼š</strong><br>ã€€ã€€distinct()ï¼šæ ¹æ® .equals() çš„è¡Œä¸ºæ’é™¤æ‰€æœ‰é‡å¤å…ƒç´ ï¼Œæœ‰çŠ¶æ€çš„æ“ä½œï¼›<br>ã€€ã€€<img src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8Bdistinct.png" class title="distinct" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8Bdistinct.png" class="lozad post-image"><br>ã€€ã€€filter()ï¼šè¿‡æ»¤æ‰€æœ‰ä¸æ–­è¨€ä¸åŒ¹é…çš„å…ƒç´ ï¼›<br>ã€€ã€€<img src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8Bfilter.png" class title="filter" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8Bfilter.png" class="lozad post-image"></li>
</ul>
<p>ã€€ã€€map()ï¼šé€šè¿‡ Function å¯¹å…ƒç´ æ‰§è¡Œä¸€å¯¹ä¸€çš„è½¬æ¢ã€‚æœ‰ 3 ä¸ªå˜ç§ï¼šmapToInt()ã€mapToLong()ã€mapToDouble()ï¼Œå³æŠŠåŸå§‹ Stream è½¬æ¢æˆä¸€ä¸ªå¯¹åº”ç±»å‹çš„æ–° Streamï¼Œå¯å…é™¤è‡ªåŠ¨è£…ç®±&#x2F;æ‹†ç®±çš„é¢å¤–æ¶ˆè€—ï¼›<br>ã€€ã€€<img src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8Bmap.png" class title="map" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8Bmap.png" class="lozad post-image"></p>
<p>ã€€ã€€flatMap()ï¼šé€šè¿‡ FlatMapper å°†æ¯ä¸ªå…ƒç´ è½¬å˜ä¸ºæ— æˆ–æ›´å¤šçš„å…ƒç´ ï¼Œå³ï¼Œæ¯ä¸ªå…ƒç´ éƒ½è½¬æ¢ä¸ºä¸€ä¸ªæ–° Stream å¯¹è±¡ï¼Œå†å°†å­ Stream çš„å…ƒç´ å‹ç¼©åˆ°çˆ¶é›†åˆä¸­ï¼›<br>ã€€ã€€<img src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8BflatMap.png" class title="flatMap" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8BflatMap.png" class="lozad post-image"></p>
<p>ã€€ã€€limit()ï¼šæˆªæ–­ï¼Œä¿è¯åç»­çš„æ“ä½œæ‰€èƒ½çœ‹åˆ°çš„å…ƒç´ çš„æœ€å¤§æ•°é‡ï¼Œæœ‰çŠ¶æ€çš„çŸ­è·¯æ“ä½œï¼›<br>ã€€ã€€<img src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8Blimit.png" class title="limit" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8Blimit.png" class="lozad post-image"></p>
<p>ã€€ã€€skip()ï¼šè¿”å›ä¸€ä¸ªä¸¢å¼ƒåŸ Stream å‰ N ä¸ªå…ƒç´ åå‰©ä¸‹çš„å…ƒç´ ç»„æˆçš„æ–° Streamï¼›<br>ã€€ã€€<img src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8Bskip.png" class title="skip" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8Bskip.png" class="lozad post-image"></p>
<p>ã€€ã€€peek()ï¼šç”Ÿæˆä¸€ä¸ªåŒ…å«åŸ Stream çš„æ–° Streamï¼ŒåŒæ—¶æä¾›ä¸€ä¸ªæ¶ˆè´¹å‡½æ•°ï¼ˆConsumer å®ä¾‹ï¼‰ï¼Œæ–° Stream æ¯ä¸ªå…ƒç´ è¢«æ¶ˆè´¹çš„æ—¶å€™éƒ½æ‰§è¡Œç»™å®šçš„æ¶ˆè´¹å‡½æ•°ã€‚ä¸»è¦ç”¨äºè°ƒè¯•ï¼›<br>ã€€ã€€<img src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8Bpeek.png" class title="peek" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/JDK1.8-Stream%E4%B9%8Bpeek.png" class="lozad post-image"></p>
<p>ã€€ã€€sorted()ï¼šç¡®ä¿æµä¸­çš„å…ƒç´ åœ¨åç»­çš„æ“ä½œä¸­ï¼ŒæŒ‰ç…§æ¯”è¾ƒå™¨ï¼ˆComparatorï¼‰å†³å®šçš„é¡ºåºè®¿é—®ï¼Œæœ‰çŠ¶æ€çš„æ“ä½œï¼›<br>ã€€ã€€substream()ï¼šç¡®ä¿åç»­çš„æ“ä½œåªèƒ½çœ‹åˆ°ä¸€ä¸ªèŒƒå›´çš„ï¼ˆæ ¹æ® indexï¼‰å…ƒç´ ã€‚æœ‰ä¸¤ç§å½¢å¼ï¼šæœ‰å¼€å§‹ç´¢å¼•çš„ã€æœ‰ç»“æŸç´¢å¼•çš„ï¼ŒäºŒè€…éƒ½æ˜¯æœ‰çŠ¶æ€çš„æ“ä½œï¼Œæœ‰ç»“æŸç´¢å¼•çš„åŒæ—¶ä¹Ÿæ˜¯çŸ­è·¯æ“ä½œã€‚</p>
<p><strong>æ€§èƒ½é—®é¢˜</strong><br>å¸¸è§„æ“ä½œå¯èƒ½æ˜¯ï¼šå¦‚å¯¹ Iterable é›†åˆ(N ä¸ªå…ƒç´ )è¿›è¡Œä¸€ç³»åˆ—æ“ä½œï¼Œæ¯æ¬¡éƒ½å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œç›¸åº”æ“ä½œï¼Œè¿™æ ·çš„éå†éœ€è¦ k æ¬¡ï¼ˆk ä¸ºå¯¹æ¯ä¸ªå…ƒç´ æ“ä½œçš„æ¬¡æ•°ï¼‰ï¼Œå³ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(Nk)ã€‚è€Œï¼ŒStream æä¾›çš„è½¬æ¢æ“ä½œåˆ™ä¸åŒï¼šStream çš„ä¸­é—´è½¬æ¢æ“ä½œéƒ½æ˜¯ lazy çš„ï¼š<strong>å¤šä¸ªè½¬æ¢èåˆåˆ°èšåˆé˜¶æ®µï¼ˆreduce&#x2F;foldï¼‰é€šè¿‡ä¸€æ¬¡å¾ªç¯å®Œæˆã€‚i.e. Stream é‡Œæœ‰ä¸ªæ“ä½œå‡½æ•°çš„é›†åˆï¼Œæ¯ä¸ªè½¬æ¢æ“ä½œå°±æ˜¯æŠŠè½¬æ¢å‡½æ•°æ”¾å…¥åˆ°è¿™ä¸ªé›†åˆä¸­ï¼Œåœ¨èšåˆæ“ä½œçš„æ—¶å€™ï¼Œå¾ªç¯è¿™ä¸ªé›†åˆï¼Œå¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œè¯¥é›†åˆæ“ä½œã€‚</strong></p>
<h4 id="3-èšåˆ-x2F-æŠ˜å ï¼ˆReduce-x2F-Foldï¼‰"><a href="#3-èšåˆ-x2F-æŠ˜å ï¼ˆReduce-x2F-Foldï¼‰" class="headerlink" title="3. èšåˆ&#x2F;æŠ˜å ï¼ˆReduce&#x2F;Foldï¼‰"></a>3. èšåˆ&#x2F;æŠ˜å ï¼ˆReduce&#x2F;Foldï¼‰</h4><p><strong>æ‰§è¡Œä¸€ä¸ªæœ«ç«¯æ“ä½œï¼Œi.e. å¯¹ Stream è¿›è¡Œèšåˆæ“ä½œï¼Œè·å¾—ç»“æœ</strong>ã€‚æ¥å—ä¸€ä¸ªå…ƒç´ åºåˆ—ä½œä¸ºè¾“å…¥ï¼Œåå¤ä½¿ç”¨æŸä¸ªèšåˆæ“ä½œï¼ŒæŠŠåºåˆ—ä¸­çš„å…ƒç´ èšåˆæˆä¸€ä¸ªæ€»çš„ç»“æœã€‚e.g. æŸ¥æ‰¾ä¸€ä¸ªæ•°å­—åˆ—è¡¨çš„æ€»å’Œæˆ–æœ€å€¼ã€æŠŠè¿™äº›æ•°å­—ç´¯ç§¯æˆä¸€ä¸ª List å¯¹è±¡ç­‰ã€‚</p>
<ul>
<li>Stream æ¥å£é€šç”¨çš„èšåˆæ“ä½œï¼šreduce()ã€collect()ç­‰ï¼›</li>
<li>ç‰¹å®šç”¨é€”çš„èšåˆæ“ä½œï¼šsum()ã€count()ç­‰ï¼›<br>Noteï¼šsum() æ–¹æ³•åªæœ‰ IntStreamã€LongStreamã€DoubleStream çš„å®ä¾‹æ‰æ‹¥æœ‰ã€‚</li>
</ul>
<p><strong>æœ«ç«¯çš„æ“ä½œï¼ˆAPI æ–¹æ³•ï¼‰ï¼š</strong><br>ã€€ã€€forEach()ï¼šå¯¹æµä¸­æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€äº›æ“ä½œï¼›<br>ã€€ã€€toArray()ï¼šå°†æµä¸­çš„å…ƒç´ å€¾å€’å…¥ä¸€ä¸ªæ•°ç»„ï¼›<br>ã€€ã€€reduce()ï¼šé€šè¿‡ä¸€ä¸ªäºŒè¿›åˆ¶æ“ä½œå°†æµä¸­çš„å…ƒç´ åˆå¹¶åˆ°ä¸€èµ·ï¼›<br>ã€€ã€€collect()ï¼šå°†æµä¸­çš„å…ƒç´ å€¾å€’å…¥æŸäº›å®¹å™¨ï¼Œe.g. ä¸€ä¸ª Collection æˆ– Mapï¼›<br>ã€€ã€€min()ï¼šæ ¹æ®ä¸€ä¸ªæ¯”è¾ƒå™¨æ‰¾åˆ°æµä¸­å…ƒç´ çš„æœ€å°å€¼ï¼›<br>ã€€ã€€max()ï¼šæ ¹æ®ä¸€ä¸ªæ¯”è¾ƒå™¨æ‰¾åˆ°æµä¸­å…ƒç´ çš„æœ€å¤§å€¼ï¼›<br>ã€€ã€€count()ï¼šè®¡ç®—æµä¸­å…ƒç´ çš„æ•°é‡ï¼›<br>ã€€ã€€anyMatch()ï¼šåˆ¤æ–­æµä¸­æ˜¯å¦ <strong>è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ </strong> åŒ¹é…æ–­è¨€ï¼ŒçŸ­è·¯æ“ä½œï¼›<br>ã€€ã€€allMatch()ï¼šåˆ¤æ–­æµä¸­æ˜¯å¦ <strong>æ¯ä¸€ä¸ªå…ƒç´ éƒ½</strong> åŒ¹é…æ–­è¨€ï¼ŒçŸ­è·¯æ“ä½œï¼›<br>ã€€ã€€noneMatch()ï¼šåˆ¤æ–­æµä¸­æ˜¯å¦ <strong>æ²¡æœ‰ä»»ä½•ä¸€ä¸ªå…ƒç´ </strong> åŒ¹é…æ–­è¨€ï¼ŒçŸ­è·¯æ“ä½œï¼›<br>ã€€ã€€findFirst()ï¼šæŸ¥æ‰¾æµä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ŒçŸ­è·¯æ“ä½œï¼›<br>ã€€ã€€findAny()ï¼šæŸ¥æ‰¾æµä¸­ä»»æ„å…ƒç´ ï¼Œå¯¹æŸäº›æµä»£ä»·å¯èƒ½æ¯” findFirst ä½ï¼ŒçŸ­è·¯æ“ä½œã€‚</p>
<p><strong>èšåˆåˆ†ç±»</strong><br><strong>å¯å˜èšåˆ</strong>ï¼šæŠŠè¾“å…¥çš„å…ƒç´ ç´¯ç§¯åˆ°ä¸€ä¸ªå¯å˜çš„å®¹å™¨ä¸­ï¼Œe.g. Collectionã€StringBuilder ç­‰ã€‚<br>collect()æ–¹æ³•å¯ä»¥æŠŠStreamä¸­çš„æ‰€æœ‰å…ƒç´ æ”¶é›†åˆ°ä¸€ä¸ªç»“æœå®¹å™¨ä¸­ï¼ˆe.g. Collectionï¼‰</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// Supplier supplieræ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„å®¹å™¨ï¼›BiConsumer accumulatorä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œ</span>
<span class="token comment">// ç”¨æ¥æŠŠStreamä¸­çš„å…ƒç´ æ·»åŠ åˆ°ç»“æœå®¹å™¨ä¸­ï¼›BiConsumer combinerè¿˜æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œ</span>
<span class="token comment">// ç”¨æ¥æŠŠä¸­é—´çŠ¶æ€çš„å¤šä¸ªç»“æœå®¹å™¨åˆå¹¶æˆä¸ºä¸€ä¸ªï¼ˆå¹¶å‘çš„æ—¶å€™ä¼šç”¨åˆ°ï¼‰ã€‚</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">A</span><span class="token punctuation">></span></span> <span class="token class-name">Rcollect</span><span class="token punctuation">(</span><span class="token class-name">Collector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">></span></span> collector<span class="token punctuation">)</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">></span></span> <span class="token class-name">R</span> <span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">></span></span> supplier<span class="token punctuation">,</span> <span class="token class-name">BiConsumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> accumulator<span class="token punctuation">,</span> <span class="token class-name">BiConsumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">></span></span> combiner<span class="token punctuation">)</span>

<span class="token comment">// e.g. å¯¹ä¸€ä¸ªå…ƒç´ æ˜¯Integerç±»å‹çš„Listï¼Œå…ˆè¿‡æ»¤æ‰å…¨éƒ¨çš„nullï¼Œç„¶åæŠŠå‰©ä¸‹çš„å…ƒç´ æ”¶é›†åˆ°ä¸€ä¸ªæ–°çš„Listä¸­ã€‚</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> nums <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> numsWithoutNull <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>num <span class="token operator">-></span> num <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>list<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token operator">-></span> list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>list1<span class="token punctuation">,</span> list2<span class="token punctuation">)</span> <span class="token operator">-></span> list1<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Note:</span>
    <span class="token comment">// ç¬¬ä¸€ä¸ªå‡½æ•°ç”Ÿæˆä¸€ä¸ªæ–°çš„ArrayListå®ä¾‹ï¼›</span>
    <span class="token comment">// ç¬¬äºŒä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å‰é¢ç”Ÿæˆçš„ArrayListå¯¹è±¡ï¼Œ</span>
    <span class="token comment">// ç¬¬äºŒä¸ªæ˜¯streamä¸­åŒ…å«çš„å…ƒç´ ï¼Œå‡½æ•°ä½“å°±æ˜¯æŠŠstreamä¸­çš„å…ƒç´ åŠ å…¥ArrayListå¯¹è±¡ä¸­ã€‚</span>
    <span class="token comment">// ç¬¬äºŒä¸ªå‡½æ•°è¢«åå¤è°ƒç”¨ç›´åˆ°åŸstreamçš„å…ƒç´ è¢«æ¶ˆè´¹å®Œæ¯•ï¼›</span>
    <span class="token comment">// ç¬¬ä¸‰ä¸ªå‡½æ•°ä¹Ÿæ˜¯æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¿™ä¸¤ä¸ªéƒ½æ˜¯ArrayListç±»å‹çš„ï¼Œ</span>
    <span class="token comment">// å‡½æ•°ä½“å°±æ˜¯æŠŠç¬¬äºŒä¸ªArrayListå…¨éƒ¨åŠ å…¥åˆ°ç¬¬ä¸€ä¸ªä¸­ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>å…¶ä»–èšåˆ</strong>ï¼š<br>reduce()ã€count()ã€sum()ç­‰æ–¹æ³•ã€‚</p>
<p>reduce()æ–¹æ³•æœ‰ä¸‰ç§å½¢å¼ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">reduce</span><span class="token punctuation">(</span><span class="token class-name">BinaryOperator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> accumulator<span class="token punctuation">)</span>
<span class="token class-name">T</span>  <span class="token function">reduce</span><span class="token punctuation">(</span><span class="token class-name">T</span> identity<span class="token punctuation">,</span> <span class="token class-name">BinaryOperator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> accumulator<span class="token punctuation">)</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">></span></span> <span class="token class-name">U</span> <span class="token function">reduce</span><span class="token punctuation">(</span><span class="token class-name">U</span> identity<span class="token punctuation">,</span> <span class="token class-name">BiFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">U</span><span class="token punctuation">></span></span> accumulator<span class="token punctuation">,</span> <span class="token class-name">BinaryOperator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">></span></span> combiner<span class="token punctuation">)</span>

<span class="token comment">// e.g. ä¸€ä¸ªå‚æ•°çš„reduceæ–¹æ³•ï¼š</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> ints <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ints sum is: "</span> <span class="token operator">+</span> ints<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token operator">-></span> sum <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸Šæ¬¡å‡½æ•°æ‰§è¡Œçš„è¿”å›å€¼ï¼ˆä¹Ÿç§°ä¸ºä¸­é—´ç»“æœï¼‰ï¼Œ</span>
<span class="token comment">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯streamä¸­çš„å…ƒç´ ï¼Œè¿™ä¸ªå‡½æ•°æŠŠè¿™ä¸¤ä¸ªå€¼ç›¸åŠ ï¼Œ</span>
<span class="token comment">// å¾—åˆ°çš„å’Œä¼šè¢«èµ‹å€¼ç»™ä¸‹æ¬¡æ‰§è¡Œè¿™ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</span>
<span class="token comment">// ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼æ˜¯Streamçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯Streamçš„ç¬¬äºŒä¸ªå…ƒç´ ã€‚</span>
<span class="token comment">// è¿”å›ç±»å‹æ˜¯Optionalï¼Œè¿™æ˜¯Java8é˜²æ­¢å‡ºç°NPEçš„ä¸€ç§å¯è¡Œæ–¹æ³•ã€‚</span>

<span class="token comment">// e.g. ä¸¤ä¸ªå‚æ•°çš„reduceæ–¹æ³•ï¼š</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> ints <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"sum is: "</span> <span class="token operator">+</span> ints<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>sum<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token operator">-></span> sum <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å®ƒå…è®¸ç”¨æˆ·æä¾›ä¸€ä¸ªå¾ªç¯è®¡ç®—çš„åˆå§‹å€¼ï¼Œå¦‚æœStreamä¸ºç©ºï¼Œå°±ç›´æ¥è¿”å›è¯¥å€¼ã€‚</span>
<span class="token comment">// è¿™ä¸ªæ–¹æ³•ä¸ä¼šè¿”å›Optionalï¼Œå› ä¸ºå…¶ä¸ä¼šå‡ºç°nullå€¼ã€‚</span>

<span class="token comment">// e.g. count()æ–¹æ³•ç¤ºä¾‹ï¼š</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> ints <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"sum is:"</span> <span class="token operator">+</span> ints<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="Stream-ç¤ºä¾‹"><a href="#Stream-ç¤ºä¾‹" class="headerlink" title="Stream ç¤ºä¾‹"></a>Stream ç¤ºä¾‹</h3><p>ç”Ÿæˆæ–æ³¢é‚£å¥‘æ•°åˆ—ç¤ºä¾‹ï¼ˆåˆ©ç”¨Stream APIï¼Œå¯ä»¥è®¾è®¡æ›´åŠ ç®€å•çš„æ•°æ®æ¥å£ã€‚ï¼‰</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// ç”Ÿæˆæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œå®Œå…¨å¯ä»¥ç”¨ä¸€ä¸ªæ— ç©·æµè¡¨ç¤º</span>
<span class="token comment">// å—é™longå‹å¤§å°ï¼Œå¯ä»¥æ”¹ä¸ºBigIntegerã€‚</span>
<span class="token keyword">class</span> <span class="token class-name">FibonacciSupplier</span> <span class="token keyword">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">long</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">long</span> x <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        a <span class="token operator">=</span> b<span class="token punctuation">;</span>
        b <span class="token operator">=</span> x<span class="token punctuation">;</span>
        <span class="token keyword">return</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FibonacciStream</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> fibonacci <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FibonacciSupplier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fibonacci<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//å¦‚æœæƒ³å–å¾—æ•°åˆ—çš„å‰10é¡¹ï¼Œç”¨limit(10)ï¼Œå¦‚æœæƒ³å–å¾—æ•°åˆ—çš„ç¬¬20~30é¡¹,ç”¨skip()ï¼Œ</span>
        <span class="token comment">//é€šè¿‡collect()æ–¹æ³•æŠŠStreamå˜ä¸ºListã€‚è¯¥Listå­˜å‚¨çš„æ‰€æœ‰å…ƒç´ å°±å·²ç»æ˜¯è®¡ç®—å‡ºçš„ç¡®å®šçš„å…ƒç´ äº†.</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> fibonacci<span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="Stream-çš„ä¸²è¡Œå’Œå¹¶è¡Œ"><a href="#Stream-çš„ä¸²è¡Œå’Œå¹¶è¡Œ" class="headerlink" title="Stream çš„ä¸²è¡Œå’Œå¹¶è¡Œ"></a>Stream çš„ä¸²è¡Œå’Œå¹¶è¡Œ</h3><p>ä¸€ä¸ªæµå°±åƒä¸€ä¸ªåœ°å¸¦å™¨ï¼Œè¿™äº›å€¼æµè¿‡ï¼ˆéå†ï¼‰çš„è¿‡ç¨‹ä¸­æ¥å—æŸäº›å¤„ç†ã€‚æµæ”¯æŒä¸²è¡Œæˆ–å¹¶è¡Œï¼Œä¹Ÿå¯ä»¥ä»ä¸€ç§æ–¹å¼åˆ‡æ¢åˆ°å¦ä¸€ç§æ–¹å¼ï¼Œä½¿ç”¨ stream.sequential() åˆ‡æ¢ä¸²è¡Œã€stream.parallel() åˆ‡æ¢å¹¶è¡Œï¼Œä¸²è¡Œæµåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šè¿ç»­æ“ä½œï¼Œå¹¶è¡Œæµå¯èƒ½å‡ºç°åœ¨å¤šä¸ªçº¿ç¨‹ä¸Šã€‚åœ¨å¹¶è¡ŒåŒ–ä¸€ä¸ªæµå‰ï¼Œéœ€è¦è€ƒè™‘å¾ˆå¤šç‰¹æ€§ï¼Œå…³äºæµã€å®ƒçš„æ“ä½œä»¥åŠæ•°æ®çš„ç›®æ ‡æ–¹é¢ç­‰ã€‚e.g. è®¿é—®é¡ºåºç¡®å®å¯¹æˆ‘æœ‰å½±å“å—ï¼Ÿæˆ‘çš„å‡½æ•°æ˜¯æ— çŠ¶æ€çš„å—ï¼Ÿæˆ‘çš„æµæœ‰è¶³å¤Ÿå¤§ï¼Œå¹¶ä¸”æˆ‘çš„æ“ä½œæœ‰è¶³å¤Ÿå¤æ‚ï¼Œè¿™äº›èƒ½ä½¿å¾—å¹¶è¡ŒåŒ–æ˜¯å€¼å¾—çš„å—ï¼Ÿ</p>
<h3 id="Stream-vs-Collection"><a href="#Stream-vs-Collection" class="headerlink" title="Stream vs Collection"></a>Stream vs Collection</h3><ul>
<li>Collection æ˜¯å…³äºé™æ­¢çš„æ•°æ®ç»“æ„ï¼Œè€Œ Stream æ˜¯æœ‰å…³åŠ¨è¯ç®—æ³•å’Œè®¡ç®—çš„ã€‚</li>
<li>Collection æ˜¯ä¸»è¦é¢å‘å†…å­˜ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼›Stream ä¸»è¦æ˜¯é¢å‘ CPUï¼Œé€šè¿‡ CPU å®ç°è®¡ç®—ã€‚</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆä¸åœ¨é›†åˆç±»å®ç°å…ƒç´ è¿­ä»£ç­‰æ“ä½œï¼Œè€Œæ˜¯å®šä¹‰äº†å…¨æ–°çš„Stream APIï¼Ÿ</strong><br>Oracleå®˜æ–¹ç»™å‡ºçš„è§£é‡Šï¼š</p>
<ol>
<li>é›†åˆç±»æŒæœ‰çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œéå¸¸å·¨å¤§çš„é›†åˆç±»ä¼šå ç”¨å¤§é‡çš„å†…å­˜ï¼Œè€ŒStreamçš„å…ƒç´ å´æ˜¯åœ¨è®¿é—®çš„æ—¶å€™æ‰è¢«è®¡ç®—å‡ºæ¥ï¼Œè¿™ç§â€œå»¶è¿Ÿè®¡ç®—â€çš„ç‰¹æ€§æœ‰ç‚¹ç±»ä¼¼Clojureçš„lazy-seqï¼Œå ç”¨å†…å­˜å¾ˆå°‘ã€‚</li>
<li>é›†åˆç±»çš„è¿­ä»£é€»è¾‘æ˜¯è°ƒç”¨è€…è´Ÿè´£ï¼Œé€šå¸¸æ˜¯forå¾ªç¯ï¼Œè€ŒStreamçš„è¿­ä»£æ˜¯éšå«åœ¨å¯¹Streamçš„å„ç§æ“ä½œä¸­ï¼Œe.g. map()ã€‚</li>
</ol>
<p>è¦ç†è§£â€œå»¶è¿Ÿè®¡ç®—â€ï¼Œä¸å¦¨åˆ›å»ºä¸€ä¸ªæ— ç©·å¤§å°çš„Streamï¼šå¦‚æœè¦è¡¨ç¤ºè‡ªç„¶æ•°é›†åˆï¼Œæ˜¾ç„¶ç”¨é›†åˆç±»æ˜¯ä¸å¯èƒ½å®ç°çš„ï¼Œå› ä¸ºè‡ªç„¶æ•°æœ‰æ— ç©·å¤šä¸ªã€‚ä½†æ˜¯Streamå¯ä»¥åšåˆ°ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
 * è‡ªç„¶æ•°é›†åˆçš„è§„åˆ™éå¸¸ç®€å•ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯å‰ä¸€ä¸ªå…ƒç´ çš„å€¼+1ã€‚
 * åå¤è°ƒç”¨get()ï¼Œå°†å¾—åˆ°ä¸€ä¸ªæ— ç©·æ•°åˆ—ï¼Œåˆ©ç”¨è¿™ä¸ªSupplierï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ— ç©·çš„Stream
 */</span>
<span class="token keyword">class</span> <span class="token class-name">NaturalSupplier</span> <span class="token keyword">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">long</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NaturalNum</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">/**
         * å¯¹è¿™ä¸ªStreamåšä»»ä½•map()ã€filter()ç­‰æ“ä½œéƒ½æ˜¯å®Œå…¨å¯ä»¥çš„ï¼Œè¿™è¯´æ˜Stream APIå¯¹Streamè¿›è¡Œè½¬æ¢å¹¶
         * ç”Ÿæˆä¸€ä¸ªæ–°çš„Streamå¹¶éå®æ—¶è®¡ç®—ï¼Œè€Œæ˜¯åšäº†å»¶è¿Ÿè®¡ç®—ã€‚
         * å½“ç„¶ï¼Œå¯¹è¿™ä¸ªæ— ç©·çš„Streamä¸èƒ½ç›´æ¥è°ƒç”¨forEach()ï¼Œè¿™æ ·ä¼šæ— é™æ‰“å°ä¸‹å»ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨limit()å˜æ¢ï¼Œ
         * æŠŠè¿™ä¸ªæ— ç©·Streamå˜æ¢ä¸ºæœ‰é™çš„Streamã€‚
         */</span>
        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> natural <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">NaturalSupplier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        natural<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sun_promise/article/details/51480257">Stream ç±»</a></p>

  </div>
  <div>
    
      <div 
        class="post-note note-warning copyright" 
        style="margin-top: 42px">
        <p>
          <span style="font-weight: bold;">ä½œè€…ï¼š</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="/about">
            Neil
          </a>
        </p>
        <p>
          <span style="font-weight: bold;">æ–‡ç« é“¾æ¥ï¼š</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="https://lazy-snail.github.io/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/">
            https://lazy-snail.github.io/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Stream/
          </a>
        </p>
        <p><span style="font-weight: bold;">ç‰ˆæƒå£°æ˜ï¼š</span>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„</p>
      </div>
    
  </div>
</article>
<div class="nav">
  
    <div class="nav-item-prev">
      <a 
        href="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-Lambda/" 
        class="nav-link">
        <i class="iconfont icon-left nav-prev-icon"></i>
        <div>
          <div class="nav-label">Prev</div>
          
            <div class="nav-title">JDK8æ–°ç‰¹æ€§-Lambda </div>
          
        </div>
      </a>
    </div>
  
  
    <div class="nav-item-next">
      <a 
        href="/2018/04/28/java/JDK/JDK8%E6%96%B0%E7%89%B9%E6%80%A7-%E6%8E%A5%E5%8F%A3%E5%8F%98%E5%8C%96/" 
        class="nav-link">
        <div>
          <div class="nav-label">Next</div>
          
            <div class="nav-title">Java-JDK8æ–°ç‰¹æ€§-æ¥å£å˜åŒ– </div>
          
        </div>
        <i class="iconfont icon-right nav-next-icon"></i>
      </a>
    </div>
  
</div>

<div 
  class="card card-content toc-card" 
  id="mobiletoc">
  <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Stream-API"><span class="toc-number">1.</span> <span class="toc-text">Stream API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">ç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E6%93%8D%E4%BD%9C%E7%89%B9%E6%80%A7%EF%BC%9A"><span class="toc-number">1.2.</span> <span class="toc-text">æµæ“ä½œç‰¹æ€§ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E4%B8%80%E4%B8%AA%E6%B5%81%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">1.3.</span> <span class="toc-text">å¤„ç†ä¸€ä¸ªæµçš„åŸºæœ¬æ­¥éª¤ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA-Stream"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. åˆ›å»º Stream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%BD%AC%E6%8D%A2-Stream"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. è½¬æ¢ Stream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%81%9A%E5%90%88-x2F-%E6%8A%98%E5%8F%A0%EF%BC%88Reduce-x2F-Fold%EF%BC%89"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. èšåˆ&#x2F;æŠ˜å ï¼ˆReduce&#x2F;Foldï¼‰</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream-%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.4.</span> <span class="toc-text">Stream ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream-%E7%9A%84%E4%B8%B2%E8%A1%8C%E5%92%8C%E5%B9%B6%E8%A1%8C"><span class="toc-number">1.5.</span> <span class="toc-text">Stream çš„ä¸²è¡Œå’Œå¹¶è¡Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream-vs-Collection"><span class="toc-number">1.6.</span> <span class="toc-text">Stream vs Collection</span></a></li></ol></li></ol>
</div></main>
            <aside class="left-column">
              
              <div class="card card-author">
                
  <img 
    src="/img/little-prince.png" 
    class="author-img"
    width="88"
    height="88"
    alt="author avatar">

<p class="author-name">Neil</p>
<p class="author-description">there's a will there's a way</p>
<div class="author-message">
  <a 
    class="author-posts-count" 
    href="/archives">
    <span>173</span>
    <span>Posts</span>
  </a>
  <a 
    class="author-categories-count" 
    href="/categories">
    <span>13</span>
    <span>Categories</span>
  </a>
  <a 
    class="author-tags-count" 
    href="/tags">
    <span>31</span>
    <span>Tags</span>
  </a>
</div>

              </div>
               <div class="sticky-tablet">
  
  
    <article class="display-when-two-columns spacer">
      <div class="card card-content toc-card">
        <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Stream-API"><span class="toc-number">1.</span> <span class="toc-text">Stream API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">ç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E6%93%8D%E4%BD%9C%E7%89%B9%E6%80%A7%EF%BC%9A"><span class="toc-number">1.2.</span> <span class="toc-text">æµæ“ä½œç‰¹æ€§ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E4%B8%80%E4%B8%AA%E6%B5%81%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">1.3.</span> <span class="toc-text">å¤„ç†ä¸€ä¸ªæµçš„åŸºæœ¬æ­¥éª¤ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA-Stream"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. åˆ›å»º Stream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%BD%AC%E6%8D%A2-Stream"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. è½¬æ¢ Stream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%81%9A%E5%90%88-x2F-%E6%8A%98%E5%8F%A0%EF%BC%88Reduce-x2F-Fold%EF%BC%89"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. èšåˆ&#x2F;æŠ˜å ï¼ˆReduce&#x2F;Foldï¼‰</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream-%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.4.</span> <span class="toc-text">Stream ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream-%E7%9A%84%E4%B8%B2%E8%A1%8C%E5%92%8C%E5%B9%B6%E8%A1%8C"><span class="toc-number">1.5.</span> <span class="toc-text">Stream çš„ä¸²è¡Œå’Œå¹¶è¡Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream-vs-Collection"><span class="toc-number">1.6.</span> <span class="toc-text">Stream vs Collection</span></a></li></ol></li></ol>
      </div>
    </article>
  
  
  <article class="card card-content categories-widget">
    <div class="categories-card">
  <div class="categories-header">
    <i 
      class="iconfont icon-fenlei" 
      style="padding-right: 2px;">
    </i>Categories
  </div>
  <div class="categories-list">
    
      <a href="/categories/Algs/">
        <div class="categories-list-item">
          Algs
          <span class="categories-list-item-badge">10</span>
        </div>
      </a>
    
      <a href="/categories/algs/">
        <div class="categories-list-item">
          algs
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/CN/">
        <div class="categories-list-item">
          CN
          <span class="categories-list-item-badge">10</span>
        </div>
      </a>
    
      <a href="/categories/CS/">
        <div class="categories-list-item">
          CS
          <span class="categories-list-item-badge">9</span>
        </div>
      </a>
    
      <a href="/categories/java/">
        <div class="categories-list-item">
          java
          <span class="categories-list-item-badge">61</span>
        </div>
      </a>
    
      <a href="/categories/middleware/">
        <div class="categories-list-item">
          middleware
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/backend/">
        <div class="categories-list-item">
          backend
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/tools/">
        <div class="categories-list-item">
          tools
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/DB/">
        <div class="categories-list-item">
          DB
          <span class="categories-list-item-badge">15</span>
        </div>
      </a>
    
      <a href="/categories/Daily/">
        <div class="categories-list-item">
          Daily
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/OS/">
        <div class="categories-list-item">
          OS
          <span class="categories-list-item-badge">14</span>
        </div>
      </a>
    
      <a href="/categories/cpp/">
        <div class="categories-list-item">
          cpp
          <span class="categories-list-item-badge">20</span>
        </div>
      </a>
    
      <a href="/categories/py/">
        <div class="categories-list-item">
          py
          <span class="categories-list-item-badge">3</span>
        </div>
      </a>
    
  </div>
</div>
  </article>
  
  <article class="card card-content tags-widget">
    <div class="tags-card">
  <div class="tags-header">
    <i 
      class="iconfont icon-biaoqian" 
      style="padding-right: 2px;">
    </i>hot tags
  </div>
  <div class="tags-list">
    
      <a 
        href="/tags/java/" 
        title="java">
        <div class="tags-list-item">java</div>
      </a>
    
      <a 
        href="/tags/cpp/" 
        title="cpp">
        <div class="tags-list-item">cpp</div>
      </a>
    
      <a 
        href="/tags/OS/" 
        title="OS">
        <div class="tags-list-item">OS</div>
      </a>
    
      <a 
        href="/tags/DB/" 
        title="DB">
        <div class="tags-list-item">DB</div>
      </a>
    
      <a 
        href="/tags/MySQL/" 
        title="MySQL">
        <div class="tags-list-item">MySQL</div>
      </a>
    
      <a 
        href="/tags/%E5%AE%B9%E5%99%A8/" 
        title="å®¹å™¨">
        <div class="tags-list-item">å®¹å™¨</div>
      </a>
    
      <a 
        href="/tags/%E5%B9%B6%E5%8F%91/" 
        title="å¹¶å‘">
        <div class="tags-list-item">å¹¶å‘</div>
      </a>
    
      <a 
        href="/tags/JVM/" 
        title="JVM">
        <div class="tags-list-item">JVM</div>
      </a>
    
      <a 
        href="/tags/CN/" 
        title="CN">
        <div class="tags-list-item">CN</div>
      </a>
    
      <a 
        href="/tags/Algs/" 
        title="Algs">
        <div class="tags-list-item">Algs</div>
      </a>
    
      <a 
        href="/tags/CS/" 
        title="CS">
        <div class="tags-list-item">CS</div>
      </a>
    
      <a 
        href="/tags/Q-A/" 
        title="Q&A">
        <div class="tags-list-item">Q&amp;A</div>
      </a>
    
      <a 
        href="/tags/%E6%96%B0%E7%89%B9%E6%80%A7/" 
        title="æ–°ç‰¹æ€§">
        <div class="tags-list-item">æ–°ç‰¹æ€§</div>
      </a>
    
      <a 
        href="/tags/%E7%BA%BF%E7%A8%8B/" 
        title="çº¿ç¨‹">
        <div class="tags-list-item">çº¿ç¨‹</div>
      </a>
    
      <a 
        href="/tags/Sort/" 
        title="Sort">
        <div class="tags-list-item">Sort</div>
      </a>
    
      <a 
        href="/tags/Linux/" 
        title="Linux">
        <div class="tags-list-item">Linux</div>
      </a>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
            <aside class="right-column">
              <div class="sticky-widescreen">
  
  
    <article class="card card-content toc-card">
      <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Stream-API"><span class="toc-number">1.</span> <span class="toc-text">Stream API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">ç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E6%93%8D%E4%BD%9C%E7%89%B9%E6%80%A7%EF%BC%9A"><span class="toc-number">1.2.</span> <span class="toc-text">æµæ“ä½œç‰¹æ€§ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E4%B8%80%E4%B8%AA%E6%B5%81%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">1.3.</span> <span class="toc-text">å¤„ç†ä¸€ä¸ªæµçš„åŸºæœ¬æ­¥éª¤ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA-Stream"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. åˆ›å»º Stream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%BD%AC%E6%8D%A2-Stream"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. è½¬æ¢ Stream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%81%9A%E5%90%88-x2F-%E6%8A%98%E5%8F%A0%EF%BC%88Reduce-x2F-Fold%EF%BC%89"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. èšåˆ&#x2F;æŠ˜å ï¼ˆReduce&#x2F;Foldï¼‰</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream-%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.4.</span> <span class="toc-text">Stream ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream-%E7%9A%84%E4%B8%B2%E8%A1%8C%E5%92%8C%E5%B9%B6%E8%A1%8C"><span class="toc-number">1.5.</span> <span class="toc-text">Stream çš„ä¸²è¡Œå’Œå¹¶è¡Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream-vs-Collection"><span class="toc-number">1.6.</span> <span class="toc-text">Stream vs Collection</span></a></li></ol></li></ol>
    </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header">
    <i 
      class="iconfont icon-wenzhang_huaban" 
      style="padding-right: 2px;">
    </i>Recent Posts
  </div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-21</div>
        <a href="/2022/06/21/java/spring/AOP/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-21</div>
        <a href="/2022/06/21/java/spring/SpringBoot%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-21</div>
        <a href="/2022/06/21/java/spring/ThreadLocal/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-21</div>
        <a href="/2022/06/21/java/spring/%E6%B3%A8%E8%A7%A3-Transactional/"><div class="recent-posts-item-content"></div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
          </div>
        </div>
      </div>
    </div>
     
    <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>
          Copyright Â©
          
            2017 -
          
          2022
        </span>
        &nbsp;
        <a 
          href="/" 
          class="footer-link">
          æ‡’èœ—ç‰›
        </a>
      </div>
    </div>

    
      <div class="footer-dsc">
        
          Powered by
          <a 
            href="https://hexo.io/" 
            class="footer-link" 
            target="_blank" 
            rel="nofollow noopener noreferrer">
            &nbsp;Hexo
          </a>
        
        
          <span>&nbsp;|&nbsp;</span>
        
        
          Theme -
          <a 
            href="https://github.com/theme-kaze" 
            class="footer-link" 
            target="_blank"
            rel="nofollow noopener noreferrer">
            &nbsp;Kaze
          </a>
        
      </div>
    
    
    
    
      <div class="footer-dsc">
        
        
        
      </div>
      
    
</footer> 
    
  <a 
    role="button" 
    id="scrollbutton" 
    class="basebutton" 
    aria-label="å›åˆ°é¡¶éƒ¨">
    <i class="iconfont icon-arrowleft button-icon"></i>
  </a>

<a 
  role="button" 
  id="menubutton"
  aria-label="menu button"
  class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a 
  role="button" 
  id="popbutton" 
  class="basebutton" 
  aria-label="æ§åˆ¶ä¸­å¿ƒ">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a 
  role="button" 
  id="darkbutton" 
  class="basebutton darkwidget" 
  aria-label="å¤œè‰²æ¨¡å¼">
  <i class="iconfont icon-weather button-icon"></i>
</a>
<a 
  role="button" 
  id="searchbutton" 
  class="basebutton searchwidget" 
  aria-label="æœç´¢">
  <i class="iconfont icon-search button-icon"></i>
</a> 
     
     
      

  
  
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
      };
    </script>
    
<script src="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js"></script>

  
 
     
     
      <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img')
    var i
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a')
      wrapper.setAttribute('href', img[i].getAttribute('data-src'))
      wrapper.setAttribute('aria-label', 'illustration')
      wrapper.style.cssText =
        'width: 100%; display: flex; justify-content: center;'
      if (img[i].alt) wrapper.dataset.caption = img[i].alt
      wrapper.dataset.nolink = true
      img[i].before(wrapper)
      wrapper.append(img[i])
      var divWrap = document.createElement('div')
      divWrap.classList.add('gallery')
      wrapper.before(divWrap)
      divWrap.append(wrapper)
    }
    baguetteBox.run('.gallery')
  }
</script>
<script>
  loadScript(
    "/js/lib/lightbox/baguetteBox.min.js",
    addImgLayout
  )
</script>
 
     
     
    <script src="/js/main.js"></script> 
    
      <script> 
        loadScript('/js/lib/busuanzi.min.js') 
      </script>
     
    
      <script>
        var addLazyload = function () {
          var observer = lozad('.lozad', {
            load: function (el) {
              el.srcset = el.getAttribute('data-src')
            },
            loaded: function (el) {
              el.classList.add('loaded')
            },
          })
          observer.observe()
        }
      </script>
      <script>
        loadScript('/js/lib/lozad.min.js', addLazyload)
      </script>
     
    
    
      <script>
        setTimeout(() => {localSearch("search.json")}, 0)
      </script>
    
  </body>
</html>
