<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta 
    name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta 
    http-equiv="X-UA-Compatible" 
    content="ie=edge">
  <meta 
    name="theme-color" 
    content="#fff" 
    id="theme-color">
  <meta 
    name="description" 
    content="æ‡’æ‡’æ‡’èœ—ç‰›ğŸŒ">
  <link 
    rel="icon" 
    href="/img/little-prince.png">
  <title>è·³è¡¨</title>
  
    
      <meta 
        property="og:title" 
        content="è·³è¡¨">
    
    
      <meta 
        property="og:url" 
        content="https://lazy-snail.github.io/2020/07/04/Algs/skipList/index.html">
    
    
      <meta 
        property="og:img" 
        content="/img/little-prince.png">
    
    
    
      <meta 
        property="og:type" 
        content="article">
      <meta 
        property="og:article:published_time" 
        content="2020-07-04">
      <meta 
        property="og:article:modified_time" 
        content="2022-06-21">
      <meta 
        property="og:article:author" 
        content="Neil">
      
        
          <meta 
            property="og:article:tag" 
            content="algs">
        
          <meta 
            property="og:article:tag" 
            content="java">
        
      
    
  
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
    function loadCSS(href, data, attr) {
      var sheet = document.createElement('link');
      sheet.ref = 'stylesheet';
      sheet.href = href;
      sheet.dataset[data] = attr;
      document.head.appendChild(sheet);
    }
    function changeCSS(cssFile, data, attr) {
      var oldlink = document.querySelector(data);
      var newlink = document.createElement("link");
      newlink.setAttribute("rel", "stylesheet");
      newlink.setAttribute("href", cssFile);
      newlink.dataset.prism = attr;
      document.head.replaceChild(newlink, oldlink);
    }
  </script>
  
    
      
      
      
      
        
        
        
        <script>
          function prismThemeChange() {
            if(document.getElementById('theme-color').dataset.mode === 'dark') {
              if(document.querySelector('[data-prism]')) {
                changeCSS('/js/lib/prism/prism-tomorrow.min.css', '[data-prism]', 'prism-tomorrow');
              } else {
                loadCSS('/js/lib/prism/prism-tomorrow.min.css', 'prism', 'prism-tomorrow');
              }
            } else {
              if(document.querySelector('[data-prism]')) {
                changeCSS('/js/lib/prism/prism.min.css', '[data-prism]', 'prism');
              } else {
                loadCSS('/js/lib/prism/prism.min.css', 'prism', 'prism');
              }
            }
          }
          prismThemeChange()
        </script>
      
      
        
        <link rel="stylesheet" href="/js/lib/prism/prism-line-numbers.min.css">
      
    
  
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
  </script>
  
    <script>
      var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
        prismThemeChange();
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
        prismThemeChange();
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
        document.getElementById('theme-color').dataset.mode = getCssMediaQuery();
        prismThemeChange();
      }
    };
    setDarkmode();
    </script>
  
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  
    <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.js" as="script">
    <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.css" as="style" >
  
  
    <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
    
    <link rel="prefetch" href="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js" as="script">
  
  
  
  
  <link rel="stylesheet" href="/css/main.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">
  
    <link rel="stylesheet" href="/js/lib/lightbox/baguetteBox.min.css">
  
<meta name="generator" content="Hexo 6.1.0"></head>

  <body>
    <div class="wrapper">
       
      <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
        <img 
          class="navbar-logo-img"
          width="32"
          height="32"
          src="/img/little-prince.png" 
          alt="blog logo">
      
      <span class="navbar-logo-dsc">æ‡’èœ—ç‰›</span>
    </span>
  </div>
  <div class="navbar-menu">
    
      <a 
        href="/" 
        class="navbar-menu-item">
        
          Home
        
      </a>
    
      <a 
        href="/archives" 
        class="navbar-menu-item">
        
          Archive
        
      </a>
    
      <a 
        href="/tags" 
        class="navbar-menu-item">
        
          Tags
        
      </a>
    
      <a 
        href="/categories" 
        class="navbar-menu-item">
        
          Categories
        
      </a>
    
      <a 
        href="/about" 
        class="navbar-menu-item">
        
          About
        
      </a>
    
    <a 
      class="navbar-menu-item darknavbar" 
      id="dark">
      <i class="iconfont icon-weather"></i>
    </a>
    <a 
      class="navbar-menu-item searchnavbar" 
      id="search">
      <i 
        class="iconfont icon-search" 
        style="font-size: 1.2rem; font-weight: 400;">
      </i>
    </a>
  </div>
</nav> 
      
      <div 
        id="local-search" 
        style="display: none">
        <input
          class="navbar-menu-item"
          id="search-input"
          placeholder="è¯·è¾“å…¥æœç´¢å†…å®¹..." />
        <div id="search-content"></div>
      </div>
      
      <div class="section-wrap">
        <div class="container">
          <div class="columns">
            <main class="main-column">
<article class="card card-content">
  <header>
    <h1 class="post-title">
      è·³è¡¨
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2020-07-04T15:01:39.000Z">
      <i 
        class="iconfont icon-calendar" 
        style="margin-right: 2px;">
      </i>
      <span>2020-07-04</span>
    </time>
    
      <span class="dot"></span>
      
        <a 
          href="/categories/algs/" 
          class="post-meta-link">
          algs
        </a>
      
    
    
      <span class="dot"></span>
      <span>3.2k words</span>
    
  </div>
  
    <div 
      class="post-meta post-show-meta" 
      style="margin-top: -10px;">
      <div style="display: flex; align-items: center;">
        <i 
          class="iconfont icon-biaoqian" 
          style="margin-right: 2px; font-size: 1.15rem;">
        </i>
        
          
          <a 
            href="/tags/algs/" 
            class="post-meta-link">
            algs
          </a>
        
          
            <span class="dot"></span>
          
          <a 
            href="/tags/java/" 
            class="post-meta-link">
            java
          </a>
        
      </div>
    </div>
  
  </header>
  <div 
    id="section" 
    class="post-content">
    <p>[toc]</p>
<h2 id="ç®—æ³•-amp-æ•°æ®ç»“æ„"><a href="#ç®—æ³•-amp-æ•°æ®ç»“æ„" class="headerlink" title="ç®—æ³• &amp; æ•°æ®ç»“æ„"></a>ç®—æ³• &amp; æ•°æ®ç»“æ„</h2><p>$$ç¨‹åº &#x3D; ç®—æ³• + æ•°æ®ç»“æ„$$<br>TAOCPä¸­ï¼ŒDonaldå¹¶æ²¡æœ‰ç›´æ¥ç»™å‡ºâ€œç®—æ³•â€çš„å®šä¹‰ï¼Œè€Œæ˜¯åœ¨ç”¨äº†å‡ é¡µçš„ç¯‡å¹…è¿½æº¯äº†ä¸€ç•ªâ€œAlgorithmsâ€è¿™ä¸ªè¯çš„èµ·æºä»¥å°è¯•è®©è¯»è€…ç†è§£å®ƒçš„å«ä¹‰ä¹‹åï¼Œç”¨äº†æ¬§å‡ é‡Œå¾—æ±‚è§£ä¸¤ä¸ªæ­£æ•´æ•°æœ€å¤§å…¬å› å­çš„ä¾‹å­åšé˜è¿°ï¼š<br><img src="/2020/07/04/Algs/skipList/Euclid-algorithm.png" alt="æ¬§å‡ é‡Œå¾—ç®—æ³•" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2020/07/04/Algs/skipList/Euclid-algorithm.png" class="lozad post-image"><br>å…¶ä¸­æœ€é‡è¦çš„æ˜¯â†’ï¼Œèµ‹å€¼&#x2F;ä»£æ›¿ã€‚<br>ä»–çš„å­¦ç”Ÿã€çº¢çš®ç®—æ³•ä¹¦çš„ä½œè€…-Robert Sedgewickæ²¿ç”¨è¿™ä¸ªä¾‹å­å¹¶å°è¯•ç»™å‡ºäº†ä¸€ä¸ªå®šä¹‰ï¼šThe term algorithm is used in computer science to describe a <strong>finite</strong>, <strong>deterministic</strong>, and <strong>effective</strong> problem-solving method suitable for implementation as a computer program.<br>åŒæ—¶æŒ‡å‡ºäº†äºŒè€…ä¹‹é—´çš„å…³ç³»ï¼šå¤§å¤šæ•°ç®—æ³•éœ€è¦é€‚å½“åœ°ç»„ç»‡æ•°æ®ï¼Œ<strong>ä¸ºäº†ç»„ç»‡æ•°æ®å°±äº§ç”Ÿäº†æ•°æ®ç»“æ„</strong>ã€‚ä¸€è„‰ç›¸æ‰¿çš„è§‚ç‚¹æ˜¯ï¼Œæ•°æ®ç»“æ„æ˜¯ç®—æ³•çš„å‰¯äº§å“&#x2F;ç»“æœï¼ˆdata structures exist as the byproducts or end products of algorithmsï¼‰ã€‚</p>
<details>
  <summary>æ•°æ®ç»“æ„çš„ä½œç”¨</summary>

<h2 id="æ•°æ®ç»“æ„çš„ä½œç”¨"><a href="#æ•°æ®ç»“æ„çš„ä½œç”¨" class="headerlink" title="æ•°æ®ç»“æ„çš„ä½œç”¨"></a>æ•°æ®ç»“æ„çš„ä½œç”¨</h2><p>å‰é¢è¯´ç®—æ³•éœ€è¦ç»„ç»‡æ•°æ®ï¼Œæ‰€è°“ç»„ç»‡ï¼Œå…¶å®å°±æ˜¯æ“ä½œï¼ˆå¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼‰ã€‚æœ‰å…³æ•°æ®ç»“æ„å’Œç®—æ³•çš„è¯¾ç¨‹å¯¹ä¸­æ‰€æ¶‰åŠåˆ°çš„æ•°æ®ç»“æ„ï¼šæ•°ç»„ã€é“¾è¡¨ï¼›ä»¥åŠä»¥å‰é¢ä¸¤è€…ä¸ºåŸºç¡€çš„é«˜çº§æ•°æ®ç»“æ„ï¼šå †ã€æ ‘ã€å›¾ï¼›å»¶å±•å¼€åˆ°ç‰¹å®šé¢†åŸŸ&#x2F;æ–¹å‘ä¸Šä¼˜åŒ–çš„æ•°æ®ç»“æ„ï¼šå„ç§é˜Ÿåˆ—ï¼Œçº¢é»‘æ ‘ï¼ŒBã€B+æ ‘ï¼Œæ‹“æ‰‘å›¾ç­‰ç­‰ã€‚<br>æ‰€æœ‰çš„æ•°æ®ç»“æ„çš„ç›®çš„éƒ½æ˜¯åœ¨ç‰¹å®šåœºæ™¯ä¸‹ï¼Œä¼˜åŒ–æ•°æ®çš„æ“ä½œæ•ˆç‡ã€‚å¯ä»¥ç”¨ç®—æ³•ä¹¦ç»™çš„demoè·‘ä¸€éåå‡ æ¡æ’åºç®—æ³•çš„æ•ˆç‡ï¼Œä¾¿èƒ½ç›´è§‚æ„Ÿå—åˆ°ï¼Œå³ä½¿åœ¨ç°åœ¨è¿™æ ·é«˜æ€§èƒ½çš„è®¡ç®—æœºé¢å‰ï¼Œ$n^2$ â†’ $n\log(n)$æ‰€å¸¦æ¥å·¨å¤§æ•ˆç‡çš„æå‡ï¼›è€Œåœ¨ç‰¹å®šåœºæ™¯ä¸‹ï¼Œé‡‡ç”¨ä½å›¾ã€$O(n)$å¤æ‚åº¦çš„æ’åºç®—æ³•æ‰€èƒ½å¸¦æ¥çš„æ›´å¯è§‚çš„ç©ºé—´ã€æ—¶é—´ä¸Šçš„èŠ‚çœã€‚<br>ç»å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬æœŸå¾…çš„æ•°æ®ç»“æ„æ˜¯ï¼šåœ¨ä¿æŒâ€œæœ‰åºâ€çš„å‰æä¸‹ï¼Œæ»¡è¶³é«˜æ•ˆçš„å¢ã€åˆ ã€æŸ¥æ“ä½œã€‚å…¶ä¸­â€œæœ‰åºâ€æ˜¯ä¸€ä¸ªç›¸å¯¹çš„æ¦‚å¿µï¼Œå †ã€å•ç«¯&#x2F;åŒç«¯é˜Ÿåˆ—ã€æŸ¥æ‰¾æ ‘ã€æ‹“æ‰‘å›¾ç­‰ï¼Œéƒ½æ»¡è¶³ä»¥æˆ‘ä»¬æ‰€æœŸå¾…çš„æ–¹å¼çš„æœ‰åºæ€§ã€æˆ–è€…æˆ‘ä»¬æ‰€å…³å¿ƒçš„é‚£éƒ¨åˆ†æ•°æ®çš„æœ‰åºæ€§ã€‚</p>
</details>

<h2 id="å“ˆå¸Œã€çº¢é»‘æ ‘ã€è·³è¡¨"><a href="#å“ˆå¸Œã€çº¢é»‘æ ‘ã€è·³è¡¨" class="headerlink" title="å“ˆå¸Œã€çº¢é»‘æ ‘ã€è·³è¡¨"></a>å“ˆå¸Œã€çº¢é»‘æ ‘ã€è·³è¡¨</h2><p>è¿™é‡Œå…³æ³¨K-Vå‹æ•°æ®ç»“æ„ã€‚</p>
<h3 id="åˆé€‚çš„æ•°æ®ç»“æ„"><a href="#åˆé€‚çš„æ•°æ®ç»“æ„" class="headerlink" title="åˆé€‚çš„æ•°æ®ç»“æ„"></a>åˆé€‚çš„æ•°æ®ç»“æ„</h3><p>å…³æ³¨ä»¥ä¸‹é€ŸæŸ¥è¡¨æ•°æ®ã€‚<br><img src="/2020/07/04/Algs/skipList/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%A4%8D%E6%9D%82%E5%BA%A6.png" alt="æ•°æ®ç»“æ„å¤æ‚åº¦" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2020/07/04/Algs/skipList/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%A4%8D%E6%9D%82%E5%BA%A6.png" class="lozad post-image"><br>å…¶ä¸­ï¼Œå¸¸ç”¨çš„key-valueæ•°æ®ç»“æ„æœ‰ä¸‰ç§ï¼š<br>Hashè¡¨ï¼šæ’å…¥ã€æŸ¥æ‰¾æœ€å¿«ï¼Œä¸º$O(1)$ï¼›å¦‚ä½¿ç”¨é“¾è¡¨å®ç°åˆ™å¯å®ç°æ— é”ï¼›æ•°æ®æœ‰åºåŒ–éœ€è¦æ˜¾å¼çš„æ’åºæ“ä½œã€‚<br>çº¢é»‘æ ‘ï¼šæ’å…¥ã€æŸ¥æ‰¾ä¸º$\log(n)$ï¼Œä½†å¸¸æ•°é¡¹è¾ƒå°ï¼›æ— é”å®ç°çš„å¤æ‚æ€§å¾ˆé«˜ï¼Œä¸€èˆ¬éœ€è¦åŠ é”ï¼›æ•°æ®å¤©ç„¶æœ‰åºã€‚<br>SkipListï¼šæ’å…¥ã€æŸ¥æ‰¾ä¸º$\log(n)$ï¼Œä½†å¸¸æ•°é¡¹æ¯”çº¢é»‘æ ‘è¦å¤§ï¼›åº•å±‚ç»“æ„ä¸ºé“¾è¡¨ï¼Œå¯æ— é”å®ç°ï¼›æ•°æ®å¤©ç„¶æœ‰åºã€‚</p>
<ul>
<li>é¦–å…ˆï¼Œå¦‚æœèƒ½ç¡®å®šæŸäº›æ•°æ®æ˜¯é™æ€çš„ï¼Œä»¥ACAä¸ºä¾‹ï¼Œæˆ‘ä»¬çš„æ–‡æ¡ˆæ•°æ®ç›®å‰å°±å¯ä»¥çœ‹æˆæ˜¯é™æ€çš„ï¼šå¯èƒ½æœ‰æè¿°ä¸Šçš„è°ƒæ•´ï¼Œä½†é¢‘æ¬¡å¾ˆä½ï¼Œå¹¶ä¸”æ•°æ®é‡ä¸å¤§ã€‚è¿™éƒ¨åˆ†æ•°æ®å¦‚æœé‡‡ç”¨ç›´æ¥åŠ è½½åˆ°å†…å­˜æˆ–æ˜¯ä¸­é—´ç¼“å­˜çš„è¯ï¼Œç»“æ„åŒ–ä¸ºHashMapæ˜¯ä¸é”™çš„é€‰æ‹©ï¼›</li>
<li>å¦‚å‰æ‰€è¿°ï¼Œå¤§éƒ¨åˆ†æ•°æ®æ“ä½œåœºæ™¯æ˜¯éœ€è¦å¢åˆ æ”¹æ“ä½œçš„ï¼Œè€Œéä»…ä»…åªæœ‰è¯»æ“ä½œã€‚è¿™é‡Œä¸å†è®¨è®ºå †ã€é˜Ÿåˆ—ç­‰ä½¿ç”¨åœºæ™¯ï¼Œä¸“æ³¨é€šå¸¸æƒ…å†µä¸‹çš„<strong>æ•°æ®çš„å­˜å–æ“ä½œ</strong>ï¼Œæ­¤æ—¶éœ€è¦å…¼é¡¾è¯»å–ã€å’Œæ“ä½œåæ¢å¤æœ‰åºçš„æ•ˆç‡ï¼Œæ­¤æ—¶Hashè¡¨ä¸å†æ˜¯å¥½çš„é€‰æ‹©ï¼šè¿­ä»£ã€ä¿®æ”¹æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œè€Œçº¢é»‘æ ‘åˆ™èƒ½å¾ˆå¥½åœ°æ»¡è¶³åŠŸèƒ½éœ€æ±‚ï¼›</li>
</ul>
<h2 id="ä¸ºä»€ä¹ˆè¿˜è¦æœ‰è·³è¡¨"><a href="#ä¸ºä»€ä¹ˆè¿˜è¦æœ‰è·³è¡¨" class="headerlink" title="ä¸ºä»€ä¹ˆè¿˜è¦æœ‰è·³è¡¨"></a>ä¸ºä»€ä¹ˆè¿˜è¦æœ‰è·³è¡¨</h2><p>ä½œä¸ºå¹³è¡¡æ ‘çš„ä¸€ç§æ›¿ä»£å®ç°ï¼Œè·³è¡¨ä¸»è¦æ‹¥æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><p><strong>æ›´ç®€å•çš„å®ç°</strong><br>çº¢é»‘æ ‘å¢åˆ æ”¹å…ƒç´ éœ€è¦è¿›è¡Œæ—‹è½¬ã€å˜è‰²ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦è€ƒè™‘çš„ç»†èŠ‚ä¹Ÿæ¯”è¾ƒå¤šï¼Œåˆ°äº†å¹¶å‘åœºæ™¯ä¸‹æ›´éš¾ä»¥å†™å‡ºå¯ç”¨ä¸”é«˜æ•ˆçš„çº¢é»‘æ ‘å®ç°ï¼›è€Œè·³è¡¨å®ç°åŸç†ç›¸å½“ç®€å•ï¼Œå°±æ˜¯å‡çº§ç‰ˆçš„é“¾è¡¨ï¼ŒæŠŠé“¾è¡¨çš„æŸä¸€äº›å…ƒç´ éšæœºæŠ½å‡ºæ¥å†ç»„æˆä¸€ä¸ªé“¾è¡¨ï¼Œä½œä¸ºä¸€çº§ç´¢å¼•ï¼Œåœ¨è¯¥ç´¢å¼•é›†ä¸­å†æ¬¡è¿›è¡ŒæŠ½å–ï¼Œå†åšä¸€çº§ç´¢å¼•ï¼Œä¾æ¬¡å®ç°å¤šçº§é“¾è¡¨ç´¢å¼•ï¼Œå°±ç»„æˆäº†ä¸€ä¸ªè·³è¡¨ã€‚</p>
</li>
<li><p><strong>ä¸ºäº†è§£å†³åœ¨é«˜å¹¶å‘ä¸‹ï¼Œçº¢é»‘æ ‘çš„é”å®ç°å¯¼è‡´çš„å¯èƒ½çš„æ­»é”å’Œå¹¶å‘åº¦é™ä½é—®é¢˜</strong>ã€‚<br>é¦–å…ˆè¿™å¥è¯æ„å‘³ç€ï¼Œåœ¨å•çº¿ç¨‹ã€ä½çº¿ç¨‹æ•°åœºæ™¯ä¸‹ï¼Œçº¢é»‘æ ‘å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼šä»¥jdk11ä¸ºä¾‹ï¼ŒConcurrentHashMapå­˜å–é€Ÿåº¦æ˜¯ConcurrentSkipListMapçš„4å€å·¦å³ï¼Œè€Œéšç€å¹¶å‘çš„çº¿ç¨‹æ•°å¢å¤šï¼Œåè€…çš„æ€§èƒ½ä¼˜åŠ¿ä¼šé€æ¸ä½“ç°å‡ºæ¥ï¼Œå®ƒçš„å­˜å–æ—¶é—´å¤æ‚åº¦å‡ ä¹å’Œçº¿ç¨‹æ•°æ— å…³ï¼Œä¸”æ— é”å¼€é”€ã€‚</p>
</li>
</ul>
<h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><p>ä¸Šè¿°å¯è§è·³è¡¨ä¹Ÿæ˜¯ä¸€ç§å…¸å‹çš„â€œç©ºé—´æ¢æ—¶é—´â€çš„æ•°æ®ç»“æ„ã€‚å…¶åº•å±‚é‡‡ç”¨äºŒç»´é“¾è¡¨ï¼Œè€Œéé€šå¸¸é‡‡ç”¨çš„æ•°ç»„å®ç°ã€‚åŸºæœ¬ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ç”±å¾ˆå¤šå±‚ç»“æ„ç»„æˆï¼›</li>
<li>æ¯ä¸€å±‚éƒ½æ˜¯ä¸€ä¸ªæœ‰åºçš„é“¾è¡¨ï¼›</li>
<li>æœ€åº•å±‚(Level 1)çš„é“¾è¡¨åŒ…å«æ‰€æœ‰å…ƒç´ ï¼›</li>
<li>å¦‚æœä¸€ä¸ªå…ƒç´ å‡ºç°åœ¨ Level i çš„é“¾è¡¨ä¸­ï¼Œåˆ™å®ƒåœ¨ Level i ä¹‹ä¸‹çš„é“¾è¡¨ä¹Ÿéƒ½ä¼šå‡ºç°ï¼›</li>
<li>æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡å‘åŒä¸€é“¾è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªæŒ‡å‘ä¸‹é¢ä¸€å±‚çš„å…ƒç´ ã€‚<br><img src="/2020/07/04/Algs/skipList/Skip_list.svg" alt="è·³è¡¨ç»“æ„" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2020/07/04/Algs/skipList/Skip_list.svg" class="lozad post-image"></li>
</ul>
<h2 id="è·³è¡¨å®ç°"><a href="#è·³è¡¨å®ç°" class="headerlink" title="è·³è¡¨å®ç°"></a>è·³è¡¨å®ç°</h2><h3 id="æ„é€ "><a href="#æ„é€ " class="headerlink" title="æ„é€ "></a>æ„é€ </h3><p>è€ƒè™‘ä¸€ä¸ªé“¾è¡¨ï¼š<br><img src="/2020/07/04/Algs/skipList/skipList%E6%9E%84%E9%80%A0-1.jpg" alt="è·³è¡¨æ„é€ " srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2020/07/04/Algs/skipList/skipList%E6%9E%84%E9%80%A0-1.jpg" class="lozad post-image"><br>ä»è¯¥æœ‰åºè¡¨ä¸­æœç´¢å…ƒç´ &lt; 23, 43, 59&gt;ï¼Œéœ€è¦æ¯”è¾ƒçš„æ¬¡æ•°åˆ†åˆ«ä¸º&lt; 2, 4, 6 &gt;ï¼Œæ€»å…±æ¯”è¾ƒçš„æ¬¡æ•°ä¸º 2 + 4 + 6 &#x3D; 12 æ¬¡ã€‚<br>æœ‰æ²¡æœ‰ä¼˜åŒ–çš„ç®—æ³•ï¼Ÿé“¾è¡¨æ˜¯æœ‰åºçš„ï¼Œä½†ä¸èƒ½ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ã€‚ç±»ä¼¼äºŒå‰æœç´¢æ ‘ï¼Œæˆ‘ä»¬æŠŠä¸€äº›èŠ‚ç‚¹æå–å‡ºæ¥ï¼Œä½œä¸ºç´¢å¼•ã€‚å¾—åˆ°å¦‚ä¸‹ç»“æ„ï¼š<br><img src="/2020/07/04/Algs/skipList/skipList%E6%9E%84%E9%80%A0-2.jpg" alt="è·³è¡¨æ„é€ " srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2020/07/04/Algs/skipList/skipList%E6%9E%84%E9%80%A0-2.jpg" class="lozad post-image"><br>è¿™é‡ŒæŠŠ&lt; 14, 34, 50, 72 &gt;æå–å‡ºæ¥ä½œä¸ºä¸€çº§ç´¢å¼•ï¼Œè¿™æ ·æœç´¢çš„æ—¶å€™å°±å¯ä»¥å‡å°‘æ¯”è¾ƒæ¬¡æ•°äº†ã€‚è¿˜å¯ä»¥å†ä»ä¸€çº§ç´¢å¼•æå–ä¸€äº›å…ƒç´ å‡ºæ¥ï¼Œä½œä¸ºäºŒçº§ç´¢å¼•ï¼Œå˜æˆå¦‚ä¸‹ç»“æ„ï¼š<br><img src="/2020/07/04/Algs/skipList/skipList%E6%9E%84%E9%80%A0-3.jpg" alt="è·³è¡¨æ„é€ " srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2020/07/04/Algs/skipList/skipList%E6%9E%84%E9%80%A0-3.jpg" class="lozad post-image"></p>
<details>
  <summary>èŠ‚ç‚¹ç±»</summary>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span> <span class="token comment">// currently, never detached</span>
    <span class="token class-name">V</span> val<span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> next<span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>redis ä½¿ç”¨Cå®ç°ï¼Œè¯¦è§ï¼š<a target="_blank" rel="noopener" href="https://github.com/antirez/redis/blob/unstable/src/server.h">https://github.com/antirez/redis/blob/unstable/src/server.h</a></p>
</details>

<h3 id="æœç´¢å…ƒç´ "><a href="#æœç´¢å…ƒç´ " class="headerlink" title="æœç´¢å…ƒç´ "></a>æœç´¢å…ƒç´ </h3><p>æŸ¥æ‰¾å…ƒç´  117ï¼š<br><img src="/2020/07/04/Algs/skipList/skipList%E6%9F%A5%E6%89%BE.jpg" alt="è·³è¡¨æ„é€ " srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2020/07/04/Algs/skipList/skipList%E6%9F%A5%E6%89%BE.jpg" class="lozad post-image"></p>
<ol>
<li>æ¯”è¾ƒ21ï¼Œæ¯” 21 å¤§ï¼Œå¾€åé¢æ‰¾</li>
<li>æ¯”è¾ƒ37ï¼Œæ¯” 37å¤§ï¼Œæ¯”é“¾è¡¨æœ€å¤§å€¼å°ï¼Œä» 37 çš„ä¸‹é¢ä¸€å±‚å¼€å§‹æ‰¾</li>
<li>æ¯”è¾ƒ71ï¼Œæ¯” 71 å¤§ï¼Œæ¯”é“¾è¡¨æœ€å¤§å€¼å°ï¼Œä» 71 çš„ä¸‹é¢ä¸€å±‚å¼€å§‹æ‰¾</li>
<li>æ¯”è¾ƒ85ï¼Œæ¯” 85 å¤§ï¼Œä»åé¢æ‰¾</li>
<li>æ¯”è¾ƒ117ï¼Œç­‰äº 117ï¼Œ æ‰¾åˆ°äº†èŠ‚ç‚¹ã€‚</li>
</ol>
<details>
  <summary>æœç´¢</summary>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token function">findNode</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// don't postpone errors</span>
    <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">></span></span> cmp <span class="token operator">=</span> comparator<span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> b<span class="token punctuation">;</span>
    outer<span class="token operator">:</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>b <span class="token operator">=</span> <span class="token function">findPredecessor</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> cmp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> n<span class="token punctuation">;</span> <span class="token class-name">K</span> k<span class="token punctuation">;</span> <span class="token class-name">V</span> v<span class="token punctuation">;</span> <span class="token keyword">int</span> c<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">=</span> b<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span> outer<span class="token punctuation">;</span>               <span class="token comment">// empty</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> n<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>                     <span class="token comment">// b is deleted</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>v <span class="token operator">=</span> n<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token function">unlinkNode</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// n is deleted</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">=</span> <span class="token function">cpr</span><span class="token punctuation">(</span>cmp<span class="token punctuation">,</span> key<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
                b <span class="token operator">=</span> n<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> n<span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token keyword">break</span> outer<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</details>

<h3 id="æ–°å¢å…ƒç´ "><a href="#æ–°å¢å…ƒç´ " class="headerlink" title="æ–°å¢å…ƒç´ "></a>æ–°å¢å…ƒç´ </h3><p>å…ˆç¡®å®šè¯¥å…ƒç´ è¦å æ®çš„å±‚æ•° Kï¼ˆä¸¢ç¡¬å¸ï¼Œéšæœºï¼‰ï¼Œç„¶ååœ¨ Level 1 â€¦ Level K å„ä¸ªå±‚çš„é“¾è¡¨éƒ½æ’å…¥å…ƒç´ ï¼š<br>æ’å…¥ 119ï¼Œ K &#x3D; 2<br><img src="/2020/07/04/Algs/skipList/skipList%E6%96%B0%E5%A2%9E-1.jpg" alt="è·³è¡¨-æ–°å¢å…ƒç´ " srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2020/07/04/Algs/skipList/skipList%E6%96%B0%E5%A2%9E-1.jpg" class="lozad post-image"><br>å…¶ä¸­ï¼Œç„¶éšæœºå˜é‡ K æ»¡è¶³å‚æ•°ä¸º $p &#x3D; 1&#x2F;2$ çš„å‡ ä½•åˆ†å¸ƒï¼ŒæœŸæœ›å€¼ $E[K] &#x3D; 1&#x2F;p &#x3D; 2$ã€‚å³å„ä¸ªå…ƒç´ çš„å±‚æ•°ï¼ŒæœŸæœ›å€¼æ˜¯ 2 å±‚ã€‚<br><img src="/2020/07/04/Algs/skipList/Skip_list_add_element.gif" alt="è·³è¡¨-æ–°å¢å…ƒç´ " srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2020/07/04/Algs/skipList/Skip_list_add_element.gif" class="lozad post-image"></p>
<details>
  <summary>æ’å…¥</summary>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">V</span> <span class="token function">doPut</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">></span></span> cmp <span class="token operator">=</span> comparator<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Index</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> h<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> b<span class="token punctuation">;</span>
        <span class="token class-name">VarHandle</span><span class="token punctuation">.</span><span class="token function">acquireFence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> levels <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                    <span class="token comment">// number of levels descended</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>h <span class="token operator">=</span> head<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// try to initialize</span>
            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> base <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Index</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            b <span class="token operator">=</span> <span class="token punctuation">(</span>HEAD<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> base <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Index</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> h<span class="token punctuation">,</span> r<span class="token punctuation">,</span> d<span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// count while descending</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> q<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> p<span class="token punctuation">;</span> <span class="token class-name">K</span> k<span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> r<span class="token punctuation">.</span>node<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> p<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span>
                        p<span class="token punctuation">.</span>val <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                        RIGHT<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> r<span class="token punctuation">,</span> r<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">cpr</span><span class="token punctuation">(</span>cmp<span class="token punctuation">,</span> key<span class="token punctuation">,</span> k<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
                        q <span class="token operator">=</span> r<span class="token punctuation">;</span>
                    <span class="token keyword">else</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>d <span class="token operator">=</span> q<span class="token punctuation">.</span>down<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token operator">++</span>levels<span class="token punctuation">;</span>
                    q <span class="token operator">=</span> d<span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
                <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                    b <span class="token operator">=</span> q<span class="token punctuation">.</span>node<span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> z <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>              <span class="token comment">// new node, if inserted</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                       <span class="token comment">// find insertion point</span>
                <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> n<span class="token punctuation">,</span> p<span class="token punctuation">;</span> <span class="token class-name">K</span> k<span class="token punctuation">;</span> <span class="token class-name">V</span> v<span class="token punctuation">;</span> <span class="token keyword">int</span> c<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">=</span> b<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>       <span class="token comment">// if empty, type check key now</span>
                        <span class="token function">cpr</span><span class="token punctuation">(</span>cmp<span class="token punctuation">,</span> key<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    c <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> n<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>                   <span class="token comment">// can't append; restart</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>v <span class="token operator">=</span> n<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token function">unlinkNode</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    c <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">=</span> <span class="token function">cpr</span><span class="token punctuation">(</span>cmp<span class="token punctuation">,</span> key<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
                    b <span class="token operator">=</span> n<span class="token punctuation">;</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
                         <span class="token punctuation">(</span>onlyIfAbsent <span class="token operator">||</span> VAL<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> v<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> v<span class="token punctuation">;</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
                    NEXT<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> n<span class="token punctuation">,</span>
                                       p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    z <span class="token operator">=</span> p<span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>z <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">int</span> lr <span class="token operator">=</span> <span class="token class-name">ThreadLocalRandom</span><span class="token punctuation">.</span><span class="token function">nextSecondarySeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>lr <span class="token operator">&amp;</span> <span class="token number">0x3</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token comment">// add indices with 1/4 prob</span>
                    <span class="token keyword">int</span> hr <span class="token operator">=</span> <span class="token class-name">ThreadLocalRandom</span><span class="token punctuation">.</span><span class="token function">nextSecondarySeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">long</span> rnd <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>hr <span class="token operator">&lt;&lt;</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>lr <span class="token operator">&amp;</span> <span class="token number">0</span>xffffffffL<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">int</span> skips <span class="token operator">=</span> levels<span class="token punctuation">;</span>      <span class="token comment">// levels to descend before add</span>
                    <span class="token class-name">Index</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> x <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               <span class="token comment">// create at most 62 indices</span>
                        x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Index</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>z<span class="token punctuation">,</span> x<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>rnd <span class="token operator">>=</span> <span class="token number">0L</span> <span class="token operator">||</span> <span class="token operator">--</span>skips <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token keyword">else</span>
                            rnd <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">addIndices</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> skips<span class="token punctuation">,</span> x<span class="token punctuation">,</span> cmp<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> skips <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
                        head <span class="token operator">==</span> h<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token comment">// try to add new level</span>
                        <span class="token class-name">Index</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> hx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Index</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>z<span class="token punctuation">,</span> x<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">Index</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> nh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Index</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>node<span class="token punctuation">,</span> h<span class="token punctuation">,</span> hx<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        HEAD<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> h<span class="token punctuation">,</span> nh<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>z<span class="token punctuation">.</span>val <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>       <span class="token comment">// deleted while adding indices</span>
                        <span class="token function">findPredecessor</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> cmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// clean</span>
                <span class="token punctuation">&#125;</span>
                <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</details>


<h3 id="åˆ é™¤å…ƒç´ "><a href="#åˆ é™¤å…ƒç´ " class="headerlink" title="åˆ é™¤å…ƒç´ "></a>åˆ é™¤å…ƒç´ </h3><p>é‡‡ç”¨æ ‡å‡†çš„é“¾è¡¨åˆ é™¤å³å¯ã€‚<br>åˆ é™¤ 71<br><img src="/2020/07/04/Algs/skipList/skipList%E5%88%A0%E9%99%A4.jpg" alt="è·³è¡¨-æ–°å¢å…ƒç´ " srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2020/07/04/Algs/skipList/skipList%E5%88%A0%E9%99%A4.jpg" class="lozad post-image"></p>
<details>
  <summary>åˆ é™¤</summary>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">doRemove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">></span></span> cmp <span class="token operator">=</span> comparator<span class="token punctuation">;</span>
    <span class="token class-name">V</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> b<span class="token punctuation">;</span>
    outer<span class="token operator">:</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>b <span class="token operator">=</span> <span class="token function">findPredecessor</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> cmp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span>
                  result <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> n<span class="token punctuation">;</span> <span class="token class-name">K</span> k<span class="token punctuation">;</span> <span class="token class-name">V</span> v<span class="token punctuation">;</span> <span class="token keyword">int</span> c<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">=</span> b<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span> outer<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> n<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>v <span class="token operator">=</span> n<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token function">unlinkNode</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">=</span> <span class="token function">cpr</span><span class="token punctuation">(</span>cmp<span class="token punctuation">,</span> key<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
                b <span class="token operator">=</span> n<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span> outer<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>value<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span> outer<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>VAL<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> v<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                result <span class="token operator">=</span> v<span class="token punctuation">;</span>
                <span class="token function">unlinkNode</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// loop to clean up</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">tryReduceLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</details>

<h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ol>
<li><p>jdkä»1.6å¼€å§‹å¼•å…¥äº†ä¸¤ä¸ªè·³è¡¨ç›¸å…³çš„å®ç°ç±»ï¼šConcurrentSkipListMapã€ConcurrentSkipListSetï¼ˆåŸºäºConcurrentSkipListMapï¼‰ï¼Œåœ¨jdkä¸­ä¸»è¦æ˜¯ç”¨äºé«˜å¹¶å‘åœºæ™¯ä¸‹ä»£æ›¿çº¢é»‘æ ‘çš„å®ç°ï¼Œä¸è¿‡ä»jdk8å¼€å§‹ï¼Œçº¿ç¨‹å®‰å…¨çš„Hashè¡¨ï¼šConcurrentHashMapé‡‡ç”¨äº†CASã€å–æ¶ˆåˆ†æ®µé”æ”¹ç”¨å¤§æ•°ç»„ã€å“ˆå¸Œç¢°æ’è¶…è¿‡é˜ˆå€¼æ—¶æ ‘åŒ–ï¼ˆçº¢é»‘æ ‘ï¼‰ç­‰æ‰‹æ®µè¿›ä¸€æ­¥æå‡äº†çº¿ç¨‹å®‰å…¨Hashè¡¨ç›¸å…³å®ç°ï¼Œæ€§èƒ½ä¸Šä¹Ÿæœ‰äº†å¾ˆå¤§æå‡ã€‚</p>
</li>
<li><p>redisï¼šredisçš„æœ‰åºé›†åˆzsetæ˜¯é‡‡ç”¨è·³è¡¨å®ç°çš„ã€‚åˆ†æä¸€ä¸‹zsetæ‰€æ”¯æŒçš„æ“ä½œå°±ä¸éš¾ç†è§£ä¸ºå•¥é‡‡ç”¨è·³è¡¨è€Œéçº¢é»‘æ ‘äº†ï¼š</p>
</li>
</ol>
<ul>
<li>æ’å…¥å…ƒç´ </li>
<li>åˆ é™¤å…ƒç´ </li>
<li>æŸ¥æ‰¾å…ƒç´ </li>
<li>æœ‰åºè¾“å‡ºæ‰€æœ‰å…ƒç´ </li>
<li>æŸ¥æ‰¾åŒºé—´å†…æ‰€æœ‰å…ƒç´ <br>é™¤äº†æ˜“äºå®ç°è¿™ä¸ªå› ç´ å¤–ã€‚zsetæ‰€æ”¯æŒçš„æ“ä½œä¸­ï¼Œå‰4é¡¹çº¢é»‘æ ‘éƒ½å¯ä»¥å®Œæˆï¼Œä¸”æ—¶é—´å¤æ‚åº¦ä¸è·³è¡¨ä¸€è‡´ã€‚ä½†æ˜¯ï¼Œæœ€åä¸€é¡¹ï¼Œçº¢é»‘æ ‘çš„æ•ˆç‡å°±æ²¡æœ‰è·³è¡¨é«˜äº†ã€‚åœ¨è·³è¡¨ä¸­ï¼Œè¦æŸ¥æ‰¾åŒºé—´çš„å…ƒç´ ï¼Œæˆ‘ä»¬åªè¦å®šä½åˆ°ä¸¤ä¸ªåŒºé—´ç«¯ç‚¹åœ¨æœ€ä½å±‚çº§çš„ä½ç½®ï¼Œç„¶åæŒ‰é¡ºåºéå†å…ƒç´ å°±å¯ä»¥äº†ï¼Œéå¸¸é«˜æ•ˆã€‚è€Œçº¢é»‘æ ‘åªèƒ½å®šä½åˆ°ç«¯ç‚¹åï¼Œå†ä»é¦–ä½ç½®å¼€å§‹æ¯æ¬¡éƒ½è¦æŸ¥æ‰¾åç»§èŠ‚ç‚¹ï¼Œç›¸å¯¹æ¥è¯´æ˜¯æ¯”è¾ƒè€—æ—¶çš„ã€‚</li>
</ul>
<ol start="3">
<li><p>LevelDBï¼šGoogle å¼€æºçš„ key&#x2F;value å­˜å‚¨å¼•æ“ LevelDB ä»¥åŠ Facebook åŸºäº LevelDB ä¼˜åŒ–çš„ RocksDB éƒ½æ˜¯ LSM Tree ç»“æ„çš„æ•°æ®åº“ï¼Œå†…éƒ¨çš„ MemTable ä½¿ç”¨è·³è¡¨å®ç°ã€‚HBase MemStore å†…éƒ¨å­˜å‚¨æ•°æ®å°±ä½¿ç”¨çš„è·³è¡¨ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼ŸHBase å±äº LSM Tree ç»“æ„çš„æ•°æ®åº“ï¼ŒLSM Tree ç»“æ„çš„æ•°æ®åº“æœ‰ä¸ªç‰¹ç‚¹ï¼Œå®æ—¶å†™å…¥çš„æ•°æ®å…ˆå†™å…¥åˆ°å†…å­˜ï¼Œå†…å­˜è¾¾åˆ°é˜ˆå€¼å¾€ç£ç›˜ flush çš„æ—¶å€™ï¼Œä¼šç”Ÿæˆç±»ä¼¼äº StoreFile çš„æœ‰åºæ–‡ä»¶ï¼Œè€Œè·³è¡¨æ°å¥½å°±æ˜¯å¤©ç„¶æœ‰åºçš„ï¼Œæ‰€ä»¥åœ¨ flush çš„æ—¶å€™æ•ˆç‡å¾ˆé«˜ï¼Œè€Œä¸”è·³è¡¨æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤æ€§èƒ½éƒ½å¾ˆé«˜ï¼Œè¿™åº”è¯¥æ˜¯ HBase MemStore å†…éƒ¨å­˜å‚¨æ•°æ®ä½¿ç”¨è·³è¡¨çš„åŸå› ä¹‹ä¸€ã€‚HBase ä½¿ç”¨çš„æ˜¯ java.util.concurrent ä¸‹çš„ ConcurrentSkipListMap()ã€‚</p>
</li>
<li><p>ESï¼šLuceneæ ¸å¿ƒæ•°æ®ç»“æ„é‡‡ç”¨äº†è·³è¡¨å®ç°å€’æ’è¡¨ã€‚ä½¿ç”¨FSTä¿å­˜è¯å…¸ï¼ŒFSTå¯ä»¥å®ç°å¿«é€Ÿçš„Seekï¼Œè¿™ç§ç»“æ„åœ¨å½“æŸ¥è¯¢å¯ä»¥è¡¨è¾¾æˆè‡ªåŠ¨æœºæ—¶(PrefixQueryã€FuzzyQueryã€RegexpQueryç­‰)æ•ˆç‡å¾ˆé«˜ã€‚(å¯ä»¥ç†è§£æˆè‡ªåŠ¨æœºå–äº¤é›†)æ­¤ç§åœºæ™¯ä¸»è¦ç”¨åœ¨å¯¹Queryè¿›è¡Œrewriteçš„æ—¶å€™ã€‚FSTå¯ä»¥è¡¨è¾¾å‡ºTermå€’æ’è¡¨æ‰€åœ¨çš„æ–‡ä»¶åç§»ã€‚å€’æ’è¡¨ä½¿ç”¨SkipListç»“æ„ã€‚ä»ä¸Šé¢çš„è®¨è®ºå¯çŸ¥ï¼Œæ±‚å€’æ’è¡¨çš„äº¤é›†ã€å¹¶é›†ã€å·®é›†éœ€è¦å„ç§SeekTo(docId)ï¼ŒSkipListèƒ½å¯¹Seekè¿›è¡ŒåŠ é€Ÿã€‚</p>
</li>
</ol>
<p>refï¼š<br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/256511/skip-list-vs-binary-search-tree">https://stackoverflow.com/questions/256511/skip-list-vs-binary-search-tree</a><br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Skip_list">https://en.wikipedia.org/wiki/Skip_list</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/sunxianghuang/article/details/52221913">https://blog.csdn.net/sunxianghuang/article/details/52221913</a><br><a target="_blank" rel="noopener" href="https://www.iteye.com/blog/imtinx-1291165">https://www.iteye.com/blog/imtinx-1291165</a><br>ã€Šalgorithmsã€‹<br>ã€Šthe art of computer programmingã€‹</p>

  </div>
  <div>
    
      <div 
        class="post-note note-warning copyright" 
        style="margin-top: 42px">
        <p>
          <span style="font-weight: bold;">ä½œè€…ï¼š</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="/about">
            Neil
          </a>
        </p>
        <p>
          <span style="font-weight: bold;">æ–‡ç« é“¾æ¥ï¼š</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="https://lazy-snail.github.io/2020/07/04/Algs/skipList/">
            https://lazy-snail.github.io/2020/07/04/Algs/skipList/
          </a>
        </p>
        <p><span style="font-weight: bold;">ç‰ˆæƒå£°æ˜ï¼š</span>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„</p>
      </div>
    
  </div>
</article>
<div class="nav">
  
    <div class="nav-item-prev">
      <a 
        href="/2020/07/30/CS/%E9%94%99%E8%AF%AFvs%E5%BC%82%E5%B8%B8/" 
        class="nav-link">
        <i class="iconfont icon-left nav-prev-icon"></i>
        <div>
          <div class="nav-label">Prev</div>
          
            <div class="nav-title">é”™è¯¯vså¼‚å¸¸ </div>
          
        </div>
      </a>
    </div>
  
  
    <div class="nav-item-next">
      <a 
        href="/2020/06/07/ING/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" 
        class="nav-link">
        <div>
          <div class="nav-label">Next</div>
          
            <div class="nav-title">åˆ†å¸ƒå¼é” </div>
          
        </div>
        <i class="iconfont icon-right nav-next-icon"></i>
      </a>
    </div>
  
</div>

<div 
  class="card card-content toc-card" 
  id="mobiletoc">
  <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%97%E6%B3%95-amp-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text">ç®—æ³• &amp; æ•°æ®ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">æ•°æ®ç»“æ„çš„ä½œç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%88%E5%B8%8C%E3%80%81%E7%BA%A2%E9%BB%91%E6%A0%91%E3%80%81%E8%B7%B3%E8%A1%A8"><span class="toc-number">3.</span> <span class="toc-text">å“ˆå¸Œã€çº¢é»‘æ ‘ã€è·³è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%88%E9%80%82%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">3.1.</span> <span class="toc-text">åˆé€‚çš„æ•°æ®ç»“æ„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E8%A6%81%E6%9C%89%E8%B7%B3%E8%A1%A8"><span class="toc-number">4.</span> <span class="toc-text">ä¸ºä»€ä¹ˆè¿˜è¦æœ‰è·³è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">4.1.</span> <span class="toc-text">ç‰¹ç‚¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%B3%E8%A1%A8%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.</span> <span class="toc-text">è·³è¡¨å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0"><span class="toc-number">5.1.</span> <span class="toc-text">æ„é€ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%85%83%E7%B4%A0"><span class="toc-number">5.2.</span> <span class="toc-text">æœç´¢å…ƒç´ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%85%83%E7%B4%A0"><span class="toc-number">5.3.</span> <span class="toc-text">æ–°å¢å…ƒç´ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-number">5.4.</span> <span class="toc-text">åˆ é™¤å…ƒç´ </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">6.</span> <span class="toc-text">é€‚ç”¨åœºæ™¯</span></a></li></ol>
</div></main>
            <aside class="left-column">
              
              <div class="card card-author">
                
  <img 
    src="/img/little-prince.png" 
    class="author-img"
    width="88"
    height="88"
    alt="author avatar">

<p class="author-name">Neil</p>
<p class="author-description">there's a will there's a way</p>
<div class="author-message">
  <a 
    class="author-posts-count" 
    href="/archives">
    <span>173</span>
    <span>Posts</span>
  </a>
  <a 
    class="author-categories-count" 
    href="/categories">
    <span>13</span>
    <span>Categories</span>
  </a>
  <a 
    class="author-tags-count" 
    href="/tags">
    <span>31</span>
    <span>Tags</span>
  </a>
</div>

              </div>
               <div class="sticky-tablet">
  
  
    <article class="display-when-two-columns spacer">
      <div class="card card-content toc-card">
        <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%97%E6%B3%95-amp-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text">ç®—æ³• &amp; æ•°æ®ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">æ•°æ®ç»“æ„çš„ä½œç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%88%E5%B8%8C%E3%80%81%E7%BA%A2%E9%BB%91%E6%A0%91%E3%80%81%E8%B7%B3%E8%A1%A8"><span class="toc-number">3.</span> <span class="toc-text">å“ˆå¸Œã€çº¢é»‘æ ‘ã€è·³è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%88%E9%80%82%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">3.1.</span> <span class="toc-text">åˆé€‚çš„æ•°æ®ç»“æ„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E8%A6%81%E6%9C%89%E8%B7%B3%E8%A1%A8"><span class="toc-number">4.</span> <span class="toc-text">ä¸ºä»€ä¹ˆè¿˜è¦æœ‰è·³è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">4.1.</span> <span class="toc-text">ç‰¹ç‚¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%B3%E8%A1%A8%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.</span> <span class="toc-text">è·³è¡¨å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0"><span class="toc-number">5.1.</span> <span class="toc-text">æ„é€ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%85%83%E7%B4%A0"><span class="toc-number">5.2.</span> <span class="toc-text">æœç´¢å…ƒç´ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%85%83%E7%B4%A0"><span class="toc-number">5.3.</span> <span class="toc-text">æ–°å¢å…ƒç´ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-number">5.4.</span> <span class="toc-text">åˆ é™¤å…ƒç´ </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">6.</span> <span class="toc-text">é€‚ç”¨åœºæ™¯</span></a></li></ol>
      </div>
    </article>
  
  
  <article class="card card-content categories-widget">
    <div class="categories-card">
  <div class="categories-header">
    <i 
      class="iconfont icon-fenlei" 
      style="padding-right: 2px;">
    </i>Categories
  </div>
  <div class="categories-list">
    
      <a href="/categories/Algs/">
        <div class="categories-list-item">
          Algs
          <span class="categories-list-item-badge">10</span>
        </div>
      </a>
    
      <a href="/categories/algs/">
        <div class="categories-list-item">
          algs
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/CN/">
        <div class="categories-list-item">
          CN
          <span class="categories-list-item-badge">10</span>
        </div>
      </a>
    
      <a href="/categories/CS/">
        <div class="categories-list-item">
          CS
          <span class="categories-list-item-badge">9</span>
        </div>
      </a>
    
      <a href="/categories/java/">
        <div class="categories-list-item">
          java
          <span class="categories-list-item-badge">61</span>
        </div>
      </a>
    
      <a href="/categories/middleware/">
        <div class="categories-list-item">
          middleware
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/backend/">
        <div class="categories-list-item">
          backend
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/tools/">
        <div class="categories-list-item">
          tools
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/DB/">
        <div class="categories-list-item">
          DB
          <span class="categories-list-item-badge">15</span>
        </div>
      </a>
    
      <a href="/categories/Daily/">
        <div class="categories-list-item">
          Daily
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/OS/">
        <div class="categories-list-item">
          OS
          <span class="categories-list-item-badge">14</span>
        </div>
      </a>
    
      <a href="/categories/cpp/">
        <div class="categories-list-item">
          cpp
          <span class="categories-list-item-badge">20</span>
        </div>
      </a>
    
      <a href="/categories/py/">
        <div class="categories-list-item">
          py
          <span class="categories-list-item-badge">3</span>
        </div>
      </a>
    
  </div>
</div>
  </article>
  
  <article class="card card-content tags-widget">
    <div class="tags-card">
  <div class="tags-header">
    <i 
      class="iconfont icon-biaoqian" 
      style="padding-right: 2px;">
    </i>hot tags
  </div>
  <div class="tags-list">
    
      <a 
        href="/tags/java/" 
        title="java">
        <div class="tags-list-item">java</div>
      </a>
    
      <a 
        href="/tags/cpp/" 
        title="cpp">
        <div class="tags-list-item">cpp</div>
      </a>
    
      <a 
        href="/tags/OS/" 
        title="OS">
        <div class="tags-list-item">OS</div>
      </a>
    
      <a 
        href="/tags/DB/" 
        title="DB">
        <div class="tags-list-item">DB</div>
      </a>
    
      <a 
        href="/tags/MySQL/" 
        title="MySQL">
        <div class="tags-list-item">MySQL</div>
      </a>
    
      <a 
        href="/tags/%E5%AE%B9%E5%99%A8/" 
        title="å®¹å™¨">
        <div class="tags-list-item">å®¹å™¨</div>
      </a>
    
      <a 
        href="/tags/%E5%B9%B6%E5%8F%91/" 
        title="å¹¶å‘">
        <div class="tags-list-item">å¹¶å‘</div>
      </a>
    
      <a 
        href="/tags/JVM/" 
        title="JVM">
        <div class="tags-list-item">JVM</div>
      </a>
    
      <a 
        href="/tags/CN/" 
        title="CN">
        <div class="tags-list-item">CN</div>
      </a>
    
      <a 
        href="/tags/Algs/" 
        title="Algs">
        <div class="tags-list-item">Algs</div>
      </a>
    
      <a 
        href="/tags/CS/" 
        title="CS">
        <div class="tags-list-item">CS</div>
      </a>
    
      <a 
        href="/tags/Q-A/" 
        title="Q&A">
        <div class="tags-list-item">Q&amp;A</div>
      </a>
    
      <a 
        href="/tags/%E6%96%B0%E7%89%B9%E6%80%A7/" 
        title="æ–°ç‰¹æ€§">
        <div class="tags-list-item">æ–°ç‰¹æ€§</div>
      </a>
    
      <a 
        href="/tags/%E7%BA%BF%E7%A8%8B/" 
        title="çº¿ç¨‹">
        <div class="tags-list-item">çº¿ç¨‹</div>
      </a>
    
      <a 
        href="/tags/Sort/" 
        title="Sort">
        <div class="tags-list-item">Sort</div>
      </a>
    
      <a 
        href="/tags/Linux/" 
        title="Linux">
        <div class="tags-list-item">Linux</div>
      </a>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
            <aside class="right-column">
              <div class="sticky-widescreen">
  
  
    <article class="card card-content toc-card">
      <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%97%E6%B3%95-amp-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text">ç®—æ³• &amp; æ•°æ®ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">æ•°æ®ç»“æ„çš„ä½œç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%88%E5%B8%8C%E3%80%81%E7%BA%A2%E9%BB%91%E6%A0%91%E3%80%81%E8%B7%B3%E8%A1%A8"><span class="toc-number">3.</span> <span class="toc-text">å“ˆå¸Œã€çº¢é»‘æ ‘ã€è·³è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%88%E9%80%82%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">3.1.</span> <span class="toc-text">åˆé€‚çš„æ•°æ®ç»“æ„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E8%A6%81%E6%9C%89%E8%B7%B3%E8%A1%A8"><span class="toc-number">4.</span> <span class="toc-text">ä¸ºä»€ä¹ˆè¿˜è¦æœ‰è·³è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">4.1.</span> <span class="toc-text">ç‰¹ç‚¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%B3%E8%A1%A8%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.</span> <span class="toc-text">è·³è¡¨å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0"><span class="toc-number">5.1.</span> <span class="toc-text">æ„é€ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%85%83%E7%B4%A0"><span class="toc-number">5.2.</span> <span class="toc-text">æœç´¢å…ƒç´ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%85%83%E7%B4%A0"><span class="toc-number">5.3.</span> <span class="toc-text">æ–°å¢å…ƒç´ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-number">5.4.</span> <span class="toc-text">åˆ é™¤å…ƒç´ </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">6.</span> <span class="toc-text">é€‚ç”¨åœºæ™¯</span></a></li></ol>
    </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header">
    <i 
      class="iconfont icon-wenzhang_huaban" 
      style="padding-right: 2px;">
    </i>Recent Posts
  </div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-21</div>
        <a href="/2022/06/21/java/spring/AOP/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-21</div>
        <a href="/2022/06/21/java/spring/SpringBoot%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-21</div>
        <a href="/2022/06/21/java/spring/ThreadLocal/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-06-21</div>
        <a href="/2022/06/21/java/spring/%E6%B3%A8%E8%A7%A3-Transactional/"><div class="recent-posts-item-content"></div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
          </div>
        </div>
      </div>
    </div>
     
    <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>
          Copyright Â©
          
            2017 -
          
          2022
        </span>
        &nbsp;
        <a 
          href="/" 
          class="footer-link">
          æ‡’èœ—ç‰›
        </a>
      </div>
    </div>

    
      <div class="footer-dsc">
        
          Powered by
          <a 
            href="https://hexo.io/" 
            class="footer-link" 
            target="_blank" 
            rel="nofollow noopener noreferrer">
            &nbsp;Hexo
          </a>
        
        
          <span>&nbsp;|&nbsp;</span>
        
        
          Theme -
          <a 
            href="https://github.com/theme-kaze" 
            class="footer-link" 
            target="_blank"
            rel="nofollow noopener noreferrer">
            &nbsp;Kaze
          </a>
        
      </div>
    
    
    
    
      <div class="footer-dsc">
        
        
        
      </div>
      
    
</footer> 
    
  <a 
    role="button" 
    id="scrollbutton" 
    class="basebutton" 
    aria-label="å›åˆ°é¡¶éƒ¨">
    <i class="iconfont icon-arrowleft button-icon"></i>
  </a>

<a 
  role="button" 
  id="menubutton"
  aria-label="menu button"
  class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a 
  role="button" 
  id="popbutton" 
  class="basebutton" 
  aria-label="æ§åˆ¶ä¸­å¿ƒ">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a 
  role="button" 
  id="darkbutton" 
  class="basebutton darkwidget" 
  aria-label="å¤œè‰²æ¨¡å¼">
  <i class="iconfont icon-weather button-icon"></i>
</a>
<a 
  role="button" 
  id="searchbutton" 
  class="basebutton searchwidget" 
  aria-label="æœç´¢">
  <i class="iconfont icon-search button-icon"></i>
</a> 
     
     
      

  
  
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
      };
    </script>
    
<script src="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js"></script>

  
 
     
     
      <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img')
    var i
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a')
      wrapper.setAttribute('href', img[i].getAttribute('data-src'))
      wrapper.setAttribute('aria-label', 'illustration')
      wrapper.style.cssText =
        'width: 100%; display: flex; justify-content: center;'
      if (img[i].alt) wrapper.dataset.caption = img[i].alt
      wrapper.dataset.nolink = true
      img[i].before(wrapper)
      wrapper.append(img[i])
      var divWrap = document.createElement('div')
      divWrap.classList.add('gallery')
      wrapper.before(divWrap)
      divWrap.append(wrapper)
    }
    baguetteBox.run('.gallery')
  }
</script>
<script>
  loadScript(
    "/js/lib/lightbox/baguetteBox.min.js",
    addImgLayout
  )
</script>
 
     
     
    <script src="/js/main.js"></script> 
    
      <script> 
        loadScript('/js/lib/busuanzi.min.js') 
      </script>
     
    
      <script>
        var addLazyload = function () {
          var observer = lozad('.lozad', {
            load: function (el) {
              el.srcset = el.getAttribute('data-src')
            },
            loaded: function (el) {
              el.classList.add('loaded')
            },
          })
          observer.observe()
        }
      </script>
      <script>
        loadScript('/js/lib/lozad.min.js', addLazyload)
      </script>
     
    
    
      <script>
        setTimeout(() => {localSearch("search.json")}, 0)
      </script>
    
  </body>
</html>
